(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var $0={exports:{}},Oc={},z0={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ga=Symbol.for("react.element"),RE=Symbol.for("react.portal"),PE=Symbol.for("react.fragment"),bE=Symbol.for("react.strict_mode"),jE=Symbol.for("react.profiler"),DE=Symbol.for("react.provider"),LE=Symbol.for("react.context"),VE=Symbol.for("react.forward_ref"),OE=Symbol.for("react.suspense"),ME=Symbol.for("react.memo"),FE=Symbol.for("react.lazy"),rg=Symbol.iterator;function UE(t){return t===null||typeof t!="object"?null:(t=rg&&t[rg]||t["@@iterator"],typeof t=="function"?t:null)}var q0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H0=Object.assign,W0={};function Di(t,e,n){this.props=t,this.context=e,this.refs=W0,this.updater=n||q0}Di.prototype.isReactComponent={};Di.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Di.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function G0(){}G0.prototype=Di.prototype;function pf(t,e,n){this.props=t,this.context=e,this.refs=W0,this.updater=n||q0}var gf=pf.prototype=new G0;gf.constructor=pf;H0(gf,Di.prototype);gf.isPureReactComponent=!0;var sg=Array.isArray,K0=Object.prototype.hasOwnProperty,yf={current:null},Q0={key:!0,ref:!0,__self:!0,__source:!0};function Y0(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)K0.call(e,r)&&!Q0.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:ga,type:t,key:i,ref:o,props:s,_owner:yf.current}}function BE(t,e){return{$$typeof:ga,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function vf(t){return typeof t=="object"&&t!==null&&t.$$typeof===ga}function $E(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ig=/\/+/g;function Yu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?$E(""+t.key):e.toString(36)}function kl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ga:case RE:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Yu(o,0):r,sg(s)?(n="",t!=null&&(n=t.replace(ig,"$&/")+"/"),kl(s,e,n,"",function(d){return d})):s!=null&&(vf(s)&&(s=BE(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(ig,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",sg(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Yu(i,l);o+=kl(i,e,n,c,s)}else if(c=UE(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Yu(i,l++),o+=kl(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function sl(t,e,n){if(t==null)return t;var r=[],s=0;return kl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function zE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var jt={current:null},Rl={transition:null},qE={ReactCurrentDispatcher:jt,ReactCurrentBatchConfig:Rl,ReactCurrentOwner:yf};function J0(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:sl,forEach:function(t,e,n){sl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return sl(t,function(){e++}),e},toArray:function(t){return sl(t,function(e){return e})||[]},only:function(t){if(!vf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};oe.Component=Di;oe.Fragment=PE;oe.Profiler=jE;oe.PureComponent=pf;oe.StrictMode=bE;oe.Suspense=OE;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qE;oe.act=J0;oe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=H0({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=yf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)K0.call(e,c)&&!Q0.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:ga,type:t.type,key:s,ref:i,props:r,_owner:o}};oe.createContext=function(t){return t={$$typeof:LE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:DE,_context:t},t.Consumer=t};oe.createElement=Y0;oe.createFactory=function(t){var e=Y0.bind(null,t);return e.type=t,e};oe.createRef=function(){return{current:null}};oe.forwardRef=function(t){return{$$typeof:VE,render:t}};oe.isValidElement=vf;oe.lazy=function(t){return{$$typeof:FE,_payload:{_status:-1,_result:t},_init:zE}};oe.memo=function(t,e){return{$$typeof:ME,type:t,compare:e===void 0?null:e}};oe.startTransition=function(t){var e=Rl.transition;Rl.transition={};try{t()}finally{Rl.transition=e}};oe.unstable_act=J0;oe.useCallback=function(t,e){return jt.current.useCallback(t,e)};oe.useContext=function(t){return jt.current.useContext(t)};oe.useDebugValue=function(){};oe.useDeferredValue=function(t){return jt.current.useDeferredValue(t)};oe.useEffect=function(t,e){return jt.current.useEffect(t,e)};oe.useId=function(){return jt.current.useId()};oe.useImperativeHandle=function(t,e,n){return jt.current.useImperativeHandle(t,e,n)};oe.useInsertionEffect=function(t,e){return jt.current.useInsertionEffect(t,e)};oe.useLayoutEffect=function(t,e){return jt.current.useLayoutEffect(t,e)};oe.useMemo=function(t,e){return jt.current.useMemo(t,e)};oe.useReducer=function(t,e,n){return jt.current.useReducer(t,e,n)};oe.useRef=function(t){return jt.current.useRef(t)};oe.useState=function(t){return jt.current.useState(t)};oe.useSyncExternalStore=function(t,e,n){return jt.current.useSyncExternalStore(t,e,n)};oe.useTransition=function(){return jt.current.useTransition()};oe.version="18.3.1";z0.exports=oe;var F=z0.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HE=F,WE=Symbol.for("react.element"),GE=Symbol.for("react.fragment"),KE=Object.prototype.hasOwnProperty,QE=HE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,YE={key:!0,ref:!0,__self:!0,__source:!0};function X0(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)KE.call(e,r)&&!YE.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:WE,type:t,key:i,ref:o,props:s,_owner:QE.current}}Oc.Fragment=GE;Oc.jsx=X0;Oc.jsxs=X0;$0.exports=Oc;var u=$0.exports,Z0={exports:{}},Jt={},ev={exports:{}},tv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,q){var Z=z.length;z.push(q);e:for(;0<Z;){var Ce=Z-1>>>1,we=z[Ce];if(0<s(we,q))z[Ce]=q,z[Z]=we,Z=Ce;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var q=z[0],Z=z.pop();if(Z!==q){z[0]=Z;e:for(var Ce=0,we=z.length,Ve=we>>>1;Ce<Ve;){var gn=2*(Ce+1)-1,yn=z[gn],$=gn+1,xe=z[$];if(0>s(yn,Z))$<we&&0>s(xe,yn)?(z[Ce]=xe,z[$]=Z,Ce=$):(z[Ce]=yn,z[gn]=Z,Ce=gn);else if($<we&&0>s(xe,Z))z[Ce]=xe,z[$]=Z,Ce=$;else break e}}return q}function s(z,q){var Z=z.sortIndex-q.sortIndex;return Z!==0?Z:z.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],f=1,g=null,p=3,x=!1,S=!1,C=!1,D=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(z){for(var q=n(d);q!==null;){if(q.callback===null)r(d);else if(q.startTime<=z)r(d),q.sortIndex=q.expirationTime,e(c,q);else break;q=n(d)}}function k(z){if(C=!1,w(z),!S)if(n(c)!==null)S=!0,yr(j);else{var q=n(d);q!==null&&pn(k,q.startTime-z)}}function j(z,q){S=!1,C&&(C=!1,T(y),y=-1),x=!0;var Z=p;try{for(w(q),g=n(c);g!==null&&(!(g.expirationTime>q)||z&&!R());){var Ce=g.callback;if(typeof Ce=="function"){g.callback=null,p=g.priorityLevel;var we=Ce(g.expirationTime<=q);q=t.unstable_now(),typeof we=="function"?g.callback=we:g===n(c)&&r(c),w(q)}else r(c);g=n(c)}if(g!==null)var Ve=!0;else{var gn=n(d);gn!==null&&pn(k,gn.startTime-q),Ve=!1}return Ve}finally{g=null,p=Z,x=!1}}var P=!1,_=null,y=-1,I=5,A=-1;function R(){return!(t.unstable_now()-A<I)}function b(){if(_!==null){var z=t.unstable_now();A=z;var q=!0;try{q=_(!0,z)}finally{q?N():(P=!1,_=null)}}else P=!1}var N;if(typeof E=="function")N=function(){E(b)};else if(typeof MessageChannel<"u"){var je=new MessageChannel,mn=je.port2;je.port1.onmessage=b,N=function(){mn.postMessage(null)}}else N=function(){D(b,0)};function yr(z){_=z,P||(P=!0,N())}function pn(z,q){y=D(function(){z(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){S||x||(S=!0,yr(j))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(z){switch(p){case 1:case 2:case 3:var q=3;break;default:q=p}var Z=p;p=q;try{return z()}finally{p=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,q){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Z=p;p=z;try{return q()}finally{p=Z}},t.unstable_scheduleCallback=function(z,q,Z){var Ce=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?Ce+Z:Ce):Z=Ce,z){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=Z+we,z={id:f++,callback:q,priorityLevel:z,startTime:Z,expirationTime:we,sortIndex:-1},Z>Ce?(z.sortIndex=Z,e(d,z),n(c)===null&&z===n(d)&&(C?(T(y),y=-1):C=!0,pn(k,Z-Ce))):(z.sortIndex=we,e(c,z),S||x||(S=!0,yr(j))),z},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(z){var q=p;return function(){var Z=p;p=q;try{return z.apply(this,arguments)}finally{p=Z}}}})(tv);ev.exports=tv;var JE=ev.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XE=F,Yt=JE;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var nv=new Set,Fo={};function Rs(t,e){fi(t,e),fi(t+"Capture",e)}function fi(t,e){for(Fo[t]=e,t=0;t<e.length;t++)nv.add(e[t])}var or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bd=Object.prototype.hasOwnProperty,ZE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,og={},ag={};function eT(t){return Bd.call(ag,t)?!0:Bd.call(og,t)?!1:ZE.test(t)?ag[t]=!0:(og[t]=!0,!1)}function tT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function nT(t,e,n,r){if(e===null||typeof e>"u"||tT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Dt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var gt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){gt[t]=new Dt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];gt[e]=new Dt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){gt[t]=new Dt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){gt[t]=new Dt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){gt[t]=new Dt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){gt[t]=new Dt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){gt[t]=new Dt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){gt[t]=new Dt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){gt[t]=new Dt(t,5,!1,t.toLowerCase(),null,!1,!1)});var _f=/[\-:]([a-z])/g;function wf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(_f,wf);gt[e]=new Dt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(_f,wf);gt[e]=new Dt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(_f,wf);gt[e]=new Dt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){gt[t]=new Dt(t,1,!1,t.toLowerCase(),null,!1,!1)});gt.xlinkHref=new Dt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){gt[t]=new Dt(t,1,!1,t.toLowerCase(),null,!0,!0)});function xf(t,e,n,r){var s=gt.hasOwnProperty(e)?gt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(nT(e,n,s,r)&&(n=null),r||s===null?eT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var mr=XE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,il=Symbol.for("react.element"),qs=Symbol.for("react.portal"),Hs=Symbol.for("react.fragment"),Ef=Symbol.for("react.strict_mode"),$d=Symbol.for("react.profiler"),rv=Symbol.for("react.provider"),sv=Symbol.for("react.context"),Tf=Symbol.for("react.forward_ref"),zd=Symbol.for("react.suspense"),qd=Symbol.for("react.suspense_list"),If=Symbol.for("react.memo"),Tr=Symbol.for("react.lazy"),iv=Symbol.for("react.offscreen"),lg=Symbol.iterator;function no(t){return t===null||typeof t!="object"?null:(t=lg&&t[lg]||t["@@iterator"],typeof t=="function"?t:null)}var Ue=Object.assign,Ju;function ho(t){if(Ju===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ju=e&&e[1]||""}return`
`+Ju+t}var Xu=!1;function Zu(t,e){if(!t||Xu)return"";Xu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Xu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ho(t):""}function rT(t){switch(t.tag){case 5:return ho(t.type);case 16:return ho("Lazy");case 13:return ho("Suspense");case 19:return ho("SuspenseList");case 0:case 2:case 15:return t=Zu(t.type,!1),t;case 11:return t=Zu(t.type.render,!1),t;case 1:return t=Zu(t.type,!0),t;default:return""}}function Hd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Hs:return"Fragment";case qs:return"Portal";case $d:return"Profiler";case Ef:return"StrictMode";case zd:return"Suspense";case qd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case sv:return(t.displayName||"Context")+".Consumer";case rv:return(t._context.displayName||"Context")+".Provider";case Tf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case If:return e=t.displayName||null,e!==null?e:Hd(t.type)||"Memo";case Tr:e=t._payload,t=t._init;try{return Hd(t(e))}catch{}}return null}function sT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Hd(e);case 8:return e===Ef?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function qr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ov(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function iT(t){var e=ov(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ol(t){t._valueTracker||(t._valueTracker=iT(t))}function av(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=ov(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ql(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Wd(t,e){var n=e.checked;return Ue({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function cg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=qr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function lv(t,e){e=e.checked,e!=null&&xf(t,"checked",e,!1)}function Gd(t,e){lv(t,e);var n=qr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Kd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Kd(t,e.type,qr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ug(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Kd(t,e,n){(e!=="number"||Ql(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var fo=Array.isArray;function ri(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+qr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Qd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Ue({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function dg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(fo(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:qr(n)}}function cv(t,e){var n=qr(e.value),r=qr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function hg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function uv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Yd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?uv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var al,dv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(al=al||document.createElement("div"),al.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=al.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Uo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Eo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oT=["Webkit","ms","Moz","O"];Object.keys(Eo).forEach(function(t){oT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Eo[e]=Eo[t]})});function hv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Eo.hasOwnProperty(t)&&Eo[t]?(""+e).trim():e+"px"}function fv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=hv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var aT=Ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Jd(t,e){if(e){if(aT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Xd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zd=null;function Sf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var eh=null,si=null,ii=null;function fg(t){if(t=_a(t)){if(typeof eh!="function")throw Error(U(280));var e=t.stateNode;e&&(e=$c(e),eh(t.stateNode,t.type,e))}}function mv(t){si?ii?ii.push(t):ii=[t]:si=t}function pv(){if(si){var t=si,e=ii;if(ii=si=null,fg(t),e)for(t=0;t<e.length;t++)fg(e[t])}}function gv(t,e){return t(e)}function yv(){}var ed=!1;function vv(t,e,n){if(ed)return t(e,n);ed=!0;try{return gv(t,e,n)}finally{ed=!1,(si!==null||ii!==null)&&(yv(),pv())}}function Bo(t,e){var n=t.stateNode;if(n===null)return null;var r=$c(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var th=!1;if(or)try{var ro={};Object.defineProperty(ro,"passive",{get:function(){th=!0}}),window.addEventListener("test",ro,ro),window.removeEventListener("test",ro,ro)}catch{th=!1}function lT(t,e,n,r,s,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var To=!1,Yl=null,Jl=!1,nh=null,cT={onError:function(t){To=!0,Yl=t}};function uT(t,e,n,r,s,i,o,l,c){To=!1,Yl=null,lT.apply(cT,arguments)}function dT(t,e,n,r,s,i,o,l,c){if(uT.apply(this,arguments),To){if(To){var d=Yl;To=!1,Yl=null}else throw Error(U(198));Jl||(Jl=!0,nh=d)}}function Ps(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function _v(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function mg(t){if(Ps(t)!==t)throw Error(U(188))}function hT(t){var e=t.alternate;if(!e){if(e=Ps(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return mg(s),t;if(i===r)return mg(s),e;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function wv(t){return t=hT(t),t!==null?xv(t):null}function xv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=xv(t);if(e!==null)return e;t=t.sibling}return null}var Ev=Yt.unstable_scheduleCallback,pg=Yt.unstable_cancelCallback,fT=Yt.unstable_shouldYield,mT=Yt.unstable_requestPaint,Ge=Yt.unstable_now,pT=Yt.unstable_getCurrentPriorityLevel,Af=Yt.unstable_ImmediatePriority,Tv=Yt.unstable_UserBlockingPriority,Xl=Yt.unstable_NormalPriority,gT=Yt.unstable_LowPriority,Iv=Yt.unstable_IdlePriority,Mc=null,Dn=null;function yT(t){if(Dn&&typeof Dn.onCommitFiberRoot=="function")try{Dn.onCommitFiberRoot(Mc,t,void 0,(t.current.flags&128)===128)}catch{}}var Sn=Math.clz32?Math.clz32:wT,vT=Math.log,_T=Math.LN2;function wT(t){return t>>>=0,t===0?32:31-(vT(t)/_T|0)|0}var ll=64,cl=4194304;function mo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Zl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=mo(l):(i&=o,i!==0&&(r=mo(i)))}else o=n&~s,o!==0?r=mo(o):i!==0&&(r=mo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Sn(e),s=1<<n,r|=t[n],e&=~s;return r}function xT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ET(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Sn(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=xT(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function rh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Sv(){var t=ll;return ll<<=1,!(ll&4194240)&&(ll=64),t}function td(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ya(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Sn(e),t[e]=n}function TT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Sn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Cf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Sn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ee=0;function Av(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Cv,Nf,Nv,kv,Rv,sh=!1,ul=[],br=null,jr=null,Dr=null,$o=new Map,zo=new Map,Sr=[],IT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gg(t,e){switch(t){case"focusin":case"focusout":br=null;break;case"dragenter":case"dragleave":jr=null;break;case"mouseover":case"mouseout":Dr=null;break;case"pointerover":case"pointerout":$o.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":zo.delete(e.pointerId)}}function so(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=_a(e),e!==null&&Nf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function ST(t,e,n,r,s){switch(e){case"focusin":return br=so(br,t,e,n,r,s),!0;case"dragenter":return jr=so(jr,t,e,n,r,s),!0;case"mouseover":return Dr=so(Dr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return $o.set(i,so($o.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,zo.set(i,so(zo.get(i)||null,t,e,n,r,s)),!0}return!1}function Pv(t){var e=ds(t.target);if(e!==null){var n=Ps(e);if(n!==null){if(e=n.tag,e===13){if(e=_v(n),e!==null){t.blockedOn=e,Rv(t.priority,function(){Nv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Pl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ih(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Zd=r,n.target.dispatchEvent(r),Zd=null}else return e=_a(n),e!==null&&Nf(e),t.blockedOn=n,!1;e.shift()}return!0}function yg(t,e,n){Pl(t)&&n.delete(e)}function AT(){sh=!1,br!==null&&Pl(br)&&(br=null),jr!==null&&Pl(jr)&&(jr=null),Dr!==null&&Pl(Dr)&&(Dr=null),$o.forEach(yg),zo.forEach(yg)}function io(t,e){t.blockedOn===e&&(t.blockedOn=null,sh||(sh=!0,Yt.unstable_scheduleCallback(Yt.unstable_NormalPriority,AT)))}function qo(t){function e(s){return io(s,t)}if(0<ul.length){io(ul[0],t);for(var n=1;n<ul.length;n++){var r=ul[n];r.blockedOn===t&&(r.blockedOn=null)}}for(br!==null&&io(br,t),jr!==null&&io(jr,t),Dr!==null&&io(Dr,t),$o.forEach(e),zo.forEach(e),n=0;n<Sr.length;n++)r=Sr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Sr.length&&(n=Sr[0],n.blockedOn===null);)Pv(n),n.blockedOn===null&&Sr.shift()}var oi=mr.ReactCurrentBatchConfig,ec=!0;function CT(t,e,n,r){var s=Ee,i=oi.transition;oi.transition=null;try{Ee=1,kf(t,e,n,r)}finally{Ee=s,oi.transition=i}}function NT(t,e,n,r){var s=Ee,i=oi.transition;oi.transition=null;try{Ee=4,kf(t,e,n,r)}finally{Ee=s,oi.transition=i}}function kf(t,e,n,r){if(ec){var s=ih(t,e,n,r);if(s===null)dd(t,e,r,tc,n),gg(t,r);else if(ST(s,t,e,n,r))r.stopPropagation();else if(gg(t,r),e&4&&-1<IT.indexOf(t)){for(;s!==null;){var i=_a(s);if(i!==null&&Cv(i),i=ih(t,e,n,r),i===null&&dd(t,e,r,tc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else dd(t,e,r,null,n)}}var tc=null;function ih(t,e,n,r){if(tc=null,t=Sf(r),t=ds(t),t!==null)if(e=Ps(t),e===null)t=null;else if(n=e.tag,n===13){if(t=_v(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return tc=t,null}function bv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pT()){case Af:return 1;case Tv:return 4;case Xl:case gT:return 16;case Iv:return 536870912;default:return 16}default:return 16}}var Cr=null,Rf=null,bl=null;function jv(){if(bl)return bl;var t,e=Rf,n=e.length,r,s="value"in Cr?Cr.value:Cr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return bl=s.slice(t,1<r?1-r:void 0)}function jl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function dl(){return!0}function vg(){return!1}function Xt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?dl:vg,this.isPropagationStopped=vg,this}return Ue(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=dl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=dl)},persist:function(){},isPersistent:dl}),e}var Li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pf=Xt(Li),va=Ue({},Li,{view:0,detail:0}),kT=Xt(va),nd,rd,oo,Fc=Ue({},va,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==oo&&(oo&&t.type==="mousemove"?(nd=t.screenX-oo.screenX,rd=t.screenY-oo.screenY):rd=nd=0,oo=t),nd)},movementY:function(t){return"movementY"in t?t.movementY:rd}}),_g=Xt(Fc),RT=Ue({},Fc,{dataTransfer:0}),PT=Xt(RT),bT=Ue({},va,{relatedTarget:0}),sd=Xt(bT),jT=Ue({},Li,{animationName:0,elapsedTime:0,pseudoElement:0}),DT=Xt(jT),LT=Ue({},Li,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),VT=Xt(LT),OT=Ue({},Li,{data:0}),wg=Xt(OT),MT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},UT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function BT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=UT[t])?!!e[t]:!1}function bf(){return BT}var $T=Ue({},va,{key:function(t){if(t.key){var e=MT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=jl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?FT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bf,charCode:function(t){return t.type==="keypress"?jl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?jl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),zT=Xt($T),qT=Ue({},Fc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xg=Xt(qT),HT=Ue({},va,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bf}),WT=Xt(HT),GT=Ue({},Li,{propertyName:0,elapsedTime:0,pseudoElement:0}),KT=Xt(GT),QT=Ue({},Fc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),YT=Xt(QT),JT=[9,13,27,32],jf=or&&"CompositionEvent"in window,Io=null;or&&"documentMode"in document&&(Io=document.documentMode);var XT=or&&"TextEvent"in window&&!Io,Dv=or&&(!jf||Io&&8<Io&&11>=Io),Eg=" ",Tg=!1;function Lv(t,e){switch(t){case"keyup":return JT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ws=!1;function ZT(t,e){switch(t){case"compositionend":return Vv(e);case"keypress":return e.which!==32?null:(Tg=!0,Eg);case"textInput":return t=e.data,t===Eg&&Tg?null:t;default:return null}}function eI(t,e){if(Ws)return t==="compositionend"||!jf&&Lv(t,e)?(t=jv(),bl=Rf=Cr=null,Ws=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Dv&&e.locale!=="ko"?null:e.data;default:return null}}var tI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ig(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!tI[t.type]:e==="textarea"}function Ov(t,e,n,r){mv(r),e=nc(e,"onChange"),0<e.length&&(n=new Pf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var So=null,Ho=null;function nI(t){Kv(t,0)}function Uc(t){var e=Qs(t);if(av(e))return t}function rI(t,e){if(t==="change")return e}var Mv=!1;if(or){var id;if(or){var od="oninput"in document;if(!od){var Sg=document.createElement("div");Sg.setAttribute("oninput","return;"),od=typeof Sg.oninput=="function"}id=od}else id=!1;Mv=id&&(!document.documentMode||9<document.documentMode)}function Ag(){So&&(So.detachEvent("onpropertychange",Fv),Ho=So=null)}function Fv(t){if(t.propertyName==="value"&&Uc(Ho)){var e=[];Ov(e,Ho,t,Sf(t)),vv(nI,e)}}function sI(t,e,n){t==="focusin"?(Ag(),So=e,Ho=n,So.attachEvent("onpropertychange",Fv)):t==="focusout"&&Ag()}function iI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Uc(Ho)}function oI(t,e){if(t==="click")return Uc(e)}function aI(t,e){if(t==="input"||t==="change")return Uc(e)}function lI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Nn=typeof Object.is=="function"?Object.is:lI;function Wo(t,e){if(Nn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Bd.call(e,s)||!Nn(t[s],e[s]))return!1}return!0}function Cg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ng(t,e){var n=Cg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Cg(n)}}function Uv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Uv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Bv(){for(var t=window,e=Ql();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ql(t.document)}return e}function Df(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function cI(t){var e=Bv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Uv(n.ownerDocument.documentElement,n)){if(r!==null&&Df(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Ng(n,i);var o=Ng(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var uI=or&&"documentMode"in document&&11>=document.documentMode,Gs=null,oh=null,Ao=null,ah=!1;function kg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ah||Gs==null||Gs!==Ql(r)||(r=Gs,"selectionStart"in r&&Df(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ao&&Wo(Ao,r)||(Ao=r,r=nc(oh,"onSelect"),0<r.length&&(e=new Pf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Gs)))}function hl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ks={animationend:hl("Animation","AnimationEnd"),animationiteration:hl("Animation","AnimationIteration"),animationstart:hl("Animation","AnimationStart"),transitionend:hl("Transition","TransitionEnd")},ad={},$v={};or&&($v=document.createElement("div").style,"AnimationEvent"in window||(delete Ks.animationend.animation,delete Ks.animationiteration.animation,delete Ks.animationstart.animation),"TransitionEvent"in window||delete Ks.transitionend.transition);function Bc(t){if(ad[t])return ad[t];if(!Ks[t])return t;var e=Ks[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in $v)return ad[t]=e[n];return t}var zv=Bc("animationend"),qv=Bc("animationiteration"),Hv=Bc("animationstart"),Wv=Bc("transitionend"),Gv=new Map,Rg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yr(t,e){Gv.set(t,e),Rs(e,[t])}for(var ld=0;ld<Rg.length;ld++){var cd=Rg[ld],dI=cd.toLowerCase(),hI=cd[0].toUpperCase()+cd.slice(1);Yr(dI,"on"+hI)}Yr(zv,"onAnimationEnd");Yr(qv,"onAnimationIteration");Yr(Hv,"onAnimationStart");Yr("dblclick","onDoubleClick");Yr("focusin","onFocus");Yr("focusout","onBlur");Yr(Wv,"onTransitionEnd");fi("onMouseEnter",["mouseout","mouseover"]);fi("onMouseLeave",["mouseout","mouseover"]);fi("onPointerEnter",["pointerout","pointerover"]);fi("onPointerLeave",["pointerout","pointerover"]);Rs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Rs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Rs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Rs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Rs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Rs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var po="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fI=new Set("cancel close invalid load scroll toggle".split(" ").concat(po));function Pg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,dT(r,e,void 0,t),t.currentTarget=null}function Kv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Pg(s,l,d),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Pg(s,l,d),i=c}}}if(Jl)throw t=nh,Jl=!1,nh=null,t}function Re(t,e){var n=e[hh];n===void 0&&(n=e[hh]=new Set);var r=t+"__bubble";n.has(r)||(Qv(e,t,2,!1),n.add(r))}function ud(t,e,n){var r=0;e&&(r|=4),Qv(n,t,r,e)}var fl="_reactListening"+Math.random().toString(36).slice(2);function Go(t){if(!t[fl]){t[fl]=!0,nv.forEach(function(n){n!=="selectionchange"&&(fI.has(n)||ud(n,!1,t),ud(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[fl]||(e[fl]=!0,ud("selectionchange",!1,e))}}function Qv(t,e,n,r){switch(bv(e)){case 1:var s=CT;break;case 4:s=NT;break;default:s=kf}n=s.bind(null,e,n,t),s=void 0,!th||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function dd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=ds(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}vv(function(){var d=i,f=Sf(n),g=[];e:{var p=Gv.get(t);if(p!==void 0){var x=Pf,S=t;switch(t){case"keypress":if(jl(n)===0)break e;case"keydown":case"keyup":x=zT;break;case"focusin":S="focus",x=sd;break;case"focusout":S="blur",x=sd;break;case"beforeblur":case"afterblur":x=sd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=_g;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=PT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=WT;break;case zv:case qv:case Hv:x=DT;break;case Wv:x=KT;break;case"scroll":x=kT;break;case"wheel":x=YT;break;case"copy":case"cut":case"paste":x=VT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=xg}var C=(e&4)!==0,D=!C&&t==="scroll",T=C?p!==null?p+"Capture":null:p;C=[];for(var E=d,w;E!==null;){w=E;var k=w.stateNode;if(w.tag===5&&k!==null&&(w=k,T!==null&&(k=Bo(E,T),k!=null&&C.push(Ko(E,k,w)))),D)break;E=E.return}0<C.length&&(p=new x(p,S,null,n,f),g.push({event:p,listeners:C}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",p&&n!==Zd&&(S=n.relatedTarget||n.fromElement)&&(ds(S)||S[ar]))break e;if((x||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,x?(S=n.relatedTarget||n.toElement,x=d,S=S?ds(S):null,S!==null&&(D=Ps(S),S!==D||S.tag!==5&&S.tag!==6)&&(S=null)):(x=null,S=d),x!==S)){if(C=_g,k="onMouseLeave",T="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(C=xg,k="onPointerLeave",T="onPointerEnter",E="pointer"),D=x==null?p:Qs(x),w=S==null?p:Qs(S),p=new C(k,E+"leave",x,n,f),p.target=D,p.relatedTarget=w,k=null,ds(f)===d&&(C=new C(T,E+"enter",S,n,f),C.target=w,C.relatedTarget=D,k=C),D=k,x&&S)t:{for(C=x,T=S,E=0,w=C;w;w=Us(w))E++;for(w=0,k=T;k;k=Us(k))w++;for(;0<E-w;)C=Us(C),E--;for(;0<w-E;)T=Us(T),w--;for(;E--;){if(C===T||T!==null&&C===T.alternate)break t;C=Us(C),T=Us(T)}C=null}else C=null;x!==null&&bg(g,p,x,C,!1),S!==null&&D!==null&&bg(g,D,S,C,!0)}}e:{if(p=d?Qs(d):window,x=p.nodeName&&p.nodeName.toLowerCase(),x==="select"||x==="input"&&p.type==="file")var j=rI;else if(Ig(p))if(Mv)j=aI;else{j=iI;var P=sI}else(x=p.nodeName)&&x.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(j=oI);if(j&&(j=j(t,d))){Ov(g,j,n,f);break e}P&&P(t,p,d),t==="focusout"&&(P=p._wrapperState)&&P.controlled&&p.type==="number"&&Kd(p,"number",p.value)}switch(P=d?Qs(d):window,t){case"focusin":(Ig(P)||P.contentEditable==="true")&&(Gs=P,oh=d,Ao=null);break;case"focusout":Ao=oh=Gs=null;break;case"mousedown":ah=!0;break;case"contextmenu":case"mouseup":case"dragend":ah=!1,kg(g,n,f);break;case"selectionchange":if(uI)break;case"keydown":case"keyup":kg(g,n,f)}var _;if(jf)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Ws?Lv(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(Dv&&n.locale!=="ko"&&(Ws||y!=="onCompositionStart"?y==="onCompositionEnd"&&Ws&&(_=jv()):(Cr=f,Rf="value"in Cr?Cr.value:Cr.textContent,Ws=!0)),P=nc(d,y),0<P.length&&(y=new wg(y,t,null,n,f),g.push({event:y,listeners:P}),_?y.data=_:(_=Vv(n),_!==null&&(y.data=_)))),(_=XT?ZT(t,n):eI(t,n))&&(d=nc(d,"onBeforeInput"),0<d.length&&(f=new wg("onBeforeInput","beforeinput",null,n,f),g.push({event:f,listeners:d}),f.data=_))}Kv(g,e)})}function Ko(t,e,n){return{instance:t,listener:e,currentTarget:n}}function nc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Bo(t,n),i!=null&&r.unshift(Ko(t,i,s)),i=Bo(t,e),i!=null&&r.push(Ko(t,i,s))),t=t.return}return r}function Us(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function bg(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,s?(c=Bo(n,i),c!=null&&o.unshift(Ko(n,c,l))):s||(c=Bo(n,i),c!=null&&o.push(Ko(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var mI=/\r\n?/g,pI=/\u0000|\uFFFD/g;function jg(t){return(typeof t=="string"?t:""+t).replace(mI,`
`).replace(pI,"")}function ml(t,e,n){if(e=jg(e),jg(t)!==e&&n)throw Error(U(425))}function rc(){}var lh=null,ch=null;function uh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var dh=typeof setTimeout=="function"?setTimeout:void 0,gI=typeof clearTimeout=="function"?clearTimeout:void 0,Dg=typeof Promise=="function"?Promise:void 0,yI=typeof queueMicrotask=="function"?queueMicrotask:typeof Dg<"u"?function(t){return Dg.resolve(null).then(t).catch(vI)}:dh;function vI(t){setTimeout(function(){throw t})}function hd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),qo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);qo(e)}function Lr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Lg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Vi=Math.random().toString(36).slice(2),bn="__reactFiber$"+Vi,Qo="__reactProps$"+Vi,ar="__reactContainer$"+Vi,hh="__reactEvents$"+Vi,_I="__reactListeners$"+Vi,wI="__reactHandles$"+Vi;function ds(t){var e=t[bn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ar]||n[bn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Lg(t);t!==null;){if(n=t[bn])return n;t=Lg(t)}return e}t=n,n=t.parentNode}return null}function _a(t){return t=t[bn]||t[ar],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Qs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function $c(t){return t[Qo]||null}var fh=[],Ys=-1;function Jr(t){return{current:t}}function be(t){0>Ys||(t.current=fh[Ys],fh[Ys]=null,Ys--)}function Ae(t,e){Ys++,fh[Ys]=t.current,t.current=e}var Hr={},Ct=Jr(Hr),Mt=Jr(!1),vs=Hr;function mi(t,e){var n=t.type.contextTypes;if(!n)return Hr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ft(t){return t=t.childContextTypes,t!=null}function sc(){be(Mt),be(Ct)}function Vg(t,e,n){if(Ct.current!==Hr)throw Error(U(168));Ae(Ct,e),Ae(Mt,n)}function Yv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(U(108,sT(t)||"Unknown",s));return Ue({},n,r)}function ic(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Hr,vs=Ct.current,Ae(Ct,t),Ae(Mt,Mt.current),!0}function Og(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=Yv(t,e,vs),r.__reactInternalMemoizedMergedChildContext=t,be(Mt),be(Ct),Ae(Ct,t)):be(Mt),Ae(Mt,n)}var Gn=null,zc=!1,fd=!1;function Jv(t){Gn===null?Gn=[t]:Gn.push(t)}function xI(t){zc=!0,Jv(t)}function Xr(){if(!fd&&Gn!==null){fd=!0;var t=0,e=Ee;try{var n=Gn;for(Ee=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Gn=null,zc=!1}catch(s){throw Gn!==null&&(Gn=Gn.slice(t+1)),Ev(Af,Xr),s}finally{Ee=e,fd=!1}}return null}var Js=[],Xs=0,oc=null,ac=0,rn=[],sn=0,_s=null,Jn=1,Xn="";function ls(t,e){Js[Xs++]=ac,Js[Xs++]=oc,oc=t,ac=e}function Xv(t,e,n){rn[sn++]=Jn,rn[sn++]=Xn,rn[sn++]=_s,_s=t;var r=Jn;t=Xn;var s=32-Sn(r)-1;r&=~(1<<s),n+=1;var i=32-Sn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Jn=1<<32-Sn(e)+s|n<<s|r,Xn=i+t}else Jn=1<<i|n<<s|r,Xn=t}function Lf(t){t.return!==null&&(ls(t,1),Xv(t,1,0))}function Vf(t){for(;t===oc;)oc=Js[--Xs],Js[Xs]=null,ac=Js[--Xs],Js[Xs]=null;for(;t===_s;)_s=rn[--sn],rn[sn]=null,Xn=rn[--sn],rn[sn]=null,Jn=rn[--sn],rn[sn]=null}var Qt=null,Gt=null,Le=!1,In=null;function Zv(t,e){var n=on(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Mg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Qt=t,Gt=Lr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Qt=t,Gt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=_s!==null?{id:Jn,overflow:Xn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=on(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Qt=t,Gt=null,!0):!1;default:return!1}}function mh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ph(t){if(Le){var e=Gt;if(e){var n=e;if(!Mg(t,e)){if(mh(t))throw Error(U(418));e=Lr(n.nextSibling);var r=Qt;e&&Mg(t,e)?Zv(r,n):(t.flags=t.flags&-4097|2,Le=!1,Qt=t)}}else{if(mh(t))throw Error(U(418));t.flags=t.flags&-4097|2,Le=!1,Qt=t}}}function Fg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qt=t}function pl(t){if(t!==Qt)return!1;if(!Le)return Fg(t),Le=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!uh(t.type,t.memoizedProps)),e&&(e=Gt)){if(mh(t))throw e_(),Error(U(418));for(;e;)Zv(t,e),e=Lr(e.nextSibling)}if(Fg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Gt=Lr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Gt=null}}else Gt=Qt?Lr(t.stateNode.nextSibling):null;return!0}function e_(){for(var t=Gt;t;)t=Lr(t.nextSibling)}function pi(){Gt=Qt=null,Le=!1}function Of(t){In===null?In=[t]:In.push(t)}var EI=mr.ReactCurrentBatchConfig;function ao(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function gl(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ug(t){var e=t._init;return e(t._payload)}function t_(t){function e(T,E){if(t){var w=T.deletions;w===null?(T.deletions=[E],T.flags|=16):w.push(E)}}function n(T,E){if(!t)return null;for(;E!==null;)e(T,E),E=E.sibling;return null}function r(T,E){for(T=new Map;E!==null;)E.key!==null?T.set(E.key,E):T.set(E.index,E),E=E.sibling;return T}function s(T,E){return T=Fr(T,E),T.index=0,T.sibling=null,T}function i(T,E,w){return T.index=w,t?(w=T.alternate,w!==null?(w=w.index,w<E?(T.flags|=2,E):w):(T.flags|=2,E)):(T.flags|=1048576,E)}function o(T){return t&&T.alternate===null&&(T.flags|=2),T}function l(T,E,w,k){return E===null||E.tag!==6?(E=wd(w,T.mode,k),E.return=T,E):(E=s(E,w),E.return=T,E)}function c(T,E,w,k){var j=w.type;return j===Hs?f(T,E,w.props.children,k,w.key):E!==null&&(E.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Tr&&Ug(j)===E.type)?(k=s(E,w.props),k.ref=ao(T,E,w),k.return=T,k):(k=Ul(w.type,w.key,w.props,null,T.mode,k),k.ref=ao(T,E,w),k.return=T,k)}function d(T,E,w,k){return E===null||E.tag!==4||E.stateNode.containerInfo!==w.containerInfo||E.stateNode.implementation!==w.implementation?(E=xd(w,T.mode,k),E.return=T,E):(E=s(E,w.children||[]),E.return=T,E)}function f(T,E,w,k,j){return E===null||E.tag!==7?(E=gs(w,T.mode,k,j),E.return=T,E):(E=s(E,w),E.return=T,E)}function g(T,E,w){if(typeof E=="string"&&E!==""||typeof E=="number")return E=wd(""+E,T.mode,w),E.return=T,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case il:return w=Ul(E.type,E.key,E.props,null,T.mode,w),w.ref=ao(T,null,E),w.return=T,w;case qs:return E=xd(E,T.mode,w),E.return=T,E;case Tr:var k=E._init;return g(T,k(E._payload),w)}if(fo(E)||no(E))return E=gs(E,T.mode,w,null),E.return=T,E;gl(T,E)}return null}function p(T,E,w,k){var j=E!==null?E.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return j!==null?null:l(T,E,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case il:return w.key===j?c(T,E,w,k):null;case qs:return w.key===j?d(T,E,w,k):null;case Tr:return j=w._init,p(T,E,j(w._payload),k)}if(fo(w)||no(w))return j!==null?null:f(T,E,w,k,null);gl(T,w)}return null}function x(T,E,w,k,j){if(typeof k=="string"&&k!==""||typeof k=="number")return T=T.get(w)||null,l(E,T,""+k,j);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case il:return T=T.get(k.key===null?w:k.key)||null,c(E,T,k,j);case qs:return T=T.get(k.key===null?w:k.key)||null,d(E,T,k,j);case Tr:var P=k._init;return x(T,E,w,P(k._payload),j)}if(fo(k)||no(k))return T=T.get(w)||null,f(E,T,k,j,null);gl(E,k)}return null}function S(T,E,w,k){for(var j=null,P=null,_=E,y=E=0,I=null;_!==null&&y<w.length;y++){_.index>y?(I=_,_=null):I=_.sibling;var A=p(T,_,w[y],k);if(A===null){_===null&&(_=I);break}t&&_&&A.alternate===null&&e(T,_),E=i(A,E,y),P===null?j=A:P.sibling=A,P=A,_=I}if(y===w.length)return n(T,_),Le&&ls(T,y),j;if(_===null){for(;y<w.length;y++)_=g(T,w[y],k),_!==null&&(E=i(_,E,y),P===null?j=_:P.sibling=_,P=_);return Le&&ls(T,y),j}for(_=r(T,_);y<w.length;y++)I=x(_,T,y,w[y],k),I!==null&&(t&&I.alternate!==null&&_.delete(I.key===null?y:I.key),E=i(I,E,y),P===null?j=I:P.sibling=I,P=I);return t&&_.forEach(function(R){return e(T,R)}),Le&&ls(T,y),j}function C(T,E,w,k){var j=no(w);if(typeof j!="function")throw Error(U(150));if(w=j.call(w),w==null)throw Error(U(151));for(var P=j=null,_=E,y=E=0,I=null,A=w.next();_!==null&&!A.done;y++,A=w.next()){_.index>y?(I=_,_=null):I=_.sibling;var R=p(T,_,A.value,k);if(R===null){_===null&&(_=I);break}t&&_&&R.alternate===null&&e(T,_),E=i(R,E,y),P===null?j=R:P.sibling=R,P=R,_=I}if(A.done)return n(T,_),Le&&ls(T,y),j;if(_===null){for(;!A.done;y++,A=w.next())A=g(T,A.value,k),A!==null&&(E=i(A,E,y),P===null?j=A:P.sibling=A,P=A);return Le&&ls(T,y),j}for(_=r(T,_);!A.done;y++,A=w.next())A=x(_,T,y,A.value,k),A!==null&&(t&&A.alternate!==null&&_.delete(A.key===null?y:A.key),E=i(A,E,y),P===null?j=A:P.sibling=A,P=A);return t&&_.forEach(function(b){return e(T,b)}),Le&&ls(T,y),j}function D(T,E,w,k){if(typeof w=="object"&&w!==null&&w.type===Hs&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case il:e:{for(var j=w.key,P=E;P!==null;){if(P.key===j){if(j=w.type,j===Hs){if(P.tag===7){n(T,P.sibling),E=s(P,w.props.children),E.return=T,T=E;break e}}else if(P.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Tr&&Ug(j)===P.type){n(T,P.sibling),E=s(P,w.props),E.ref=ao(T,P,w),E.return=T,T=E;break e}n(T,P);break}else e(T,P);P=P.sibling}w.type===Hs?(E=gs(w.props.children,T.mode,k,w.key),E.return=T,T=E):(k=Ul(w.type,w.key,w.props,null,T.mode,k),k.ref=ao(T,E,w),k.return=T,T=k)}return o(T);case qs:e:{for(P=w.key;E!==null;){if(E.key===P)if(E.tag===4&&E.stateNode.containerInfo===w.containerInfo&&E.stateNode.implementation===w.implementation){n(T,E.sibling),E=s(E,w.children||[]),E.return=T,T=E;break e}else{n(T,E);break}else e(T,E);E=E.sibling}E=xd(w,T.mode,k),E.return=T,T=E}return o(T);case Tr:return P=w._init,D(T,E,P(w._payload),k)}if(fo(w))return S(T,E,w,k);if(no(w))return C(T,E,w,k);gl(T,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,E!==null&&E.tag===6?(n(T,E.sibling),E=s(E,w),E.return=T,T=E):(n(T,E),E=wd(w,T.mode,k),E.return=T,T=E),o(T)):n(T,E)}return D}var gi=t_(!0),n_=t_(!1),lc=Jr(null),cc=null,Zs=null,Mf=null;function Ff(){Mf=Zs=cc=null}function Uf(t){var e=lc.current;be(lc),t._currentValue=e}function gh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ai(t,e){cc=t,Mf=Zs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ot=!0),t.firstContext=null)}function un(t){var e=t._currentValue;if(Mf!==t)if(t={context:t,memoizedValue:e,next:null},Zs===null){if(cc===null)throw Error(U(308));Zs=t,cc.dependencies={lanes:0,firstContext:t}}else Zs=Zs.next=t;return e}var hs=null;function Bf(t){hs===null?hs=[t]:hs.push(t)}function r_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Bf(e)):(n.next=s.next,s.next=n),e.interleaved=n,lr(t,r)}function lr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ir=!1;function $f(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function s_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function rr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Vr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,he&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,lr(t,n)}return s=r.interleaved,s===null?(e.next=e,Bf(r)):(e.next=s.next,s.next=e),r.interleaved=e,lr(t,n)}function Dl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Cf(t,n)}}function Bg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function uc(t,e,n,r){var s=t.updateQueue;Ir=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=c))}if(i!==null){var g=s.baseState;o=0,f=d=c=null,l=i;do{var p=l.lane,x=l.eventTime;if((r&p)===p){f!==null&&(f=f.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var S=t,C=l;switch(p=e,x=n,C.tag){case 1:if(S=C.payload,typeof S=="function"){g=S.call(x,g,p);break e}g=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=C.payload,p=typeof S=="function"?S.call(x,g,p):S,p==null)break e;g=Ue({},g,p);break e;case 2:Ir=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else x={eventTime:x,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=x,c=g):f=f.next=x,o|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(f===null&&(c=g),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);xs|=o,t.lanes=o,t.memoizedState=g}}function $g(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var wa={},Ln=Jr(wa),Yo=Jr(wa),Jo=Jr(wa);function fs(t){if(t===wa)throw Error(U(174));return t}function zf(t,e){switch(Ae(Jo,e),Ae(Yo,t),Ae(Ln,wa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Yd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Yd(e,t)}be(Ln),Ae(Ln,e)}function yi(){be(Ln),be(Yo),be(Jo)}function i_(t){fs(Jo.current);var e=fs(Ln.current),n=Yd(e,t.type);e!==n&&(Ae(Yo,t),Ae(Ln,n))}function qf(t){Yo.current===t&&(be(Ln),be(Yo))}var Oe=Jr(0);function dc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var md=[];function Hf(){for(var t=0;t<md.length;t++)md[t]._workInProgressVersionPrimary=null;md.length=0}var Ll=mr.ReactCurrentDispatcher,pd=mr.ReactCurrentBatchConfig,ws=0,Fe=null,tt=null,it=null,hc=!1,Co=!1,Xo=0,TI=0;function wt(){throw Error(U(321))}function Wf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Nn(t[n],e[n]))return!1;return!0}function Gf(t,e,n,r,s,i){if(ws=i,Fe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ll.current=t===null||t.memoizedState===null?CI:NI,t=n(r,s),Co){i=0;do{if(Co=!1,Xo=0,25<=i)throw Error(U(301));i+=1,it=tt=null,e.updateQueue=null,Ll.current=kI,t=n(r,s)}while(Co)}if(Ll.current=fc,e=tt!==null&&tt.next!==null,ws=0,it=tt=Fe=null,hc=!1,e)throw Error(U(300));return t}function Kf(){var t=Xo!==0;return Xo=0,t}function Pn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?Fe.memoizedState=it=t:it=it.next=t,it}function dn(){if(tt===null){var t=Fe.alternate;t=t!==null?t.memoizedState:null}else t=tt.next;var e=it===null?Fe.memoizedState:it.next;if(e!==null)it=e,tt=t;else{if(t===null)throw Error(U(310));tt=t,t={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},it===null?Fe.memoizedState=it=t:it=it.next=t}return it}function Zo(t,e){return typeof e=="function"?e(t):e}function gd(t){var e=dn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=tt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,d=i;do{var f=d.lane;if((ws&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var g={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=g,o=r):c=c.next=g,Fe.lanes|=f,xs|=f}d=d.next}while(d!==null&&d!==i);c===null?o=r:c.next=l,Nn(r,e.memoizedState)||(Ot=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Fe.lanes|=i,xs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function yd(t){var e=dn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Nn(i,e.memoizedState)||(Ot=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function o_(){}function a_(t,e){var n=Fe,r=dn(),s=e(),i=!Nn(r.memoizedState,s);if(i&&(r.memoizedState=s,Ot=!0),r=r.queue,Qf(u_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||it!==null&&it.memoizedState.tag&1){if(n.flags|=2048,ea(9,c_.bind(null,n,r,s,e),void 0,null),at===null)throw Error(U(349));ws&30||l_(n,e,s)}return s}function l_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Fe.updateQueue,e===null?(e={lastEffect:null,stores:null},Fe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function c_(t,e,n,r){e.value=n,e.getSnapshot=r,d_(e)&&h_(t)}function u_(t,e,n){return n(function(){d_(e)&&h_(t)})}function d_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Nn(t,n)}catch{return!0}}function h_(t){var e=lr(t,1);e!==null&&An(e,t,1,-1)}function zg(t){var e=Pn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zo,lastRenderedState:t},e.queue=t,t=t.dispatch=AI.bind(null,Fe,t),[e.memoizedState,t]}function ea(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Fe.updateQueue,e===null?(e={lastEffect:null,stores:null},Fe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function f_(){return dn().memoizedState}function Vl(t,e,n,r){var s=Pn();Fe.flags|=t,s.memoizedState=ea(1|e,n,void 0,r===void 0?null:r)}function qc(t,e,n,r){var s=dn();r=r===void 0?null:r;var i=void 0;if(tt!==null){var o=tt.memoizedState;if(i=o.destroy,r!==null&&Wf(r,o.deps)){s.memoizedState=ea(e,n,i,r);return}}Fe.flags|=t,s.memoizedState=ea(1|e,n,i,r)}function qg(t,e){return Vl(8390656,8,t,e)}function Qf(t,e){return qc(2048,8,t,e)}function m_(t,e){return qc(4,2,t,e)}function p_(t,e){return qc(4,4,t,e)}function g_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function y_(t,e,n){return n=n!=null?n.concat([t]):null,qc(4,4,g_.bind(null,e,t),n)}function Yf(){}function v_(t,e){var n=dn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Wf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function __(t,e){var n=dn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Wf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function w_(t,e,n){return ws&21?(Nn(n,e)||(n=Sv(),Fe.lanes|=n,xs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ot=!0),t.memoizedState=n)}function II(t,e){var n=Ee;Ee=n!==0&&4>n?n:4,t(!0);var r=pd.transition;pd.transition={};try{t(!1),e()}finally{Ee=n,pd.transition=r}}function x_(){return dn().memoizedState}function SI(t,e,n){var r=Mr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},E_(t))T_(e,n);else if(n=r_(t,e,n,r),n!==null){var s=bt();An(n,t,r,s),I_(n,e,r)}}function AI(t,e,n){var r=Mr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(E_(t))T_(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Nn(l,o)){var c=e.interleaved;c===null?(s.next=s,Bf(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=r_(t,e,s,r),n!==null&&(s=bt(),An(n,t,r,s),I_(n,e,r))}}function E_(t){var e=t.alternate;return t===Fe||e!==null&&e===Fe}function T_(t,e){Co=hc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function I_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Cf(t,n)}}var fc={readContext:un,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useInsertionEffect:wt,useLayoutEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useMutableSource:wt,useSyncExternalStore:wt,useId:wt,unstable_isNewReconciler:!1},CI={readContext:un,useCallback:function(t,e){return Pn().memoizedState=[t,e===void 0?null:e],t},useContext:un,useEffect:qg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Vl(4194308,4,g_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Vl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Vl(4,2,t,e)},useMemo:function(t,e){var n=Pn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Pn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=SI.bind(null,Fe,t),[r.memoizedState,t]},useRef:function(t){var e=Pn();return t={current:t},e.memoizedState=t},useState:zg,useDebugValue:Yf,useDeferredValue:function(t){return Pn().memoizedState=t},useTransition:function(){var t=zg(!1),e=t[0];return t=II.bind(null,t[1]),Pn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Fe,s=Pn();if(Le){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),at===null)throw Error(U(349));ws&30||l_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,qg(u_.bind(null,r,i,t),[t]),r.flags|=2048,ea(9,c_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Pn(),e=at.identifierPrefix;if(Le){var n=Xn,r=Jn;n=(r&~(1<<32-Sn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Xo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=TI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},NI={readContext:un,useCallback:v_,useContext:un,useEffect:Qf,useImperativeHandle:y_,useInsertionEffect:m_,useLayoutEffect:p_,useMemo:__,useReducer:gd,useRef:f_,useState:function(){return gd(Zo)},useDebugValue:Yf,useDeferredValue:function(t){var e=dn();return w_(e,tt.memoizedState,t)},useTransition:function(){var t=gd(Zo)[0],e=dn().memoizedState;return[t,e]},useMutableSource:o_,useSyncExternalStore:a_,useId:x_,unstable_isNewReconciler:!1},kI={readContext:un,useCallback:v_,useContext:un,useEffect:Qf,useImperativeHandle:y_,useInsertionEffect:m_,useLayoutEffect:p_,useMemo:__,useReducer:yd,useRef:f_,useState:function(){return yd(Zo)},useDebugValue:Yf,useDeferredValue:function(t){var e=dn();return tt===null?e.memoizedState=t:w_(e,tt.memoizedState,t)},useTransition:function(){var t=yd(Zo)[0],e=dn().memoizedState;return[t,e]},useMutableSource:o_,useSyncExternalStore:a_,useId:x_,unstable_isNewReconciler:!1};function xn(t,e){if(t&&t.defaultProps){e=Ue({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function yh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ue({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Hc={isMounted:function(t){return(t=t._reactInternals)?Ps(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=bt(),s=Mr(t),i=rr(r,s);i.payload=e,n!=null&&(i.callback=n),e=Vr(t,i,s),e!==null&&(An(e,t,s,r),Dl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=bt(),s=Mr(t),i=rr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Vr(t,i,s),e!==null&&(An(e,t,s,r),Dl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=bt(),r=Mr(t),s=rr(n,r);s.tag=2,e!=null&&(s.callback=e),e=Vr(t,s,r),e!==null&&(An(e,t,r,n),Dl(e,t,r))}};function Hg(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Wo(n,r)||!Wo(s,i):!0}function S_(t,e,n){var r=!1,s=Hr,i=e.contextType;return typeof i=="object"&&i!==null?i=un(i):(s=Ft(e)?vs:Ct.current,r=e.contextTypes,i=(r=r!=null)?mi(t,s):Hr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Hc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Wg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Hc.enqueueReplaceState(e,e.state,null)}function vh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},$f(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=un(i):(i=Ft(e)?vs:Ct.current,s.context=mi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(yh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Hc.enqueueReplaceState(s,s.state,null),uc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function vi(t,e){try{var n="",r=e;do n+=rT(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function vd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function _h(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var RI=typeof WeakMap=="function"?WeakMap:Map;function A_(t,e,n){n=rr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){pc||(pc=!0,kh=r),_h(t,e)},n}function C_(t,e,n){n=rr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){_h(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){_h(t,e),typeof r!="function"&&(Or===null?Or=new Set([this]):Or.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Gg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new RI;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=qI.bind(null,t,e,n),e.then(t,t))}function Kg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Qg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=rr(-1,1),e.tag=2,Vr(n,e,1))),n.lanes|=1),t)}var PI=mr.ReactCurrentOwner,Ot=!1;function Rt(t,e,n,r){e.child=t===null?n_(e,null,n,r):gi(e,t.child,n,r)}function Yg(t,e,n,r,s){n=n.render;var i=e.ref;return ai(e,s),r=Gf(t,e,n,r,i,s),n=Kf(),t!==null&&!Ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,cr(t,e,s)):(Le&&n&&Lf(e),e.flags|=1,Rt(t,e,r,s),e.child)}function Jg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!sm(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,N_(t,e,i,r,s)):(t=Ul(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Wo,n(o,r)&&t.ref===e.ref)return cr(t,e,s)}return e.flags|=1,t=Fr(i,r),t.ref=e.ref,t.return=e,e.child=t}function N_(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Wo(i,r)&&t.ref===e.ref)if(Ot=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ot=!0);else return e.lanes=t.lanes,cr(t,e,s)}return wh(t,e,n,r,s)}function k_(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(ti,Ht),Ht|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ae(ti,Ht),Ht|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ae(ti,Ht),Ht|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ae(ti,Ht),Ht|=r;return Rt(t,e,s,n),e.child}function R_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function wh(t,e,n,r,s){var i=Ft(n)?vs:Ct.current;return i=mi(e,i),ai(e,s),n=Gf(t,e,n,r,i,s),r=Kf(),t!==null&&!Ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,cr(t,e,s)):(Le&&r&&Lf(e),e.flags|=1,Rt(t,e,n,s),e.child)}function Xg(t,e,n,r,s){if(Ft(n)){var i=!0;ic(e)}else i=!1;if(ai(e,s),e.stateNode===null)Ol(t,e),S_(e,n,r),vh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=un(d):(d=Ft(n)?vs:Ct.current,d=mi(e,d));var f=n.getDerivedStateFromProps,g=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==d)&&Wg(e,o,r,d),Ir=!1;var p=e.memoizedState;o.state=p,uc(e,r,o,s),c=e.memoizedState,l!==r||p!==c||Mt.current||Ir?(typeof f=="function"&&(yh(e,n,f,r),c=e.memoizedState),(l=Ir||Hg(e,n,l,r,p,c,d))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,s_(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:xn(e.type,l),o.props=d,g=e.pendingProps,p=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=un(c):(c=Ft(n)?vs:Ct.current,c=mi(e,c));var x=n.getDerivedStateFromProps;(f=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==g||p!==c)&&Wg(e,o,r,c),Ir=!1,p=e.memoizedState,o.state=p,uc(e,r,o,s);var S=e.memoizedState;l!==g||p!==S||Mt.current||Ir?(typeof x=="function"&&(yh(e,n,x,r),S=e.memoizedState),(d=Ir||Hg(e,n,d,r,p,S,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,S,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,S,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=S),o.props=r,o.state=S,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return xh(t,e,n,r,i,s)}function xh(t,e,n,r,s,i){R_(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Og(e,n,!1),cr(t,e,i);r=e.stateNode,PI.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=gi(e,t.child,null,i),e.child=gi(e,null,l,i)):Rt(t,e,l,i),e.memoizedState=r.state,s&&Og(e,n,!0),e.child}function P_(t){var e=t.stateNode;e.pendingContext?Vg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Vg(t,e.context,!1),zf(t,e.containerInfo)}function Zg(t,e,n,r,s){return pi(),Of(s),e.flags|=256,Rt(t,e,n,r),e.child}var Eh={dehydrated:null,treeContext:null,retryLane:0};function Th(t){return{baseLanes:t,cachePool:null,transitions:null}}function b_(t,e,n){var r=e.pendingProps,s=Oe.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ae(Oe,s&1),t===null)return ph(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Kc(o,r,0,null),t=gs(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Th(n),e.memoizedState=Eh,t):Jf(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return bI(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Fr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Fr(l,i):(i=gs(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Th(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Eh,r}return i=t.child,t=i.sibling,r=Fr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Jf(t,e){return e=Kc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function yl(t,e,n,r){return r!==null&&Of(r),gi(e,t.child,null,n),t=Jf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function bI(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=vd(Error(U(422))),yl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Kc({mode:"visible",children:r.children},s,0,null),i=gs(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&gi(e,t.child,null,o),e.child.memoizedState=Th(o),e.memoizedState=Eh,i);if(!(e.mode&1))return yl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(U(419)),r=vd(i,r,void 0),yl(t,e,o,r)}if(l=(o&t.childLanes)!==0,Ot||l){if(r=at,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,lr(t,s),An(r,t,s,-1))}return rm(),r=vd(Error(U(421))),yl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=HI.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Gt=Lr(s.nextSibling),Qt=e,Le=!0,In=null,t!==null&&(rn[sn++]=Jn,rn[sn++]=Xn,rn[sn++]=_s,Jn=t.id,Xn=t.overflow,_s=e),e=Jf(e,r.children),e.flags|=4096,e)}function ey(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),gh(t.return,e,n)}function _d(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function j_(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Rt(t,e,r.children,n),r=Oe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ey(t,n,e);else if(t.tag===19)ey(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ae(Oe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&dc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),_d(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&dc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}_d(e,!0,n,null,i);break;case"together":_d(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ol(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function cr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),xs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Fr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Fr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function jI(t,e,n){switch(e.tag){case 3:P_(e),pi();break;case 5:i_(e);break;case 1:Ft(e.type)&&ic(e);break;case 4:zf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ae(lc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ae(Oe,Oe.current&1),e.flags|=128,null):n&e.child.childLanes?b_(t,e,n):(Ae(Oe,Oe.current&1),t=cr(t,e,n),t!==null?t.sibling:null);Ae(Oe,Oe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return j_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ae(Oe,Oe.current),r)break;return null;case 22:case 23:return e.lanes=0,k_(t,e,n)}return cr(t,e,n)}var D_,Ih,L_,V_;D_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ih=function(){};L_=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,fs(Ln.current);var i=null;switch(n){case"input":s=Wd(t,s),r=Wd(t,r),i=[];break;case"select":s=Ue({},s,{value:void 0}),r=Ue({},r,{value:void 0}),i=[];break;case"textarea":s=Qd(t,s),r=Qd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=rc)}Jd(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Fo.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Fo.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Re("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};V_=function(t,e,n,r){n!==r&&(e.flags|=4)};function lo(t,e){if(!Le)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function xt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function DI(t,e,n){var r=e.pendingProps;switch(Vf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(e),null;case 1:return Ft(e.type)&&sc(),xt(e),null;case 3:return r=e.stateNode,yi(),be(Mt),be(Ct),Hf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(pl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,In!==null&&(bh(In),In=null))),Ih(t,e),xt(e),null;case 5:qf(e);var s=fs(Jo.current);if(n=e.type,t!==null&&e.stateNode!=null)L_(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return xt(e),null}if(t=fs(Ln.current),pl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[bn]=e,r[Qo]=i,t=(e.mode&1)!==0,n){case"dialog":Re("cancel",r),Re("close",r);break;case"iframe":case"object":case"embed":Re("load",r);break;case"video":case"audio":for(s=0;s<po.length;s++)Re(po[s],r);break;case"source":Re("error",r);break;case"img":case"image":case"link":Re("error",r),Re("load",r);break;case"details":Re("toggle",r);break;case"input":cg(r,i),Re("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Re("invalid",r);break;case"textarea":dg(r,i),Re("invalid",r)}Jd(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&ml(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ml(r.textContent,l,t),s=["children",""+l]):Fo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Re("scroll",r)}switch(n){case"input":ol(r),ug(r,i,!0);break;case"textarea":ol(r),hg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=rc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=uv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[bn]=e,t[Qo]=r,D_(t,e,!1,!1),e.stateNode=t;e:{switch(o=Xd(n,r),n){case"dialog":Re("cancel",t),Re("close",t),s=r;break;case"iframe":case"object":case"embed":Re("load",t),s=r;break;case"video":case"audio":for(s=0;s<po.length;s++)Re(po[s],t);s=r;break;case"source":Re("error",t),s=r;break;case"img":case"image":case"link":Re("error",t),Re("load",t),s=r;break;case"details":Re("toggle",t),s=r;break;case"input":cg(t,r),s=Wd(t,r),Re("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ue({},r,{value:void 0}),Re("invalid",t);break;case"textarea":dg(t,r),s=Qd(t,r),Re("invalid",t);break;default:s=r}Jd(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?fv(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&dv(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Uo(t,c):typeof c=="number"&&Uo(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Fo.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Re("scroll",t):c!=null&&xf(t,i,c,o))}switch(n){case"input":ol(t),ug(t,r,!1);break;case"textarea":ol(t),hg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+qr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ri(t,!!r.multiple,i,!1):r.defaultValue!=null&&ri(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=rc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return xt(e),null;case 6:if(t&&e.stateNode!=null)V_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=fs(Jo.current),fs(Ln.current),pl(e)){if(r=e.stateNode,n=e.memoizedProps,r[bn]=e,(i=r.nodeValue!==n)&&(t=Qt,t!==null))switch(t.tag){case 3:ml(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ml(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[bn]=e,e.stateNode=r}return xt(e),null;case 13:if(be(Oe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Le&&Gt!==null&&e.mode&1&&!(e.flags&128))e_(),pi(),e.flags|=98560,i=!1;else if(i=pl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[bn]=e}else pi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xt(e),i=!1}else In!==null&&(bh(In),In=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Oe.current&1?nt===0&&(nt=3):rm())),e.updateQueue!==null&&(e.flags|=4),xt(e),null);case 4:return yi(),Ih(t,e),t===null&&Go(e.stateNode.containerInfo),xt(e),null;case 10:return Uf(e.type._context),xt(e),null;case 17:return Ft(e.type)&&sc(),xt(e),null;case 19:if(be(Oe),i=e.memoizedState,i===null)return xt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)lo(i,!1);else{if(nt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=dc(t),o!==null){for(e.flags|=128,lo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ae(Oe,Oe.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ge()>_i&&(e.flags|=128,r=!0,lo(i,!1),e.lanes=4194304)}else{if(!r)if(t=dc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),lo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Le)return xt(e),null}else 2*Ge()-i.renderingStartTime>_i&&n!==1073741824&&(e.flags|=128,r=!0,lo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ge(),e.sibling=null,n=Oe.current,Ae(Oe,r?n&1|2:n&1),e):(xt(e),null);case 22:case 23:return nm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ht&1073741824&&(xt(e),e.subtreeFlags&6&&(e.flags|=8192)):xt(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function LI(t,e){switch(Vf(e),e.tag){case 1:return Ft(e.type)&&sc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return yi(),be(Mt),be(Ct),Hf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return qf(e),null;case 13:if(be(Oe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));pi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return be(Oe),null;case 4:return yi(),null;case 10:return Uf(e.type._context),null;case 22:case 23:return nm(),null;case 24:return null;default:return null}}var vl=!1,It=!1,VI=typeof WeakSet=="function"?WeakSet:Set,W=null;function ei(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){qe(t,e,r)}else n.current=null}function Sh(t,e,n){try{n()}catch(r){qe(t,e,r)}}var ty=!1;function OI(t,e){if(lh=ec,t=Bv(),Df(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,f=0,g=t,p=null;t:for(;;){for(var x;g!==n||s!==0&&g.nodeType!==3||(l=o+s),g!==i||r!==0&&g.nodeType!==3||(c=o+r),g.nodeType===3&&(o+=g.nodeValue.length),(x=g.firstChild)!==null;)p=g,g=x;for(;;){if(g===t)break t;if(p===n&&++d===s&&(l=o),p===i&&++f===r&&(c=o),(x=g.nextSibling)!==null)break;g=p,p=g.parentNode}g=x}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ch={focusedElem:t,selectionRange:n},ec=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var C=S.memoizedProps,D=S.memoizedState,T=e.stateNode,E=T.getSnapshotBeforeUpdate(e.elementType===e.type?C:xn(e.type,C),D);T.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(k){qe(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return S=ty,ty=!1,S}function No(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Sh(e,n,i)}s=s.next}while(s!==r)}}function Wc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ah(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function O_(t){var e=t.alternate;e!==null&&(t.alternate=null,O_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[bn],delete e[Qo],delete e[hh],delete e[_I],delete e[wI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function M_(t){return t.tag===5||t.tag===3||t.tag===4}function ny(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||M_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ch(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=rc));else if(r!==4&&(t=t.child,t!==null))for(Ch(t,e,n),t=t.sibling;t!==null;)Ch(t,e,n),t=t.sibling}function Nh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Nh(t,e,n),t=t.sibling;t!==null;)Nh(t,e,n),t=t.sibling}var dt=null,Tn=!1;function xr(t,e,n){for(n=n.child;n!==null;)F_(t,e,n),n=n.sibling}function F_(t,e,n){if(Dn&&typeof Dn.onCommitFiberUnmount=="function")try{Dn.onCommitFiberUnmount(Mc,n)}catch{}switch(n.tag){case 5:It||ei(n,e);case 6:var r=dt,s=Tn;dt=null,xr(t,e,n),dt=r,Tn=s,dt!==null&&(Tn?(t=dt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):dt.removeChild(n.stateNode));break;case 18:dt!==null&&(Tn?(t=dt,n=n.stateNode,t.nodeType===8?hd(t.parentNode,n):t.nodeType===1&&hd(t,n),qo(t)):hd(dt,n.stateNode));break;case 4:r=dt,s=Tn,dt=n.stateNode.containerInfo,Tn=!0,xr(t,e,n),dt=r,Tn=s;break;case 0:case 11:case 14:case 15:if(!It&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Sh(n,e,o),s=s.next}while(s!==r)}xr(t,e,n);break;case 1:if(!It&&(ei(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){qe(n,e,l)}xr(t,e,n);break;case 21:xr(t,e,n);break;case 22:n.mode&1?(It=(r=It)||n.memoizedState!==null,xr(t,e,n),It=r):xr(t,e,n);break;default:xr(t,e,n)}}function ry(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new VI),e.forEach(function(r){var s=WI.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function _n(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:dt=l.stateNode,Tn=!1;break e;case 3:dt=l.stateNode.containerInfo,Tn=!0;break e;case 4:dt=l.stateNode.containerInfo,Tn=!0;break e}l=l.return}if(dt===null)throw Error(U(160));F_(i,o,s),dt=null,Tn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){qe(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)U_(e,t),e=e.sibling}function U_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(_n(e,t),Rn(t),r&4){try{No(3,t,t.return),Wc(3,t)}catch(C){qe(t,t.return,C)}try{No(5,t,t.return)}catch(C){qe(t,t.return,C)}}break;case 1:_n(e,t),Rn(t),r&512&&n!==null&&ei(n,n.return);break;case 5:if(_n(e,t),Rn(t),r&512&&n!==null&&ei(n,n.return),t.flags&32){var s=t.stateNode;try{Uo(s,"")}catch(C){qe(t,t.return,C)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&lv(s,i),Xd(l,o);var d=Xd(l,i);for(o=0;o<c.length;o+=2){var f=c[o],g=c[o+1];f==="style"?fv(s,g):f==="dangerouslySetInnerHTML"?dv(s,g):f==="children"?Uo(s,g):xf(s,f,g,d)}switch(l){case"input":Gd(s,i);break;case"textarea":cv(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?ri(s,!!i.multiple,x,!1):p!==!!i.multiple&&(i.defaultValue!=null?ri(s,!!i.multiple,i.defaultValue,!0):ri(s,!!i.multiple,i.multiple?[]:"",!1))}s[Qo]=i}catch(C){qe(t,t.return,C)}}break;case 6:if(_n(e,t),Rn(t),r&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(C){qe(t,t.return,C)}}break;case 3:if(_n(e,t),Rn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{qo(e.containerInfo)}catch(C){qe(t,t.return,C)}break;case 4:_n(e,t),Rn(t);break;case 13:_n(e,t),Rn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(em=Ge())),r&4&&ry(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(It=(d=It)||f,_n(e,t),It=d):_n(e,t),Rn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(W=t,f=t.child;f!==null;){for(g=W=f;W!==null;){switch(p=W,x=p.child,p.tag){case 0:case 11:case 14:case 15:No(4,p,p.return);break;case 1:ei(p,p.return);var S=p.stateNode;if(typeof S.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(C){qe(r,n,C)}}break;case 5:ei(p,p.return);break;case 22:if(p.memoizedState!==null){iy(g);continue}}x!==null?(x.return=p,W=x):iy(g)}f=f.sibling}e:for(f=null,g=t;;){if(g.tag===5){if(f===null){f=g;try{s=g.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=g.stateNode,c=g.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=hv("display",o))}catch(C){qe(t,t.return,C)}}}else if(g.tag===6){if(f===null)try{g.stateNode.nodeValue=d?"":g.memoizedProps}catch(C){qe(t,t.return,C)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;f===g&&(f=null),g=g.return}f===g&&(f=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:_n(e,t),Rn(t),r&4&&ry(t);break;case 21:break;default:_n(e,t),Rn(t)}}function Rn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(M_(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Uo(s,""),r.flags&=-33);var i=ny(t);Nh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=ny(t);Ch(t,l,o);break;default:throw Error(U(161))}}catch(c){qe(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function MI(t,e,n){W=t,B_(t)}function B_(t,e,n){for(var r=(t.mode&1)!==0;W!==null;){var s=W,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||vl;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||It;l=vl;var d=It;if(vl=o,(It=c)&&!d)for(W=s;W!==null;)o=W,c=o.child,o.tag===22&&o.memoizedState!==null?oy(s):c!==null?(c.return=o,W=c):oy(s);for(;i!==null;)W=i,B_(i),i=i.sibling;W=s,vl=l,It=d}sy(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,W=i):sy(t)}}function sy(t){for(;W!==null;){var e=W;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:It||Wc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!It)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:xn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&$g(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}$g(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var g=f.dehydrated;g!==null&&qo(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}It||e.flags&512&&Ah(e)}catch(p){qe(e,e.return,p)}}if(e===t){W=null;break}if(n=e.sibling,n!==null){n.return=e.return,W=n;break}W=e.return}}function iy(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var n=e.sibling;if(n!==null){n.return=e.return,W=n;break}W=e.return}}function oy(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Wc(4,e)}catch(c){qe(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){qe(e,s,c)}}var i=e.return;try{Ah(e)}catch(c){qe(e,i,c)}break;case 5:var o=e.return;try{Ah(e)}catch(c){qe(e,o,c)}}}catch(c){qe(e,e.return,c)}if(e===t){W=null;break}var l=e.sibling;if(l!==null){l.return=e.return,W=l;break}W=e.return}}var FI=Math.ceil,mc=mr.ReactCurrentDispatcher,Xf=mr.ReactCurrentOwner,ln=mr.ReactCurrentBatchConfig,he=0,at=null,Qe=null,ft=0,Ht=0,ti=Jr(0),nt=0,ta=null,xs=0,Gc=0,Zf=0,ko=null,Lt=null,em=0,_i=1/0,Wn=null,pc=!1,kh=null,Or=null,_l=!1,Nr=null,gc=0,Ro=0,Rh=null,Ml=-1,Fl=0;function bt(){return he&6?Ge():Ml!==-1?Ml:Ml=Ge()}function Mr(t){return t.mode&1?he&2&&ft!==0?ft&-ft:EI.transition!==null?(Fl===0&&(Fl=Sv()),Fl):(t=Ee,t!==0||(t=window.event,t=t===void 0?16:bv(t.type)),t):1}function An(t,e,n,r){if(50<Ro)throw Ro=0,Rh=null,Error(U(185));ya(t,n,r),(!(he&2)||t!==at)&&(t===at&&(!(he&2)&&(Gc|=n),nt===4&&Ar(t,ft)),Ut(t,r),n===1&&he===0&&!(e.mode&1)&&(_i=Ge()+500,zc&&Xr()))}function Ut(t,e){var n=t.callbackNode;ET(t,e);var r=Zl(t,t===at?ft:0);if(r===0)n!==null&&pg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&pg(n),e===1)t.tag===0?xI(ay.bind(null,t)):Jv(ay.bind(null,t)),yI(function(){!(he&6)&&Xr()}),n=null;else{switch(Av(r)){case 1:n=Af;break;case 4:n=Tv;break;case 16:n=Xl;break;case 536870912:n=Iv;break;default:n=Xl}n=Q_(n,$_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function $_(t,e){if(Ml=-1,Fl=0,he&6)throw Error(U(327));var n=t.callbackNode;if(li()&&t.callbackNode!==n)return null;var r=Zl(t,t===at?ft:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=yc(t,r);else{e=r;var s=he;he|=2;var i=q_();(at!==t||ft!==e)&&(Wn=null,_i=Ge()+500,ps(t,e));do try{$I();break}catch(l){z_(t,l)}while(!0);Ff(),mc.current=i,he=s,Qe!==null?e=0:(at=null,ft=0,e=nt)}if(e!==0){if(e===2&&(s=rh(t),s!==0&&(r=s,e=Ph(t,s))),e===1)throw n=ta,ps(t,0),Ar(t,r),Ut(t,Ge()),n;if(e===6)Ar(t,r);else{if(s=t.current.alternate,!(r&30)&&!UI(s)&&(e=yc(t,r),e===2&&(i=rh(t),i!==0&&(r=i,e=Ph(t,i))),e===1))throw n=ta,ps(t,0),Ar(t,r),Ut(t,Ge()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:cs(t,Lt,Wn);break;case 3:if(Ar(t,r),(r&130023424)===r&&(e=em+500-Ge(),10<e)){if(Zl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){bt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=dh(cs.bind(null,t,Lt,Wn),e);break}cs(t,Lt,Wn);break;case 4:if(Ar(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Sn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ge()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*FI(r/1960))-r,10<r){t.timeoutHandle=dh(cs.bind(null,t,Lt,Wn),r);break}cs(t,Lt,Wn);break;case 5:cs(t,Lt,Wn);break;default:throw Error(U(329))}}}return Ut(t,Ge()),t.callbackNode===n?$_.bind(null,t):null}function Ph(t,e){var n=ko;return t.current.memoizedState.isDehydrated&&(ps(t,e).flags|=256),t=yc(t,e),t!==2&&(e=Lt,Lt=n,e!==null&&bh(e)),t}function bh(t){Lt===null?Lt=t:Lt.push.apply(Lt,t)}function UI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Nn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ar(t,e){for(e&=~Zf,e&=~Gc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Sn(e),r=1<<n;t[n]=-1,e&=~r}}function ay(t){if(he&6)throw Error(U(327));li();var e=Zl(t,0);if(!(e&1))return Ut(t,Ge()),null;var n=yc(t,e);if(t.tag!==0&&n===2){var r=rh(t);r!==0&&(e=r,n=Ph(t,r))}if(n===1)throw n=ta,ps(t,0),Ar(t,e),Ut(t,Ge()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,cs(t,Lt,Wn),Ut(t,Ge()),null}function tm(t,e){var n=he;he|=1;try{return t(e)}finally{he=n,he===0&&(_i=Ge()+500,zc&&Xr())}}function Es(t){Nr!==null&&Nr.tag===0&&!(he&6)&&li();var e=he;he|=1;var n=ln.transition,r=Ee;try{if(ln.transition=null,Ee=1,t)return t()}finally{Ee=r,ln.transition=n,he=e,!(he&6)&&Xr()}}function nm(){Ht=ti.current,be(ti)}function ps(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,gI(n)),Qe!==null)for(n=Qe.return;n!==null;){var r=n;switch(Vf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&sc();break;case 3:yi(),be(Mt),be(Ct),Hf();break;case 5:qf(r);break;case 4:yi();break;case 13:be(Oe);break;case 19:be(Oe);break;case 10:Uf(r.type._context);break;case 22:case 23:nm()}n=n.return}if(at=t,Qe=t=Fr(t.current,null),ft=Ht=e,nt=0,ta=null,Zf=Gc=xs=0,Lt=ko=null,hs!==null){for(e=0;e<hs.length;e++)if(n=hs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}hs=null}return t}function z_(t,e){do{var n=Qe;try{if(Ff(),Ll.current=fc,hc){for(var r=Fe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}hc=!1}if(ws=0,it=tt=Fe=null,Co=!1,Xo=0,Xf.current=null,n===null||n.return===null){nt=1,ta=e,Qe=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=ft,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=l,g=f.tag;if(!(f.mode&1)&&(g===0||g===11||g===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var x=Kg(o);if(x!==null){x.flags&=-257,Qg(x,o,l,i,e),x.mode&1&&Gg(i,d,e),e=x,c=d;var S=e.updateQueue;if(S===null){var C=new Set;C.add(c),e.updateQueue=C}else S.add(c);break e}else{if(!(e&1)){Gg(i,d,e),rm();break e}c=Error(U(426))}}else if(Le&&l.mode&1){var D=Kg(o);if(D!==null){!(D.flags&65536)&&(D.flags|=256),Qg(D,o,l,i,e),Of(vi(c,l));break e}}i=c=vi(c,l),nt!==4&&(nt=2),ko===null?ko=[i]:ko.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var T=A_(i,c,e);Bg(i,T);break e;case 1:l=c;var E=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof E.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Or===null||!Or.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var k=C_(i,l,e);Bg(i,k);break e}}i=i.return}while(i!==null)}W_(n)}catch(j){e=j,Qe===n&&n!==null&&(Qe=n=n.return);continue}break}while(!0)}function q_(){var t=mc.current;return mc.current=fc,t===null?fc:t}function rm(){(nt===0||nt===3||nt===2)&&(nt=4),at===null||!(xs&268435455)&&!(Gc&268435455)||Ar(at,ft)}function yc(t,e){var n=he;he|=2;var r=q_();(at!==t||ft!==e)&&(Wn=null,ps(t,e));do try{BI();break}catch(s){z_(t,s)}while(!0);if(Ff(),he=n,mc.current=r,Qe!==null)throw Error(U(261));return at=null,ft=0,nt}function BI(){for(;Qe!==null;)H_(Qe)}function $I(){for(;Qe!==null&&!fT();)H_(Qe)}function H_(t){var e=K_(t.alternate,t,Ht);t.memoizedProps=t.pendingProps,e===null?W_(t):Qe=e,Xf.current=null}function W_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=LI(n,e),n!==null){n.flags&=32767,Qe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{nt=6,Qe=null;return}}else if(n=DI(n,e,Ht),n!==null){Qe=n;return}if(e=e.sibling,e!==null){Qe=e;return}Qe=e=t}while(e!==null);nt===0&&(nt=5)}function cs(t,e,n){var r=Ee,s=ln.transition;try{ln.transition=null,Ee=1,zI(t,e,n,r)}finally{ln.transition=s,Ee=r}return null}function zI(t,e,n,r){do li();while(Nr!==null);if(he&6)throw Error(U(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(TT(t,i),t===at&&(Qe=at=null,ft=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||_l||(_l=!0,Q_(Xl,function(){return li(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ln.transition,ln.transition=null;var o=Ee;Ee=1;var l=he;he|=4,Xf.current=null,OI(t,n),U_(n,t),cI(ch),ec=!!lh,ch=lh=null,t.current=n,MI(n),mT(),he=l,Ee=o,ln.transition=i}else t.current=n;if(_l&&(_l=!1,Nr=t,gc=s),i=t.pendingLanes,i===0&&(Or=null),yT(n.stateNode),Ut(t,Ge()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(pc)throw pc=!1,t=kh,kh=null,t;return gc&1&&t.tag!==0&&li(),i=t.pendingLanes,i&1?t===Rh?Ro++:(Ro=0,Rh=t):Ro=0,Xr(),null}function li(){if(Nr!==null){var t=Av(gc),e=ln.transition,n=Ee;try{if(ln.transition=null,Ee=16>t?16:t,Nr===null)var r=!1;else{if(t=Nr,Nr=null,gc=0,he&6)throw Error(U(331));var s=he;for(he|=4,W=t.current;W!==null;){var i=W,o=i.child;if(W.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(W=d;W!==null;){var f=W;switch(f.tag){case 0:case 11:case 15:No(8,f,i)}var g=f.child;if(g!==null)g.return=f,W=g;else for(;W!==null;){f=W;var p=f.sibling,x=f.return;if(O_(f),f===d){W=null;break}if(p!==null){p.return=x,W=p;break}W=x}}}var S=i.alternate;if(S!==null){var C=S.child;if(C!==null){S.child=null;do{var D=C.sibling;C.sibling=null,C=D}while(C!==null)}}W=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,W=o;else e:for(;W!==null;){if(i=W,i.flags&2048)switch(i.tag){case 0:case 11:case 15:No(9,i,i.return)}var T=i.sibling;if(T!==null){T.return=i.return,W=T;break e}W=i.return}}var E=t.current;for(W=E;W!==null;){o=W;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,W=w;else e:for(o=E;W!==null;){if(l=W,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Wc(9,l)}}catch(j){qe(l,l.return,j)}if(l===o){W=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,W=k;break e}W=l.return}}if(he=s,Xr(),Dn&&typeof Dn.onPostCommitFiberRoot=="function")try{Dn.onPostCommitFiberRoot(Mc,t)}catch{}r=!0}return r}finally{Ee=n,ln.transition=e}}return!1}function ly(t,e,n){e=vi(n,e),e=A_(t,e,1),t=Vr(t,e,1),e=bt(),t!==null&&(ya(t,1,e),Ut(t,e))}function qe(t,e,n){if(t.tag===3)ly(t,t,n);else for(;e!==null;){if(e.tag===3){ly(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Or===null||!Or.has(r))){t=vi(n,t),t=C_(e,t,1),e=Vr(e,t,1),t=bt(),e!==null&&(ya(e,1,t),Ut(e,t));break}}e=e.return}}function qI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=bt(),t.pingedLanes|=t.suspendedLanes&n,at===t&&(ft&n)===n&&(nt===4||nt===3&&(ft&130023424)===ft&&500>Ge()-em?ps(t,0):Zf|=n),Ut(t,e)}function G_(t,e){e===0&&(t.mode&1?(e=cl,cl<<=1,!(cl&130023424)&&(cl=4194304)):e=1);var n=bt();t=lr(t,e),t!==null&&(ya(t,e,n),Ut(t,n))}function HI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),G_(t,n)}function WI(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),G_(t,n)}var K_;K_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Mt.current)Ot=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ot=!1,jI(t,e,n);Ot=!!(t.flags&131072)}else Ot=!1,Le&&e.flags&1048576&&Xv(e,ac,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ol(t,e),t=e.pendingProps;var s=mi(e,Ct.current);ai(e,n),s=Gf(null,e,r,t,s,n);var i=Kf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ft(r)?(i=!0,ic(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,$f(e),s.updater=Hc,e.stateNode=s,s._reactInternals=e,vh(e,r,t,n),e=xh(null,e,r,!0,i,n)):(e.tag=0,Le&&i&&Lf(e),Rt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ol(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=KI(r),t=xn(r,t),s){case 0:e=wh(null,e,r,t,n);break e;case 1:e=Xg(null,e,r,t,n);break e;case 11:e=Yg(null,e,r,t,n);break e;case 14:e=Jg(null,e,r,xn(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:xn(r,s),wh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:xn(r,s),Xg(t,e,r,s,n);case 3:e:{if(P_(e),t===null)throw Error(U(387));r=e.pendingProps,i=e.memoizedState,s=i.element,s_(t,e),uc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=vi(Error(U(423)),e),e=Zg(t,e,r,n,s);break e}else if(r!==s){s=vi(Error(U(424)),e),e=Zg(t,e,r,n,s);break e}else for(Gt=Lr(e.stateNode.containerInfo.firstChild),Qt=e,Le=!0,In=null,n=n_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(pi(),r===s){e=cr(t,e,n);break e}Rt(t,e,r,n)}e=e.child}return e;case 5:return i_(e),t===null&&ph(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,uh(r,s)?o=null:i!==null&&uh(r,i)&&(e.flags|=32),R_(t,e),Rt(t,e,o,n),e.child;case 6:return t===null&&ph(e),null;case 13:return b_(t,e,n);case 4:return zf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=gi(e,null,r,n):Rt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:xn(r,s),Yg(t,e,r,s,n);case 7:return Rt(t,e,e.pendingProps,n),e.child;case 8:return Rt(t,e,e.pendingProps.children,n),e.child;case 12:return Rt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ae(lc,r._currentValue),r._currentValue=o,i!==null)if(Nn(i.value,o)){if(i.children===s.children&&!Mt.current){e=cr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=rr(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),gh(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(U(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),gh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Rt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ai(e,n),s=un(s),r=r(s),e.flags|=1,Rt(t,e,r,n),e.child;case 14:return r=e.type,s=xn(r,e.pendingProps),s=xn(r.type,s),Jg(t,e,r,s,n);case 15:return N_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:xn(r,s),Ol(t,e),e.tag=1,Ft(r)?(t=!0,ic(e)):t=!1,ai(e,n),S_(e,r,s),vh(e,r,s,n),xh(null,e,r,!0,t,n);case 19:return j_(t,e,n);case 22:return k_(t,e,n)}throw Error(U(156,e.tag))};function Q_(t,e){return Ev(t,e)}function GI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function on(t,e,n,r){return new GI(t,e,n,r)}function sm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function KI(t){if(typeof t=="function")return sm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Tf)return 11;if(t===If)return 14}return 2}function Fr(t,e){var n=t.alternate;return n===null?(n=on(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ul(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")sm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Hs:return gs(n.children,s,i,e);case Ef:o=8,s|=8;break;case $d:return t=on(12,n,e,s|2),t.elementType=$d,t.lanes=i,t;case zd:return t=on(13,n,e,s),t.elementType=zd,t.lanes=i,t;case qd:return t=on(19,n,e,s),t.elementType=qd,t.lanes=i,t;case iv:return Kc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case rv:o=10;break e;case sv:o=9;break e;case Tf:o=11;break e;case If:o=14;break e;case Tr:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=on(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function gs(t,e,n,r){return t=on(7,t,r,e),t.lanes=n,t}function Kc(t,e,n,r){return t=on(22,t,r,e),t.elementType=iv,t.lanes=n,t.stateNode={isHidden:!1},t}function wd(t,e,n){return t=on(6,t,null,e),t.lanes=n,t}function xd(t,e,n){return e=on(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function QI(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=td(0),this.expirationTimes=td(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=td(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function im(t,e,n,r,s,i,o,l,c){return t=new QI(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=on(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},$f(i),t}function YI(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Y_(t){if(!t)return Hr;t=t._reactInternals;e:{if(Ps(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ft(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Ft(n))return Yv(t,n,e)}return e}function J_(t,e,n,r,s,i,o,l,c){return t=im(n,r,!0,t,s,i,o,l,c),t.context=Y_(null),n=t.current,r=bt(),s=Mr(n),i=rr(r,s),i.callback=e??null,Vr(n,i,s),t.current.lanes=s,ya(t,s,r),Ut(t,r),t}function Qc(t,e,n,r){var s=e.current,i=bt(),o=Mr(s);return n=Y_(n),e.context===null?e.context=n:e.pendingContext=n,e=rr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Vr(s,e,o),t!==null&&(An(t,s,o,i),Dl(t,s,o)),o}function vc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function cy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function om(t,e){cy(t,e),(t=t.alternate)&&cy(t,e)}function JI(){return null}var X_=typeof reportError=="function"?reportError:function(t){console.error(t)};function am(t){this._internalRoot=t}Yc.prototype.render=am.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Qc(t,e,null,null)};Yc.prototype.unmount=am.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Es(function(){Qc(null,t,null,null)}),e[ar]=null}};function Yc(t){this._internalRoot=t}Yc.prototype.unstable_scheduleHydration=function(t){if(t){var e=kv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Sr.length&&e!==0&&e<Sr[n].priority;n++);Sr.splice(n,0,t),n===0&&Pv(t)}};function lm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Jc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function uy(){}function XI(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=vc(o);i.call(d)}}var o=J_(e,r,t,0,null,!1,!1,"",uy);return t._reactRootContainer=o,t[ar]=o.current,Go(t.nodeType===8?t.parentNode:t),Es(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=vc(c);l.call(d)}}var c=im(t,0,!1,null,null,!1,!1,"",uy);return t._reactRootContainer=c,t[ar]=c.current,Go(t.nodeType===8?t.parentNode:t),Es(function(){Qc(e,c,n,r)}),c}function Xc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=vc(o);l.call(c)}}Qc(e,o,t,s)}else o=XI(n,e,t,s,r);return vc(o)}Cv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=mo(e.pendingLanes);n!==0&&(Cf(e,n|1),Ut(e,Ge()),!(he&6)&&(_i=Ge()+500,Xr()))}break;case 13:Es(function(){var r=lr(t,1);if(r!==null){var s=bt();An(r,t,1,s)}}),om(t,1)}};Nf=function(t){if(t.tag===13){var e=lr(t,134217728);if(e!==null){var n=bt();An(e,t,134217728,n)}om(t,134217728)}};Nv=function(t){if(t.tag===13){var e=Mr(t),n=lr(t,e);if(n!==null){var r=bt();An(n,t,e,r)}om(t,e)}};kv=function(){return Ee};Rv=function(t,e){var n=Ee;try{return Ee=t,e()}finally{Ee=n}};eh=function(t,e,n){switch(e){case"input":if(Gd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=$c(r);if(!s)throw Error(U(90));av(r),Gd(r,s)}}}break;case"textarea":cv(t,n);break;case"select":e=n.value,e!=null&&ri(t,!!n.multiple,e,!1)}};gv=tm;yv=Es;var ZI={usingClientEntryPoint:!1,Events:[_a,Qs,$c,mv,pv,tm]},co={findFiberByHostInstance:ds,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eS={bundleType:co.bundleType,version:co.version,rendererPackageName:co.rendererPackageName,rendererConfig:co.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:mr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=wv(t),t===null?null:t.stateNode},findFiberByHostInstance:co.findFiberByHostInstance||JI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{Mc=wl.inject(eS),Dn=wl}catch{}}Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZI;Jt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lm(e))throw Error(U(200));return YI(t,e,null,n)};Jt.createRoot=function(t,e){if(!lm(t))throw Error(U(299));var n=!1,r="",s=X_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=im(t,1,!1,null,null,n,!1,r,s),t[ar]=e.current,Go(t.nodeType===8?t.parentNode:t),new am(e)};Jt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=wv(e),t=t===null?null:t.stateNode,t};Jt.flushSync=function(t){return Es(t)};Jt.hydrate=function(t,e,n){if(!Jc(e))throw Error(U(200));return Xc(null,t,e,!0,n)};Jt.hydrateRoot=function(t,e,n){if(!lm(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=X_;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=J_(e,null,t,1,n??null,s,!1,i,o),t[ar]=e.current,Go(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Yc(e)};Jt.render=function(t,e,n){if(!Jc(e))throw Error(U(200));return Xc(null,t,e,!1,n)};Jt.unmountComponentAtNode=function(t){if(!Jc(t))throw Error(U(40));return t._reactRootContainer?(Es(function(){Xc(null,null,t,!1,function(){t._reactRootContainer=null,t[ar]=null})}),!0):!1};Jt.unstable_batchedUpdates=tm;Jt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Jc(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Xc(t,e,n,!1,r)};Jt.version="18.3.1-next-f1338f8080-20240426";function Z_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Z_)}catch(t){console.error(t)}}Z_(),Z0.exports=Jt;var tS=Z0.exports,ew,dy=tS;ew=dy.createRoot,dy.hydrateRoot;const nS="modulepreload",rS=function(t){return"/"+t},hy={},Po=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=rS(c),c in hy)return;hy[c]=!0;const d=c.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":nS,d||(g.as="script"),g.crossOrigin="",g.href=c,l&&g.setAttribute("nonce",l),document.head.appendChild(g),d)return new Promise((p,x)=>{g.addEventListener("load",p),g.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};var fy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},sS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},nw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,f=i>>2,g=(i&3)<<4|l>>4;let p=(l&15)<<2|d>>6,x=d&63;c||(x=64,o||(p=64)),r.push(n[f],n[g],n[p],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(tw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):sS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const g=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||g==null)throw new iS;const p=i<<2|l>>4;if(r.push(p),d!==64){const x=l<<4&240|d>>2;if(r.push(x),g!==64){const S=d<<6&192|g;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class iS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const oS=function(t){const e=tw(t);return nw.encodeByteArray(e,!0)},_c=function(t){return oS(t).replace(/\./g,"")},rw=function(t){try{return nw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS=()=>aS().__FIREBASE_DEFAULTS__,cS=()=>{if(typeof process>"u"||typeof fy>"u")return;const t=fy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},uS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&rw(t[1]);return e&&JSON.parse(e)},Zc=()=>{try{return lS()||cS()||uS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},sw=t=>{var e,n;return(n=(e=Zc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},dS=t=>{const e=sw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},iw=()=>{var t;return(t=Zc())===null||t===void 0?void 0:t.config},ow=t=>{var e;return(e=Zc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[_c(JSON.stringify(n)),_c(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Nt())}function pS(){var t;const e=(t=Zc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function vS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _S(){const t=Nt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function wS(){return!pS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xS(){try{return typeof indexedDB=="object"}catch{return!1}}function ES(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS="FirebaseError";class pr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=TS,Object.setPrototypeOf(this,pr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xa.prototype.create)}}class xa{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?IS(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new pr(s,l,r)}}function IS(t,e){return t.replace(SS,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const SS=/\{\$([^}]+)}/g;function AS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function wc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(my(i)&&my(o)){if(!wc(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function my(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ea(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function go(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function yo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function CS(t,e){const n=new NS(t,e);return n.subscribe.bind(n)}class NS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");kS(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Ed),s.error===void 0&&(s.error=Ed),s.complete===void 0&&(s.complete=Ed);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kS(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ed(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(t){return t&&t._delegate?t._delegate:t}class Ts{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new hS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bS(e))try{this.getOrInitializeService({instanceIdentifier:us})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=us){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=us){return this.instances.has(e)}getOptions(e=us){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:PS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=us){return this.component?this.component.multipleInstances?e:us:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function PS(t){return t===us?void 0:t}function bS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new RS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ce||(ce={}));const DS={debug:ce.DEBUG,verbose:ce.VERBOSE,info:ce.INFO,warn:ce.WARN,error:ce.ERROR,silent:ce.SILENT},LS=ce.INFO,VS={[ce.DEBUG]:"log",[ce.VERBOSE]:"log",[ce.INFO]:"info",[ce.WARN]:"warn",[ce.ERROR]:"error"},OS=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=VS[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cm{constructor(e){this.name=e,this._logLevel=LS,this._logHandler=OS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?DS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ce.DEBUG,...e),this._logHandler(this,ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ce.VERBOSE,...e),this._logHandler(this,ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ce.INFO,...e),this._logHandler(this,ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ce.WARN,...e),this._logHandler(this,ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ce.ERROR,...e),this._logHandler(this,ce.ERROR,...e)}}const MS=(t,e)=>e.some(n=>t instanceof n);let py,gy;function FS(){return py||(py=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function US(){return gy||(gy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const aw=new WeakMap,jh=new WeakMap,lw=new WeakMap,Td=new WeakMap,um=new WeakMap;function BS(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ur(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&aw.set(n,t)}).catch(()=>{}),um.set(e,t),e}function $S(t){if(jh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});jh.set(t,e)}let Dh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return jh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||lw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ur(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function zS(t){Dh=t(Dh)}function qS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Id(this),e,...n);return lw.set(r,e.sort?e.sort():[e]),Ur(r)}:US().includes(t)?function(...e){return t.apply(Id(this),e),Ur(aw.get(this))}:function(...e){return Ur(t.apply(Id(this),e))}}function HS(t){return typeof t=="function"?qS(t):(t instanceof IDBTransaction&&$S(t),MS(t,FS())?new Proxy(t,Dh):t)}function Ur(t){if(t instanceof IDBRequest)return BS(t);if(Td.has(t))return Td.get(t);const e=HS(t);return e!==t&&(Td.set(t,e),um.set(e,t)),e}const Id=t=>um.get(t);function WS(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Ur(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Ur(o.result),c.oldVersion,c.newVersion,Ur(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const GS=["get","getKey","getAll","getAllKeys","count"],KS=["put","add","delete","clear"],Sd=new Map;function yy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Sd.get(e))return Sd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=KS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||GS.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&c.done]))[0]};return Sd.set(e,i),i}zS(t=>({...t,get:(e,n,r)=>yy(e,n)||t.get(e,n,r),has:(e,n)=>!!yy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(YS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function YS(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Lh="@firebase/app",vy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur=new cm("@firebase/app"),JS="@firebase/app-compat",XS="@firebase/analytics-compat",ZS="@firebase/analytics",e2="@firebase/app-check-compat",t2="@firebase/app-check",n2="@firebase/auth",r2="@firebase/auth-compat",s2="@firebase/database",i2="@firebase/data-connect",o2="@firebase/database-compat",a2="@firebase/functions",l2="@firebase/functions-compat",c2="@firebase/installations",u2="@firebase/installations-compat",d2="@firebase/messaging",h2="@firebase/messaging-compat",f2="@firebase/performance",m2="@firebase/performance-compat",p2="@firebase/remote-config",g2="@firebase/remote-config-compat",y2="@firebase/storage",v2="@firebase/storage-compat",_2="@firebase/firestore",w2="@firebase/vertexai-preview",x2="@firebase/firestore-compat",E2="firebase",T2="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vh="[DEFAULT]",I2={[Lh]:"fire-core",[JS]:"fire-core-compat",[ZS]:"fire-analytics",[XS]:"fire-analytics-compat",[t2]:"fire-app-check",[e2]:"fire-app-check-compat",[n2]:"fire-auth",[r2]:"fire-auth-compat",[s2]:"fire-rtdb",[i2]:"fire-data-connect",[o2]:"fire-rtdb-compat",[a2]:"fire-fn",[l2]:"fire-fn-compat",[c2]:"fire-iid",[u2]:"fire-iid-compat",[d2]:"fire-fcm",[h2]:"fire-fcm-compat",[f2]:"fire-perf",[m2]:"fire-perf-compat",[p2]:"fire-rc",[g2]:"fire-rc-compat",[y2]:"fire-gcs",[v2]:"fire-gcs-compat",[_2]:"fire-fst",[x2]:"fire-fst-compat",[w2]:"fire-vertex","fire-js":"fire-js",[E2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc=new Map,S2=new Map,Oh=new Map;function _y(t,e){try{t.container.addComponent(e)}catch(n){ur.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function wi(t){const e=t.name;if(Oh.has(e))return ur.debug(`There were multiple attempts to register component ${e}.`),!1;Oh.set(e,t);for(const n of xc.values())_y(n,t);for(const n of S2.values())_y(n,t);return!0}function dm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function an(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Br=new xa("app","Firebase",A2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ts("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Br.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi=T2;function cw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Vh,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Br.create("bad-app-name",{appName:String(s)});if(n||(n=iw()),!n)throw Br.create("no-options");const i=xc.get(s);if(i){if(wc(n,i.options)&&wc(r,i.config))return i;throw Br.create("duplicate-app",{appName:s})}const o=new jS(s);for(const c of Oh.values())o.addComponent(c);const l=new C2(n,r,o);return xc.set(s,l),l}function uw(t=Vh){const e=xc.get(t);if(!e&&t===Vh&&iw())return cw();if(!e)throw Br.create("no-app",{appName:t});return e}function $r(t,e,n){var r;let s=(r=I2[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ur.warn(l.join(" "));return}wi(new Ts(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2="firebase-heartbeat-database",k2=1,na="firebase-heartbeat-store";let Ad=null;function dw(){return Ad||(Ad=WS(N2,k2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(na)}catch(n){console.warn(n)}}}}).catch(t=>{throw Br.create("idb-open",{originalErrorMessage:t.message})})),Ad}async function R2(t){try{const n=(await dw()).transaction(na),r=await n.objectStore(na).get(hw(t));return await n.done,r}catch(e){if(e instanceof pr)ur.warn(e.message);else{const n=Br.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ur.warn(n.message)}}}async function wy(t,e){try{const r=(await dw()).transaction(na,"readwrite");await r.objectStore(na).put(e,hw(t)),await r.done}catch(n){if(n instanceof pr)ur.warn(n.message);else{const r=Br.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ur.warn(r.message)}}}function hw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2=1024,b2=30*24*60*60*1e3;class j2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new L2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=xy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=b2}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ur.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=xy(),{heartbeatsToSend:r,unsentEntries:s}=D2(this._heartbeatsCache.heartbeats),i=_c(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return ur.warn(n),""}}}function xy(){return new Date().toISOString().substring(0,10)}function D2(t,e=P2){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Ey(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Ey(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class L2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xS()?ES().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await R2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return wy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return wy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Ey(t){return _c(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V2(t){wi(new Ts("platform-logger",e=>new QS(e),"PRIVATE")),wi(new Ts("heartbeat",e=>new j2(e),"PRIVATE")),$r(Lh,vy,t),$r(Lh,vy,"esm2017"),$r("fire-js","")}V2("");var O2="firebase",M2="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$r(O2,M2,"app");function hm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function fw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const mw=fw,pw=new xa("auth","Firebase",fw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ec=new cm("@firebase/auth");function F2(t,...e){Ec.logLevel<=ce.WARN&&Ec.warn(`Auth (${Oi}): ${t}`,...e)}function Bl(t,...e){Ec.logLevel<=ce.ERROR&&Ec.error(`Auth (${Oi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(t,...e){throw pm(t,...e)}function Cn(t,...e){return pm(t,...e)}function fm(t,e,n){const r=Object.assign(Object.assign({},mw()),{[e]:n});return new xa("auth","Firebase",r).create(e,{appName:t.name})}function Vn(t){return fm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mm(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&hn(t,"argument-error"),fm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function pm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return pw.create(t,...e)}function Q(t,e,...n){if(!t)throw pm(e,...n)}function Zn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Bl(e),new Error(e)}function dr(t,e){t||Zn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function U2(){return Ty()==="http:"||Ty()==="https:"}function Ty(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(U2()||yS()||"connection"in navigator)?navigator.onLine:!0}function $2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,n){this.shortDelay=e,this.longDelay=n,dr(n>e,"Short delay should be less than long delay!"),this.isMobile=mS()||vS()}get(){return B2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(t,e){dr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2=new Ta(3e4,6e4);function Zr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function es(t,e,n,r,s={}){return yw(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=Ea(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:c},i);return gS()||(d.referrerPolicy="no-referrer"),gw.fetch()(vw(t,t.config.apiHost,n,l),d)})}async function yw(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},z2),e);try{const s=new W2(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw xl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw xl(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw xl(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw xl(t,"user-disabled",o);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw fm(t,f,d);hn(t,f)}}catch(s){if(s instanceof pr)throw s;hn(t,"network-request-failed",{message:String(s)})}}async function Ia(t,e,n,r,s={}){const i=await es(t,e,n,r,s);return"mfaPendingCredential"in i&&hn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function vw(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?gm(t.config,s):`${t.config.apiScheme}://${s}`}function H2(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class W2{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Cn(this.auth,"network-request-failed")),q2.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function xl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Cn(t,e,r);return s.customData._tokenResponse=n,s}function Iy(t){return t!==void 0&&t.enterprise!==void 0}class G2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return H2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function K2(t,e){return es(t,"GET","/v2/recaptchaConfig",Zr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q2(t,e){return es(t,"POST","/v1/accounts:delete",e)}async function _w(t,e){return es(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ww(t,e=!1){const n=lt(t),r=await n.getIdToken(e),s=ym(r);Q(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:bo(Cd(s.auth_time)),issuedAtTime:bo(Cd(s.iat)),expirationTime:bo(Cd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Cd(t){return Number(t)*1e3}function ym(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Bl("JWT malformed, contained fewer than 3 sections"),null;try{const s=rw(n);return s?JSON.parse(s):(Bl("Failed to decode base64 JWT payload"),null)}catch(s){return Bl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Sy(t){const e=ym(t);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ra(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof pr&&Y2(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Y2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=bo(this.lastLoginAt),this.creationTime=bo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tc(t){var e;const n=t.auth,r=await t.getIdToken(),s=await ra(t,_w(n,{idToken:r}));Q(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Ew(i.providerUserInfo):[],l=X2(t.providerData,o),c=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),f=c?d:!1,g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Fh(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,g)}async function xw(t){const e=lt(t);await Tc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function X2(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Ew(t){return t.map(e=>{var{providerId:n}=e,r=hm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z2(t,e){const n=await yw(t,{},async()=>{const r=Ea({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=vw(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",gw.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function eA(t,e){return es(t,"POST","/v2/accounts:revokeToken",Zr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Sy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Q(e.length!==0,"internal-error");const n=Sy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await Z2(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ci;return r&&(Q(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Q(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Q(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ci,this.toJSON())}_performRefresh(){return Zn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(t,e){Q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class er{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=hm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new J2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Fh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ra(this,this.stsTokenManager.getToken(this.auth,e));return Q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return ww(this,e)}reload(){return xw(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new er(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Tc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(an(this.auth.app))return Promise.reject(Vn(this.auth));const e=await this.getIdToken();return await ra(this,Q2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,c,d,f;const g=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,x=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,S=(o=n.photoURL)!==null&&o!==void 0?o:void 0,C=(l=n.tenantId)!==null&&l!==void 0?l:void 0,D=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,T=(d=n.createdAt)!==null&&d!==void 0?d:void 0,E=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:w,emailVerified:k,isAnonymous:j,providerData:P,stsTokenManager:_}=n;Q(w&&_,e,"internal-error");const y=ci.fromJSON(this.name,_);Q(typeof w=="string",e,"internal-error"),Er(g,e.name),Er(p,e.name),Q(typeof k=="boolean",e,"internal-error"),Q(typeof j=="boolean",e,"internal-error"),Er(x,e.name),Er(S,e.name),Er(C,e.name),Er(D,e.name),Er(T,e.name),Er(E,e.name);const I=new er({uid:w,auth:e,email:p,emailVerified:k,displayName:g,isAnonymous:j,photoURL:S,phoneNumber:x,tenantId:C,stsTokenManager:y,createdAt:T,lastLoginAt:E});return P&&Array.isArray(P)&&(I.providerData=P.map(A=>Object.assign({},A))),D&&(I._redirectEventId=D),I}static async _fromIdTokenResponse(e,n,r=!1){const s=new ci;s.updateFromServerResponse(n);const i=new er({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Tc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Q(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Ew(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new ci;l.updateFromIdToken(r);const c=new er({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Fh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay=new Map;function tr(t){dr(t instanceof Function,"Expected a class definition");let e=Ay.get(t);return e?(dr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Ay.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Tw.type="NONE";const Uh=Tw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $l(t,e,n){return`firebase:${t}:${e}:${n}`}class ui{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=$l(this.userKey,s.apiKey,i),this.fullPersistenceKey=$l("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?er._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ui(tr(Uh),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||tr(Uh);const o=$l(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const f=await d._get(o);if(f){const g=er._fromJSON(e,f);d!==i&&(l=g),i=d;break}}catch{}const c=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new ui(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new ui(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Cw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Iw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kw(e))return"Blackberry";if(Rw(e))return"Webos";if(Sw(e))return"Safari";if((e.includes("chrome/")||Aw(e))&&!e.includes("edge/"))return"Chrome";if(Nw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Iw(t=Nt()){return/firefox\//i.test(t)}function Sw(t=Nt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Aw(t=Nt()){return/crios\//i.test(t)}function Cw(t=Nt()){return/iemobile/i.test(t)}function Nw(t=Nt()){return/android/i.test(t)}function kw(t=Nt()){return/blackberry/i.test(t)}function Rw(t=Nt()){return/webos/i.test(t)}function vm(t=Nt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function tA(t=Nt()){var e;return vm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function nA(){return _S()&&document.documentMode===10}function Pw(t=Nt()){return vm(t)||Nw(t)||Rw(t)||kw(t)||/windows phone/i.test(t)||Cw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(t,e=[]){let n;switch(t){case"Browser":n=Cy(Nt());break;case"Worker":n=`${Cy(Nt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Oi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sA(t,e={}){return es(t,"GET","/v2/passwordPolicy",Zr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA=6;class oA{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:iA,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ny(this),this.idTokenSubscription=new Ny(this),this.beforeStateQueue=new rA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=tr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await ui.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await _w(this,{idToken:e}),r=await er._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(an(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Tc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(an(this.app))return Promise.reject(Vn(this));const n=e?lt(e):null;return n&&Q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return an(this.app)?Promise.reject(Vn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return an(this.app)?Promise.reject(Vn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(tr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sA(this),n=new oA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new xa("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await eA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&tr(e)||this._popupRedirectResolver;Q(n,this,"argument-error"),this.redirectPersistenceManager=await ui.create(this,[tr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=bw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&F2(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function $n(t){return lt(t)}class Ny{constructor(e){this.auth=e,this.observer=null,this.addObserver=CS(n=>this.observer=n)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lA(t){eu=t}function jw(t){return eu.loadJS(t)}function cA(){return eu.recaptchaEnterpriseScript}function uA(){return eu.gapiScript}function dA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const hA="recaptcha-enterprise",fA="NO_RECAPTCHA";class mA{constructor(e){this.type=hA,this.auth=$n(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{K2(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new G2(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(c=>{l(c)})})}function s(i,o,l){const c=window.grecaptcha;Iy(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(fA)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&Iy(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=cA();c.length!==0&&(c+=l),jw(c).then(()=>{s(l,i,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function ky(t,e,n,r=!1){const s=new mA(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Bh(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await ky(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await ky(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dw(t,e){const n=dm(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(wc(i,e??{}))return s;hn(s,"already-initialized")}return n.initialize({options:e})}function pA(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(tr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Lw(t,e,n){const r=$n(t);Q(r._canInitEmulator,r,"emulator-config-failed"),Q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Vw(e),{host:o,port:l}=gA(e),c=l===null?"":`:${l}`;r.config.emulator={url:`${i}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),yA()}function Vw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function gA(t){const e=Vw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Ry(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Ry(o)}}}function Ry(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function yA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Zn("not implemented")}_getIdTokenResponse(e){return Zn("not implemented")}_linkToIdToken(e,n){return Zn("not implemented")}_getReauthenticationResolver(e){return Zn("not implemented")}}async function vA(t,e){return es(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _A(t,e){return Ia(t,"POST","/v1/accounts:signInWithPassword",Zr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wA(t,e){return Ia(t,"POST","/v1/accounts:signInWithEmailLink",Zr(t,e))}async function xA(t,e){return Ia(t,"POST","/v1/accounts:signInWithEmailLink",Zr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi extends tu{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new xi(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new xi(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bh(e,n,"signInWithPassword",_A);case"emailLink":return wA(e,{email:this._email,oobCode:this._password});default:hn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bh(e,r,"signUpPassword",vA);case"emailLink":return xA(e,{idToken:n,email:this._email,oobCode:this._password});default:hn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function di(t,e){return Ia(t,"POST","/v1/accounts:signInWithIdp",Zr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA="http://localhost";class Wr extends tu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Wr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):hn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=hm(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Wr(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return di(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,di(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,di(e,n)}buildRequest(){const e={requestUri:EA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ea(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function IA(t){const e=go(yo(t)).link,n=e?go(yo(e)).deep_link_id:null,r=go(yo(t)).deep_link_id;return(r?go(yo(r)).link:null)||r||n||e||t}class nu{constructor(e){var n,r,s,i,o,l;const c=go(yo(e)),d=(n=c.apiKey)!==null&&n!==void 0?n:null,f=(r=c.oobCode)!==null&&r!==void 0?r:null,g=TA((s=c.mode)!==null&&s!==void 0?s:null);Q(d&&f&&g,"argument-error"),this.apiKey=d,this.operation=g,this.code=f,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=IA(e);try{return new nu(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(){this.providerId=bs.PROVIDER_ID}static credential(e,n){return xi._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=nu.parseLink(n);return Q(r,"argument-error"),xi._fromEmailAndCode(e,r.code,r.tenantId)}}bs.PROVIDER_ID="password";bs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";bs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa extends Sa{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn extends Aa{constructor(){super("facebook.com")}static credential(e){return Wr._fromParams({providerId:Kn.PROVIDER_ID,signInMethod:Kn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Kn.credentialFromTaggedObject(e)}static credentialFromError(e){return Kn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Kn.credential(e.oauthAccessToken)}catch{return null}}}Kn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Kn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn extends Aa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Wr._fromParams({providerId:jn.PROVIDER_ID,signInMethod:jn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return jn.credentialFromTaggedObject(e)}static credentialFromError(e){return jn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return jn.credential(n,r)}catch{return null}}}jn.GOOGLE_SIGN_IN_METHOD="google.com";jn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn extends Aa{constructor(){super("github.com")}static credential(e){return Wr._fromParams({providerId:Qn.PROVIDER_ID,signInMethod:Qn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qn.credentialFromTaggedObject(e)}static credentialFromError(e){return Qn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qn.credential(e.oauthAccessToken)}catch{return null}}}Qn.GITHUB_SIGN_IN_METHOD="github.com";Qn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn extends Aa{constructor(){super("twitter.com")}static credential(e,n){return Wr._fromParams({providerId:Yn.PROVIDER_ID,signInMethod:Yn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Yn.credentialFromTaggedObject(e)}static credentialFromError(e){return Yn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Yn.credential(n,r)}catch{return null}}}Yn.TWITTER_SIGN_IN_METHOD="twitter.com";Yn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SA(t,e){return Ia(t,"POST","/v1/accounts:signUp",Zr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await er._fromIdTokenResponse(e,r,s),o=Py(r);return new Is({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Py(r);return new Is({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Py(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic extends pr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ic.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Ic(e,n,r,s)}}function Ow(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Ic._fromErrorAndOperation(t,i,e,r):i})}async function AA(t,e,n=!1){const r=await ra(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Is._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CA(t,e,n=!1){const{auth:r}=t;if(an(r.app))return Promise.reject(Vn(r));const s="reauthenticate";try{const i=await ra(t,Ow(r,s,e,t),n);Q(i.idToken,r,"internal-error");const o=ym(i.idToken);Q(o,r,"internal-error");const{sub:l}=o;return Q(t.uid===l,r,"user-mismatch"),Is._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&hn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mw(t,e,n=!1){if(an(t.app))return Promise.reject(Vn(t));const r="signIn",s=await Ow(t,r,e),i=await Is._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function Fw(t,e){return Mw($n(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uw(t){const e=$n(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function _m(t,e,n){if(an(t.app))return Promise.reject(Vn(t));const r=$n(t),o=await Bh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",SA).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&Uw(t),c}),l=await Is._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function Bw(t,e,n){return an(t.app)?Promise.reject(Vn(t)):Fw(lt(t),bs.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Uw(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w(t,e){return lt(t).setPersistence(e)}function zw(t,e,n,r){return lt(t).onIdTokenChanged(e,n,r)}function qw(t,e,n){return lt(t).beforeAuthStateChanged(e,n)}const Sc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Sc,"1"),this.storage.removeItem(Sc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA=1e3,kA=10;class Ww extends Hw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Pw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);nA()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,kA):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},NA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ww.type="LOCAL";const wm=Ww;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw extends Hw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Gw.type="SESSION";const xm=Gw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new ru(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async d=>d(n.origin,i)),c=await RA(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ru.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const d=Em("",20);s.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(g){const p=g;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(p.data.response);break;default:clearTimeout(f),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(){return window}function bA(t){On().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(){return typeof On().WorkerGlobalScope<"u"&&typeof On().importScripts=="function"}async function jA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function DA(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function LA(){return Kw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw="firebaseLocalStorageDb",VA=1,Ac="firebaseLocalStorage",Yw="fbase_key";class Ca{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function su(t,e){return t.transaction([Ac],e?"readwrite":"readonly").objectStore(Ac)}function OA(){const t=indexedDB.deleteDatabase(Qw);return new Ca(t).toPromise()}function $h(){const t=indexedDB.open(Qw,VA);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ac,{keyPath:Yw})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ac)?e(r):(r.close(),await OA(),e(await $h()))})})}async function by(t,e,n){const r=su(t,!0).put({[Yw]:e,value:n});return new Ca(r).toPromise()}async function MA(t,e){const n=su(t,!1).get(e),r=await new Ca(n).toPromise();return r===void 0?null:r.value}function jy(t,e){const n=su(t,!0).delete(e);return new Ca(n).toPromise()}const FA=800,UA=3;class Jw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $h(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>UA)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Kw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ru._getInstance(LA()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await jA(),!this.activeServiceWorker)return;this.sender=new PA(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||DA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $h();return await by(e,Sc,"1"),await jy(e,Sc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>by(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>MA(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>jy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=su(s,!1).getAll();return new Ca(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),FA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Jw.type="LOCAL";const Xw=Jw;new Ta(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(t,e){return e?tr(e):(Q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm extends tu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return di(e,this._buildIdpRequest())}_linkToIdToken(e,n){return di(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return di(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function BA(t){return Mw(t.auth,new Tm(t),t.bypassAuthState)}function $A(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),CA(n,new Tm(t),t.bypassAuthState)}async function zA(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),AA(n,new Tm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BA;case"linkViaPopup":case"linkViaRedirect":return zA;case"reauthViaPopup":case"reauthViaRedirect":return $A;default:hn(this.auth,"internal-error")}}resolve(e){dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA=new Ta(2e3,1e4);async function e1(t,e,n){if(an(t.app))return Promise.reject(Cn(t,"operation-not-supported-in-this-environment"));const r=$n(t);mm(t,e,Sa);const s=iu(r,n);return new kr(r,"signInViaPopup",e,s).executeNotNull()}async function t1(t,e,n){const r=lt(t);mm(r.auth,e,Sa);const s=iu(r.auth,n);return new kr(r.auth,"linkViaPopup",e,s,r).executeNotNull()}class kr extends Zw{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,kr.currentPopupAction&&kr.currentPopupAction.cancel(),kr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Q(e,this.auth,"internal-error"),e}async onExecution(){dr(this.filter.length===1,"Popup operations only handle one event");const e=Em();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Cn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Cn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,kr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Cn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qA.get())};e()}}kr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA="pendingRedirect",zl=new Map;class WA extends Zw{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=zl.get(this.auth._key());if(!e){try{const r=await GA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}zl.set(this.auth._key(),e)}return this.bypassAuthState||zl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function GA(t,e){const n=r1(e),r=n1(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}async function KA(t,e){return n1(t)._set(r1(e),"true")}function QA(t,e){zl.set(t._key(),e)}function n1(t){return tr(t._redirectPersistence)}function r1(t){return $l(HA,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(t,e,n){return YA(t,e,n)}async function YA(t,e,n){if(an(t.app))return Promise.reject(Vn(t));const r=$n(t);mm(t,e,Sa),await r._initializationPromise;const s=iu(r,n);return await KA(s,r),s._openRedirect(r,e,"signInViaRedirect")}async function i1(t,e){return await $n(t)._initializationPromise,o1(t,e,!1)}async function o1(t,e,n=!1){if(an(t.app))return Promise.reject(Vn(t));const r=$n(t),s=iu(r,e),o=await new WA(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=10*60*1e3;class XA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ZA(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!a1(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Cn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=JA&&this.cachedEventUids.clear(),this.cachedEventUids.has(Dy(e))}saveEventToCache(e){this.cachedEventUids.add(Dy(e)),this.lastProcessedEventTime=Date.now()}}function Dy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function a1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ZA(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return a1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eC(t,e={}){return es(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nC=/^https?/;async function rC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await eC(t);for(const n of e)try{if(sC(n))return}catch{}hn(t,"unauthorized-domain")}function sC(t){const e=Mh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!nC.test(n))return!1;if(tC.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC=new Ta(3e4,6e4);function Ly(){const t=On().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function oC(t){return new Promise((e,n)=>{var r,s,i;function o(){Ly(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ly(),n(Cn(t,"network-request-failed"))},timeout:iC.get()})}if(!((s=(r=On().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=On().gapi)===null||i===void 0)&&i.load)o();else{const l=dA("iframefcb");return On()[l]=()=>{gapi.load?o():n(Cn(t,"network-request-failed"))},jw(`${uA()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw ql=null,e})}let ql=null;function aC(t){return ql=ql||oC(t),ql}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC=new Ta(5e3,15e3),cC="__/auth/iframe",uC="emulator/auth/iframe",dC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fC(t){const e=t.config;Q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?gm(e,uC):`https://${t.config.authDomain}/${cC}`,r={apiKey:e.apiKey,appName:t.name,v:Oi},s=hC.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Ea(r).slice(1)}`}async function mC(t){const e=await aC(t),n=On().gapi;return Q(n,t,"internal-error"),e.open({where:document.body,url:fC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dC,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Cn(t,"network-request-failed"),l=On().setTimeout(()=>{i(o)},lC.get());function c(){On().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gC=500,yC=600,vC="_blank",_C="http://localhost";class Vy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function wC(t,e,n,r=gC,s=yC){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},pC),{width:r.toString(),height:s.toString(),top:i,left:o}),d=Nt().toLowerCase();n&&(l=Aw(d)?vC:n),Iw(d)&&(e=e||_C,c.scrollbars="yes");const f=Object.entries(c).reduce((p,[x,S])=>`${p}${x}=${S},`,"");if(tA(d)&&l!=="_self")return xC(e||"",l),new Vy(null);const g=window.open(e||"",l,f);Q(g,t,"popup-blocked");try{g.focus()}catch{}return new Vy(g)}function xC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC="__/auth/handler",TC="emulator/auth/handler",IC=encodeURIComponent("fac");async function Oy(t,e,n,r,s,i){Q(t.config.authDomain,t,"auth-domain-config-required"),Q(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Oi,eventId:s};if(e instanceof Sa){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",AS(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,g]of Object.entries({}))o[f]=g}if(e instanceof Aa){const f=e.getScopes().filter(g=>g!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const c=await t._getAppCheckToken(),d=c?`#${IC}=${encodeURIComponent(c)}`:"";return`${SC(t)}?${Ea(l).slice(1)}${d}`}function SC({config:t}){return t.emulator?gm(t,TC):`https://${t.authDomain}/${EC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nd="webStorageSupport";class AC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xm,this._completeRedirectFn=o1,this._overrideRedirectResult=QA}async _openPopup(e,n,r,s){var i;dr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Oy(e,n,r,Mh(),s);return wC(e,o,Em())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Oy(e,n,r,Mh(),s);return bA(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(dr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await mC(e),r=new XA(e);return n.register("authEvent",s=>(Q(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Nd,{type:Nd},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Nd];o!==void 0&&n(!!o),hn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=rC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Pw()||Sw()||vm()}}const l1=AC;var My="@firebase/auth",Fy="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function kC(t){wi(new Ts("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;Q(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bw(t)},d=new aA(r,s,i,c);return pA(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),wi(new Ts("auth-internal",e=>{const n=$n(e.getProvider("auth").getImmediate());return(r=>new CC(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),$r(My,Fy,NC(t)),$r(My,Fy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC=5*60,PC=ow("authIdTokenMaxAge")||RC;let Uy=null;const bC=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>PC)return;const s=n==null?void 0:n.token;Uy!==s&&(Uy=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function c1(t=uw()){const e=dm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Dw(t,{popupRedirectResolver:l1,persistence:[Xw,wm,xm]}),r=ow("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=bC(i.toString());qw(n,o,()=>o(n.currentUser)),zw(n,l=>o(l))}}const s=sw("auth");return s&&Lw(n,`http://${s}`),n}function jC(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}lA({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Cn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",jC().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});kC("Browser");const By=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeURL:nu,AuthCredential:tu,EmailAuthCredential:xi,EmailAuthProvider:bs,FacebookAuthProvider:Kn,GithubAuthProvider:Qn,GoogleAuthProvider:jn,OAuthCredential:Wr,TwitterAuthProvider:Yn,beforeAuthStateChanged:qw,browserLocalPersistence:wm,browserPopupRedirectResolver:l1,browserSessionPersistence:xm,connectAuthEmulator:Lw,createUserWithEmailAndPassword:_m,getAuth:c1,getIdTokenResult:ww,getRedirectResult:i1,inMemoryPersistence:Uh,indexedDBLocalPersistence:Xw,initializeAuth:Dw,linkWithPopup:t1,onIdTokenChanged:zw,prodErrorMap:mw,reload:xw,setPersistence:$w,signInWithCredential:Fw,signInWithEmailAndPassword:Bw,signInWithPopup:e1,signInWithRedirect:s1},Symbol.toStringTag,{value:"Module"}));var $y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ys,u1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,y){function I(){}I.prototype=y.prototype,_.D=y.prototype,_.prototype=new I,_.prototype.constructor=_,_.C=function(A,R,b){for(var N=Array(arguments.length-2),je=2;je<arguments.length;je++)N[je-2]=arguments[je];return y.prototype[R].apply(A,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(_,y,I){I||(I=0);var A=Array(16);if(typeof y=="string")for(var R=0;16>R;++R)A[R]=y.charCodeAt(I++)|y.charCodeAt(I++)<<8|y.charCodeAt(I++)<<16|y.charCodeAt(I++)<<24;else for(R=0;16>R;++R)A[R]=y[I++]|y[I++]<<8|y[I++]<<16|y[I++]<<24;y=_.g[0],I=_.g[1],R=_.g[2];var b=_.g[3],N=y+(b^I&(R^b))+A[0]+3614090360&4294967295;y=I+(N<<7&4294967295|N>>>25),N=b+(R^y&(I^R))+A[1]+3905402710&4294967295,b=y+(N<<12&4294967295|N>>>20),N=R+(I^b&(y^I))+A[2]+606105819&4294967295,R=b+(N<<17&4294967295|N>>>15),N=I+(y^R&(b^y))+A[3]+3250441966&4294967295,I=R+(N<<22&4294967295|N>>>10),N=y+(b^I&(R^b))+A[4]+4118548399&4294967295,y=I+(N<<7&4294967295|N>>>25),N=b+(R^y&(I^R))+A[5]+1200080426&4294967295,b=y+(N<<12&4294967295|N>>>20),N=R+(I^b&(y^I))+A[6]+2821735955&4294967295,R=b+(N<<17&4294967295|N>>>15),N=I+(y^R&(b^y))+A[7]+4249261313&4294967295,I=R+(N<<22&4294967295|N>>>10),N=y+(b^I&(R^b))+A[8]+1770035416&4294967295,y=I+(N<<7&4294967295|N>>>25),N=b+(R^y&(I^R))+A[9]+2336552879&4294967295,b=y+(N<<12&4294967295|N>>>20),N=R+(I^b&(y^I))+A[10]+4294925233&4294967295,R=b+(N<<17&4294967295|N>>>15),N=I+(y^R&(b^y))+A[11]+2304563134&4294967295,I=R+(N<<22&4294967295|N>>>10),N=y+(b^I&(R^b))+A[12]+1804603682&4294967295,y=I+(N<<7&4294967295|N>>>25),N=b+(R^y&(I^R))+A[13]+4254626195&4294967295,b=y+(N<<12&4294967295|N>>>20),N=R+(I^b&(y^I))+A[14]+2792965006&4294967295,R=b+(N<<17&4294967295|N>>>15),N=I+(y^R&(b^y))+A[15]+1236535329&4294967295,I=R+(N<<22&4294967295|N>>>10),N=y+(R^b&(I^R))+A[1]+4129170786&4294967295,y=I+(N<<5&4294967295|N>>>27),N=b+(I^R&(y^I))+A[6]+3225465664&4294967295,b=y+(N<<9&4294967295|N>>>23),N=R+(y^I&(b^y))+A[11]+643717713&4294967295,R=b+(N<<14&4294967295|N>>>18),N=I+(b^y&(R^b))+A[0]+3921069994&4294967295,I=R+(N<<20&4294967295|N>>>12),N=y+(R^b&(I^R))+A[5]+3593408605&4294967295,y=I+(N<<5&4294967295|N>>>27),N=b+(I^R&(y^I))+A[10]+38016083&4294967295,b=y+(N<<9&4294967295|N>>>23),N=R+(y^I&(b^y))+A[15]+3634488961&4294967295,R=b+(N<<14&4294967295|N>>>18),N=I+(b^y&(R^b))+A[4]+3889429448&4294967295,I=R+(N<<20&4294967295|N>>>12),N=y+(R^b&(I^R))+A[9]+568446438&4294967295,y=I+(N<<5&4294967295|N>>>27),N=b+(I^R&(y^I))+A[14]+3275163606&4294967295,b=y+(N<<9&4294967295|N>>>23),N=R+(y^I&(b^y))+A[3]+4107603335&4294967295,R=b+(N<<14&4294967295|N>>>18),N=I+(b^y&(R^b))+A[8]+1163531501&4294967295,I=R+(N<<20&4294967295|N>>>12),N=y+(R^b&(I^R))+A[13]+2850285829&4294967295,y=I+(N<<5&4294967295|N>>>27),N=b+(I^R&(y^I))+A[2]+4243563512&4294967295,b=y+(N<<9&4294967295|N>>>23),N=R+(y^I&(b^y))+A[7]+1735328473&4294967295,R=b+(N<<14&4294967295|N>>>18),N=I+(b^y&(R^b))+A[12]+2368359562&4294967295,I=R+(N<<20&4294967295|N>>>12),N=y+(I^R^b)+A[5]+4294588738&4294967295,y=I+(N<<4&4294967295|N>>>28),N=b+(y^I^R)+A[8]+2272392833&4294967295,b=y+(N<<11&4294967295|N>>>21),N=R+(b^y^I)+A[11]+1839030562&4294967295,R=b+(N<<16&4294967295|N>>>16),N=I+(R^b^y)+A[14]+4259657740&4294967295,I=R+(N<<23&4294967295|N>>>9),N=y+(I^R^b)+A[1]+2763975236&4294967295,y=I+(N<<4&4294967295|N>>>28),N=b+(y^I^R)+A[4]+1272893353&4294967295,b=y+(N<<11&4294967295|N>>>21),N=R+(b^y^I)+A[7]+4139469664&4294967295,R=b+(N<<16&4294967295|N>>>16),N=I+(R^b^y)+A[10]+3200236656&4294967295,I=R+(N<<23&4294967295|N>>>9),N=y+(I^R^b)+A[13]+681279174&4294967295,y=I+(N<<4&4294967295|N>>>28),N=b+(y^I^R)+A[0]+3936430074&4294967295,b=y+(N<<11&4294967295|N>>>21),N=R+(b^y^I)+A[3]+3572445317&4294967295,R=b+(N<<16&4294967295|N>>>16),N=I+(R^b^y)+A[6]+76029189&4294967295,I=R+(N<<23&4294967295|N>>>9),N=y+(I^R^b)+A[9]+3654602809&4294967295,y=I+(N<<4&4294967295|N>>>28),N=b+(y^I^R)+A[12]+3873151461&4294967295,b=y+(N<<11&4294967295|N>>>21),N=R+(b^y^I)+A[15]+530742520&4294967295,R=b+(N<<16&4294967295|N>>>16),N=I+(R^b^y)+A[2]+3299628645&4294967295,I=R+(N<<23&4294967295|N>>>9),N=y+(R^(I|~b))+A[0]+4096336452&4294967295,y=I+(N<<6&4294967295|N>>>26),N=b+(I^(y|~R))+A[7]+1126891415&4294967295,b=y+(N<<10&4294967295|N>>>22),N=R+(y^(b|~I))+A[14]+2878612391&4294967295,R=b+(N<<15&4294967295|N>>>17),N=I+(b^(R|~y))+A[5]+4237533241&4294967295,I=R+(N<<21&4294967295|N>>>11),N=y+(R^(I|~b))+A[12]+1700485571&4294967295,y=I+(N<<6&4294967295|N>>>26),N=b+(I^(y|~R))+A[3]+2399980690&4294967295,b=y+(N<<10&4294967295|N>>>22),N=R+(y^(b|~I))+A[10]+4293915773&4294967295,R=b+(N<<15&4294967295|N>>>17),N=I+(b^(R|~y))+A[1]+2240044497&4294967295,I=R+(N<<21&4294967295|N>>>11),N=y+(R^(I|~b))+A[8]+1873313359&4294967295,y=I+(N<<6&4294967295|N>>>26),N=b+(I^(y|~R))+A[15]+4264355552&4294967295,b=y+(N<<10&4294967295|N>>>22),N=R+(y^(b|~I))+A[6]+2734768916&4294967295,R=b+(N<<15&4294967295|N>>>17),N=I+(b^(R|~y))+A[13]+1309151649&4294967295,I=R+(N<<21&4294967295|N>>>11),N=y+(R^(I|~b))+A[4]+4149444226&4294967295,y=I+(N<<6&4294967295|N>>>26),N=b+(I^(y|~R))+A[11]+3174756917&4294967295,b=y+(N<<10&4294967295|N>>>22),N=R+(y^(b|~I))+A[2]+718787259&4294967295,R=b+(N<<15&4294967295|N>>>17),N=I+(b^(R|~y))+A[9]+3951481745&4294967295,_.g[0]=_.g[0]+y&4294967295,_.g[1]=_.g[1]+(R+(N<<21&4294967295|N>>>11))&4294967295,_.g[2]=_.g[2]+R&4294967295,_.g[3]=_.g[3]+b&4294967295}r.prototype.u=function(_,y){y===void 0&&(y=_.length);for(var I=y-this.blockSize,A=this.B,R=this.h,b=0;b<y;){if(R==0)for(;b<=I;)s(this,_,b),b+=this.blockSize;if(typeof _=="string"){for(;b<y;)if(A[R++]=_.charCodeAt(b++),R==this.blockSize){s(this,A),R=0;break}}else for(;b<y;)if(A[R++]=_[b++],R==this.blockSize){s(this,A),R=0;break}}this.h=R,this.o+=y},r.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var y=1;y<_.length-8;++y)_[y]=0;var I=8*this.o;for(y=_.length-8;y<_.length;++y)_[y]=I&255,I/=256;for(this.u(_),_=Array(16),y=I=0;4>y;++y)for(var A=0;32>A;A+=8)_[I++]=this.g[y]>>>A&255;return _};function i(_,y){var I=l;return Object.prototype.hasOwnProperty.call(I,_)?I[_]:I[_]=y(_)}function o(_,y){this.h=y;for(var I=[],A=!0,R=_.length-1;0<=R;R--){var b=_[R]|0;A&&b==y||(I[R]=b,A=!1)}this.g=I}var l={};function c(_){return-128<=_&&128>_?i(_,function(y){return new o([y|0],0>y?-1:0)}):new o([_|0],0>_?-1:0)}function d(_){if(isNaN(_)||!isFinite(_))return g;if(0>_)return D(d(-_));for(var y=[],I=1,A=0;_>=I;A++)y[A]=_/I|0,I*=4294967296;return new o(y,0)}function f(_,y){if(_.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(_.charAt(0)=="-")return D(f(_.substring(1),y));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=d(Math.pow(y,8)),A=g,R=0;R<_.length;R+=8){var b=Math.min(8,_.length-R),N=parseInt(_.substring(R,R+b),y);8>b?(b=d(Math.pow(y,b)),A=A.j(b).add(d(N))):(A=A.j(I),A=A.add(d(N)))}return A}var g=c(0),p=c(1),x=c(16777216);t=o.prototype,t.m=function(){if(C(this))return-D(this).m();for(var _=0,y=1,I=0;I<this.g.length;I++){var A=this.i(I);_+=(0<=A?A:4294967296+A)*y,y*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(S(this))return"0";if(C(this))return"-"+D(this).toString(_);for(var y=d(Math.pow(_,6)),I=this,A="";;){var R=k(I,y).g;I=T(I,R.j(y));var b=((0<I.g.length?I.g[0]:I.h)>>>0).toString(_);if(I=R,S(I))return b+A;for(;6>b.length;)b="0"+b;A=b+A}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function S(_){if(_.h!=0)return!1;for(var y=0;y<_.g.length;y++)if(_.g[y]!=0)return!1;return!0}function C(_){return _.h==-1}t.l=function(_){return _=T(this,_),C(_)?-1:S(_)?0:1};function D(_){for(var y=_.g.length,I=[],A=0;A<y;A++)I[A]=~_.g[A];return new o(I,~_.h).add(p)}t.abs=function(){return C(this)?D(this):this},t.add=function(_){for(var y=Math.max(this.g.length,_.g.length),I=[],A=0,R=0;R<=y;R++){var b=A+(this.i(R)&65535)+(_.i(R)&65535),N=(b>>>16)+(this.i(R)>>>16)+(_.i(R)>>>16);A=N>>>16,b&=65535,N&=65535,I[R]=N<<16|b}return new o(I,I[I.length-1]&-2147483648?-1:0)};function T(_,y){return _.add(D(y))}t.j=function(_){if(S(this)||S(_))return g;if(C(this))return C(_)?D(this).j(D(_)):D(D(this).j(_));if(C(_))return D(this.j(D(_)));if(0>this.l(x)&&0>_.l(x))return d(this.m()*_.m());for(var y=this.g.length+_.g.length,I=[],A=0;A<2*y;A++)I[A]=0;for(A=0;A<this.g.length;A++)for(var R=0;R<_.g.length;R++){var b=this.i(A)>>>16,N=this.i(A)&65535,je=_.i(R)>>>16,mn=_.i(R)&65535;I[2*A+2*R]+=N*mn,E(I,2*A+2*R),I[2*A+2*R+1]+=b*mn,E(I,2*A+2*R+1),I[2*A+2*R+1]+=N*je,E(I,2*A+2*R+1),I[2*A+2*R+2]+=b*je,E(I,2*A+2*R+2)}for(A=0;A<y;A++)I[A]=I[2*A+1]<<16|I[2*A];for(A=y;A<2*y;A++)I[A]=0;return new o(I,0)};function E(_,y){for(;(_[y]&65535)!=_[y];)_[y+1]+=_[y]>>>16,_[y]&=65535,y++}function w(_,y){this.g=_,this.h=y}function k(_,y){if(S(y))throw Error("division by zero");if(S(_))return new w(g,g);if(C(_))return y=k(D(_),y),new w(D(y.g),D(y.h));if(C(y))return y=k(_,D(y)),new w(D(y.g),y.h);if(30<_.g.length){if(C(_)||C(y))throw Error("slowDivide_ only works with positive integers.");for(var I=p,A=y;0>=A.l(_);)I=j(I),A=j(A);var R=P(I,1),b=P(A,1);for(A=P(A,2),I=P(I,2);!S(A);){var N=b.add(A);0>=N.l(_)&&(R=R.add(I),b=N),A=P(A,1),I=P(I,1)}return y=T(_,R.j(y)),new w(R,y)}for(R=g;0<=_.l(y);){for(I=Math.max(1,Math.floor(_.m()/y.m())),A=Math.ceil(Math.log(I)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),b=d(I),N=b.j(y);C(N)||0<N.l(_);)I-=A,b=d(I),N=b.j(y);S(b)&&(b=p),R=R.add(b),_=T(_,N)}return new w(R,_)}t.A=function(_){return k(this,_).h},t.and=function(_){for(var y=Math.max(this.g.length,_.g.length),I=[],A=0;A<y;A++)I[A]=this.i(A)&_.i(A);return new o(I,this.h&_.h)},t.or=function(_){for(var y=Math.max(this.g.length,_.g.length),I=[],A=0;A<y;A++)I[A]=this.i(A)|_.i(A);return new o(I,this.h|_.h)},t.xor=function(_){for(var y=Math.max(this.g.length,_.g.length),I=[],A=0;A<y;A++)I[A]=this.i(A)^_.i(A);return new o(I,this.h^_.h)};function j(_){for(var y=_.g.length+1,I=[],A=0;A<y;A++)I[A]=_.i(A)<<1|_.i(A-1)>>>31;return new o(I,_.h)}function P(_,y){var I=y>>5;y%=32;for(var A=_.g.length-I,R=[],b=0;b<A;b++)R[b]=0<y?_.i(b+I)>>>y|_.i(b+I+1)<<32-y:_.i(b+I);return new o(R,_.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,u1=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,ys=o}).apply(typeof $y<"u"?$y:typeof self<"u"?self:typeof window<"u"?window:{});var El=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var d1,vo,h1,Hl,zh,f1,m1,p1;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,m){return a==Array.prototype||a==Object.prototype||(a[h]=m.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof El=="object"&&El];for(var h=0;h<a.length;++h){var m=a[h];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var m=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var L=a[v];if(!(L in m))break e;m=m[L]}a=a[a.length-1],v=m[a],h=h(v),h!=v&&h!=null&&e(m,a,{configurable:!0,writable:!0,value:h})}}function i(a,h){a instanceof String&&(a+="");var m=0,v=!1,L={next:function(){if(!v&&m<a.length){var V=m++;return{value:h(V,a[V]),done:!1}}return v=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}s("Array.prototype.values",function(a){return a||function(){return i(this,function(h,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function d(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function f(a,h,m){return a.call.apply(a.bind,arguments)}function g(a,h,m){if(!a)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,v),a.apply(h,L)}}return function(){return a.apply(h,arguments)}}function p(a,h,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:g,p.apply(null,arguments)}function x(a,h){var m=Array.prototype.slice.call(arguments,1);return function(){var v=m.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function S(a,h){function m(){}m.prototype=h.prototype,a.aa=h.prototype,a.prototype=new m,a.prototype.constructor=a,a.Qb=function(v,L,V){for(var B=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)B[Ie-2]=arguments[Ie];return h.prototype[L].apply(v,B)}}function C(a){const h=a.length;if(0<h){const m=Array(h);for(let v=0;v<h;v++)m[v]=a[v];return m}return[]}function D(a,h){for(let m=1;m<arguments.length;m++){const v=arguments[m];if(c(v)){const L=a.length||0,V=v.length||0;a.length=L+V;for(let B=0;B<V;B++)a[L+B]=v[B]}else a.push(v)}}class T{constructor(h,m){this.i=h,this.j=m,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function E(a){return/^[\s\xa0]*$/.test(a)}function w(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function k(a){return k[" "](a),a}k[" "]=function(){};var j=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function P(a,h,m){for(const v in a)h.call(m,a[v],v,a)}function _(a,h){for(const m in a)h.call(void 0,a[m],m,a)}function y(a){const h={};for(const m in a)h[m]=a[m];return h}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(a,h){let m,v;for(let L=1;L<arguments.length;L++){v=arguments[L];for(m in v)a[m]=v[m];for(let V=0;V<I.length;V++)m=I[V],Object.prototype.hasOwnProperty.call(v,m)&&(a[m]=v[m])}}function R(a){var h=1;a=a.split(":");const m=[];for(;0<h&&a.length;)m.push(a.shift()),h--;return a.length&&m.push(a.join(":")),m}function b(a){l.setTimeout(()=>{throw a},0)}function N(){var a=q;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class je{constructor(){this.h=this.g=null}add(h,m){const v=mn.get();v.set(h,m),this.h?this.h.next=v:this.g=v,this.h=v}}var mn=new T(()=>new yr,a=>a.reset());class yr{constructor(){this.next=this.g=this.h=null}set(h,m){this.h=h,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let pn,z=!1,q=new je,Z=()=>{const a=l.Promise.resolve(void 0);pn=()=>{a.then(Ce)}};var Ce=()=>{for(var a;a=N();){try{a.h.call(a.g)}catch(m){b(m)}var h=mn;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}z=!1};function we(){this.s=this.s,this.C=this.C}we.prototype.s=!1,we.prototype.ma=function(){this.s||(this.s=!0,this.N())},we.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ve(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}Ve.prototype.h=function(){this.defaultPrevented=!0};var gn=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const m=()=>{};l.addEventListener("test",m,h),l.removeEventListener("test",m,h)}catch{}return a}();function yn(a,h){if(Ve.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var m=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(j){e:{try{k(h.nodeName);var L=!0;break e}catch{}L=!1}L||(h=null)}}else m=="mouseover"?h=a.fromElement:m=="mouseout"&&(h=a.toElement);this.relatedTarget=h,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:$[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&yn.aa.h.call(this)}}S(yn,Ve);var $={2:"touch",3:"pen",4:"mouse"};yn.prototype.h=function(){yn.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var xe="closure_listenable_"+(1e6*Math.random()|0),$t=0;function Ze(a,h,m,v,L){this.listener=a,this.proxy=null,this.src=h,this.type=m,this.capture=!!v,this.ha=L,this.key=++$t,this.da=this.fa=!1}function De(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function zt(a){this.src=a,this.g={},this.h=0}zt.prototype.add=function(a,h,m,v,L){var V=a.toString();a=this.g[V],a||(a=this.g[V]=[],this.h++);var B=tn(a,h,v,L);return-1<B?(h=a[B],m||(h.fa=!1)):(h=new Ze(h,this.src,V,!!v,L),h.fa=m,a.push(h)),h};function en(a,h){var m=h.type;if(m in a.g){var v=a.g[m],L=Array.prototype.indexOf.call(v,h,void 0),V;(V=0<=L)&&Array.prototype.splice.call(v,L,1),V&&(De(h),a.g[m].length==0&&(delete a.g[m],a.h--))}}function tn(a,h,m,v){for(var L=0;L<a.length;++L){var V=a[L];if(!V.da&&V.listener==h&&V.capture==!!m&&V.ha==v)return L}return-1}var nn="closure_lm_"+(1e6*Math.random()|0),ne={};function rt(a,h,m,v,L){if(Array.isArray(h)){for(var V=0;V<h.length;V++)rt(a,h[V],m,v,L);return null}return m=yt(m),a&&a[xe]?a.K(h,m,d(v)?!!v.capture:!!v,L):se(a,h,m,!1,v,L)}function se(a,h,m,v,L,V){if(!h)throw Error("Invalid event type");var B=d(L)?!!L.capture:!!L,Ie=et(a);if(Ie||(a[nn]=Ie=new zt(a)),m=Ie.add(h,m,v,B,V),m.proxy)return m;if(v=ie(),m.proxy=v,v.src=a,v.listener=m,a.addEventListener)gn||(L=B),L===void 0&&(L=!1),a.addEventListener(h.toString(),v,L);else if(a.attachEvent)a.attachEvent(ve(h.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return m}function ie(){function a(m){return h.call(a.src,a.listener,m)}const h=fe;return a}function le(a,h,m,v,L){if(Array.isArray(h))for(var V=0;V<h.length;V++)le(a,h[V],m,v,L);else v=d(v)?!!v.capture:!!v,m=yt(m),a&&a[xe]?(a=a.i,h=String(h).toString(),h in a.g&&(V=a.g[h],m=tn(V,m,v,L),-1<m&&(De(V[m]),Array.prototype.splice.call(V,m,1),V.length==0&&(delete a.g[h],a.h--)))):a&&(a=et(a))&&(h=a.g[h.toString()],a=-1,h&&(a=tn(h,m,v,L)),(m=-1<a?h[a]:null)&&$e(m))}function $e(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[xe])en(h.i,a);else{var m=a.type,v=a.proxy;h.removeEventListener?h.removeEventListener(m,v,a.capture):h.detachEvent?h.detachEvent(ve(m),v):h.addListener&&h.removeListener&&h.removeListener(v),(m=et(h))?(en(m,a),m.h==0&&(m.src=null,h[nn]=null)):De(a)}}}function ve(a){return a in ne?ne[a]:ne[a]="on"+a}function fe(a,h){if(a.da)a=!0;else{h=new yn(h,this);var m=a.listener,v=a.ha||a.src;a.fa&&$e(a),a=m.call(v,h)}return a}function et(a){return a=a[nn],a instanceof zt?a:null}var He="__closure_events_fn_"+(1e9*Math.random()>>>0);function yt(a){return typeof a=="function"?a:(a[He]||(a[He]=function(h){return a.handleEvent(h)}),a[He])}function _e(){we.call(this),this.i=new zt(this),this.M=this,this.F=null}S(_e,we),_e.prototype[xe]=!0,_e.prototype.removeEventListener=function(a,h,m,v){le(this,a,h,m,v)};function Ne(a,h){var m,v=a.F;if(v)for(m=[];v;v=v.F)m.push(v);if(a=a.M,v=h.type||h,typeof h=="string")h=new Ve(h,a);else if(h instanceof Ve)h.target=h.target||a;else{var L=h;h=new Ve(v,a),A(h,L)}if(L=!0,m)for(var V=m.length-1;0<=V;V--){var B=h.g=m[V];L=Ls(B,v,!0,h)&&L}if(B=h.g=a,L=Ls(B,v,!0,h)&&L,L=Ls(B,v,!1,h)&&L,m)for(V=0;V<m.length;V++)B=h.g=m[V],L=Ls(B,v,!1,h)&&L}_e.prototype.N=function(){if(_e.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var m=a.g[h],v=0;v<m.length;v++)De(m[v]);delete a.g[h],a.h--}}this.F=null},_e.prototype.K=function(a,h,m,v){return this.i.add(String(a),h,!1,m,v)},_e.prototype.L=function(a,h,m,v){return this.i.add(String(a),h,!0,m,v)};function Ls(a,h,m,v){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var L=!0,V=0;V<h.length;++V){var B=h[V];if(B&&!B.da&&B.capture==m){var Ie=B.listener,ut=B.ha||B.src;B.fa&&en(a.i,B),L=Ie.call(ut,v)!==!1&&L}}return L&&!v.defaultPrevented}function lp(a,h,m){if(typeof a=="function")m&&(a=p(a,m));else if(a&&typeof a.handleEvent=="function")a=p(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(a,h||0)}function cp(a){a.g=lp(()=>{a.g=null,a.i&&(a.i=!1,cp(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class sE extends we{constructor(h,m){super(),this.m=h,this.l=m,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:cp(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zi(a){we.call(this),this.h=a,this.g={}}S(zi,we);var up=[];function dp(a){P(a.g,function(h,m){this.g.hasOwnProperty(m)&&$e(h)},a),a.g={}}zi.prototype.N=function(){zi.aa.N.call(this),dp(this)},zi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Du=l.JSON.stringify,iE=l.JSON.parse,oE=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Lu(){}Lu.prototype.h=null;function hp(a){return a.h||(a.h=a.i())}function fp(){}var qi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Vu(){Ve.call(this,"d")}S(Vu,Ve);function Ou(){Ve.call(this,"c")}S(Ou,Ve);var ss={},mp=null;function za(){return mp=mp||new _e}ss.La="serverreachability";function pp(a){Ve.call(this,ss.La,a)}S(pp,Ve);function Hi(a){const h=za();Ne(h,new pp(h))}ss.STAT_EVENT="statevent";function gp(a,h){Ve.call(this,ss.STAT_EVENT,a),this.stat=h}S(gp,Ve);function kt(a){const h=za();Ne(h,new gp(h,a))}ss.Ma="timingevent";function yp(a,h){Ve.call(this,ss.Ma,a),this.size=h}S(yp,Ve);function Wi(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},h)}function Gi(){this.g=!0}Gi.prototype.xa=function(){this.g=!1};function aE(a,h,m,v,L,V){a.info(function(){if(a.g)if(V)for(var B="",Ie=V.split("&"),ut=0;ut<Ie.length;ut++){var me=Ie[ut].split("=");if(1<me.length){var vt=me[0];me=me[1];var _t=vt.split("_");B=2<=_t.length&&_t[1]=="type"?B+(vt+"="+me+"&"):B+(vt+"=redacted&")}}else B=null;else B=V;return"XMLHTTP REQ ("+v+") [attempt "+L+"]: "+h+`
`+m+`
`+B})}function lE(a,h,m,v,L,V,B){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+L+"]: "+h+`
`+m+`
`+V+" "+B})}function Vs(a,h,m,v){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+uE(a,m)+(v?" "+v:"")})}function cE(a,h){a.info(function(){return"TIMEOUT: "+h})}Gi.prototype.info=function(){};function uE(a,h){if(!a.g)return h;if(!h)return null;try{var m=JSON.parse(h);if(m){for(a=0;a<m.length;a++)if(Array.isArray(m[a])){var v=m[a];if(!(2>v.length)){var L=v[1];if(Array.isArray(L)&&!(1>L.length)){var V=L[0];if(V!="noop"&&V!="stop"&&V!="close")for(var B=1;B<L.length;B++)L[B]=""}}}}return Du(m)}catch{return h}}var qa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},vp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Mu;function Ha(){}S(Ha,Lu),Ha.prototype.g=function(){return new XMLHttpRequest},Ha.prototype.i=function(){return{}},Mu=new Ha;function vr(a,h,m,v){this.j=a,this.i=h,this.l=m,this.R=v||1,this.U=new zi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _p}function _p(){this.i=null,this.g="",this.h=!1}var wp={},Fu={};function Uu(a,h,m){a.L=1,a.v=Qa(qn(h)),a.m=m,a.P=!0,xp(a,null)}function xp(a,h){a.F=Date.now(),Wa(a),a.A=qn(a.v);var m=a.A,v=a.R;Array.isArray(v)||(v=[String(v)]),Lp(m.i,"t",v),a.C=0,m=a.j.J,a.h=new _p,a.g=Zp(a.j,m?h:null,!a.m),0<a.O&&(a.M=new sE(p(a.Y,a,a.g),a.O)),h=a.U,m=a.g,v=a.ca;var L="readystatechange";Array.isArray(L)||(L&&(up[0]=L.toString()),L=up);for(var V=0;V<L.length;V++){var B=rt(m,L[V],v||h.handleEvent,!1,h.h||h);if(!B)break;h.g[B.key]=B}h=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),Hi(),aE(a.i,a.u,a.A,a.l,a.R,a.m)}vr.prototype.ca=function(a){a=a.target;const h=this.M;h&&Hn(a)==3?h.j():this.Y(a)},vr.prototype.Y=function(a){try{if(a==this.g)e:{const _t=Hn(this.g);var h=this.g.Ba();const Fs=this.g.Z();if(!(3>_t)&&(_t!=3||this.g&&(this.h.h||this.g.oa()||$p(this.g)))){this.J||_t!=4||h==7||(h==8||0>=Fs?Hi(3):Hi(2)),Bu(this);var m=this.g.Z();this.X=m;t:if(Ep(this)){var v=$p(this.g);a="";var L=v.length,V=Hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){is(this),Ki(this);var B="";break t}this.h.i=new l.TextDecoder}for(h=0;h<L;h++)this.h.h=!0,a+=this.h.i.decode(v[h],{stream:!(V&&h==L-1)});v.length=0,this.h.g+=a,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=m==200,lE(this.i,this.u,this.A,this.l,this.R,_t,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Ie,ut=this.g;if((Ie=ut.g?ut.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(Ie)){var me=Ie;break t}}me=null}if(m=me)Vs(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,$u(this,m);else{this.o=!1,this.s=3,kt(12),is(this),Ki(this);break e}}if(this.P){m=!0;let vn;for(;!this.J&&this.C<B.length;)if(vn=dE(this,B),vn==Fu){_t==4&&(this.s=4,kt(14),m=!1),Vs(this.i,this.l,null,"[Incomplete Response]");break}else if(vn==wp){this.s=4,kt(15),Vs(this.i,this.l,B,"[Invalid Chunk]"),m=!1;break}else Vs(this.i,this.l,vn,null),$u(this,vn);if(Ep(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_t!=4||B.length!=0||this.h.h||(this.s=1,kt(16),m=!1),this.o=this.o&&m,!m)Vs(this.i,this.l,B,"[Invalid Chunked Response]"),is(this),Ki(this);else if(0<B.length&&!this.W){this.W=!0;var vt=this.j;vt.g==this&&vt.ba&&!vt.M&&(vt.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),Ku(vt),vt.M=!0,kt(11))}}else Vs(this.i,this.l,B,null),$u(this,B);_t==4&&is(this),this.o&&!this.J&&(_t==4?Qp(this.j,this):(this.o=!1,Wa(this)))}else NE(this.g),m==400&&0<B.indexOf("Unknown SID")?(this.s=3,kt(12)):(this.s=0,kt(13)),is(this),Ki(this)}}}catch{}finally{}};function Ep(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function dE(a,h){var m=a.C,v=h.indexOf(`
`,m);return v==-1?Fu:(m=Number(h.substring(m,v)),isNaN(m)?wp:(v+=1,v+m>h.length?Fu:(h=h.slice(v,v+m),a.C=v+m,h)))}vr.prototype.cancel=function(){this.J=!0,is(this)};function Wa(a){a.S=Date.now()+a.I,Tp(a,a.I)}function Tp(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Wi(p(a.ba,a),h)}function Bu(a){a.B&&(l.clearTimeout(a.B),a.B=null)}vr.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(cE(this.i,this.A),this.L!=2&&(Hi(),kt(17)),is(this),this.s=2,Ki(this)):Tp(this,this.S-a)};function Ki(a){a.j.G==0||a.J||Qp(a.j,a)}function is(a){Bu(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,dp(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function $u(a,h){try{var m=a.j;if(m.G!=0&&(m.g==a||zu(m.h,a))){if(!a.K&&zu(m.h,a)&&m.G==3){try{var v=m.Da.g.parse(h)}catch{v=null}if(Array.isArray(v)&&v.length==3){var L=v;if(L[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<a.F)tl(m),Za(m);else break e;Gu(m),kt(18)}}else m.za=L[1],0<m.za-m.T&&37500>L[2]&&m.F&&m.v==0&&!m.C&&(m.C=Wi(p(m.Za,m),6e3));if(1>=Ap(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else as(m,11)}else if((a.K||m.g==a)&&tl(m),!E(h))for(L=m.Da.g.parse(h),h=0;h<L.length;h++){let me=L[h];if(m.T=me[0],me=me[1],m.G==2)if(me[0]=="c"){m.K=me[1],m.ia=me[2];const vt=me[3];vt!=null&&(m.la=vt,m.j.info("VER="+m.la));const _t=me[4];_t!=null&&(m.Aa=_t,m.j.info("SVER="+m.Aa));const Fs=me[5];Fs!=null&&typeof Fs=="number"&&0<Fs&&(v=1.5*Fs,m.L=v,m.j.info("backChannelRequestTimeoutMs_="+v)),v=m;const vn=a.g;if(vn){const rl=vn.g?vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(rl){var V=v.h;V.g||rl.indexOf("spdy")==-1&&rl.indexOf("quic")==-1&&rl.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(qu(V,V.h),V.h=null))}if(v.D){const Qu=vn.g?vn.g.getResponseHeader("X-HTTP-Session-Id"):null;Qu&&(v.ya=Qu,ke(v.I,v.D,Qu))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-a.F,m.j.info("Handshake RTT: "+m.R+"ms")),v=m;var B=a;if(v.qa=Xp(v,v.J?v.ia:null,v.W),B.K){Cp(v.h,B);var Ie=B,ut=v.L;ut&&(Ie.I=ut),Ie.B&&(Bu(Ie),Wa(Ie)),v.g=B}else Gp(v);0<m.i.length&&el(m)}else me[0]!="stop"&&me[0]!="close"||as(m,7);else m.G==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?as(m,7):Wu(m):me[0]!="noop"&&m.l&&m.l.ta(me),m.v=0)}}Hi(4)}catch{}}var hE=class{constructor(a,h){this.g=a,this.map=h}};function Ip(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Sp(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Ap(a){return a.h?1:a.g?a.g.size:0}function zu(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function qu(a,h){a.g?a.g.add(h):a.h=h}function Cp(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}Ip.prototype.cancel=function(){if(this.i=Np(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Np(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const m of a.g.values())h=h.concat(m.D);return h}return C(a.i)}function fE(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var h=[],m=a.length,v=0;v<m;v++)h.push(a[v]);return h}h=[],m=0;for(v in a)h[m++]=a[v];return h}function mE(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var h=[];a=a.length;for(var m=0;m<a;m++)h.push(m);return h}h=[],m=0;for(const v in a)h[m++]=v;return h}}}function kp(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var m=mE(a),v=fE(a),L=v.length,V=0;V<L;V++)h.call(void 0,v[V],m&&m[V],a)}var Rp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pE(a,h){if(a){a=a.split("&");for(var m=0;m<a.length;m++){var v=a[m].indexOf("="),L=null;if(0<=v){var V=a[m].substring(0,v);L=a[m].substring(v+1)}else V=a[m];h(V,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function os(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof os){this.h=a.h,Ga(this,a.j),this.o=a.o,this.g=a.g,Ka(this,a.s),this.l=a.l;var h=a.i,m=new Ji;m.i=h.i,h.g&&(m.g=new Map(h.g),m.h=h.h),Pp(this,m),this.m=a.m}else a&&(h=String(a).match(Rp))?(this.h=!1,Ga(this,h[1]||"",!0),this.o=Qi(h[2]||""),this.g=Qi(h[3]||"",!0),Ka(this,h[4]),this.l=Qi(h[5]||"",!0),Pp(this,h[6]||"",!0),this.m=Qi(h[7]||"")):(this.h=!1,this.i=new Ji(null,this.h))}os.prototype.toString=function(){var a=[],h=this.j;h&&a.push(Yi(h,bp,!0),":");var m=this.g;return(m||h=="file")&&(a.push("//"),(h=this.o)&&a.push(Yi(h,bp,!0),"@"),a.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&a.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&a.push("/"),a.push(Yi(m,m.charAt(0)=="/"?vE:yE,!0))),(m=this.i.toString())&&a.push("?",m),(m=this.m)&&a.push("#",Yi(m,wE)),a.join("")};function qn(a){return new os(a)}function Ga(a,h,m){a.j=m?Qi(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function Ka(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function Pp(a,h,m){h instanceof Ji?(a.i=h,xE(a.i,a.h)):(m||(h=Yi(h,_E)),a.i=new Ji(h,a.h))}function ke(a,h,m){a.i.set(h,m)}function Qa(a){return ke(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Qi(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Yi(a,h,m){return typeof a=="string"?(a=encodeURI(a).replace(h,gE),m&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function gE(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var bp=/[#\/\?@]/g,yE=/[#\?:]/g,vE=/[#\?]/g,_E=/[#\?@]/g,wE=/#/g;function Ji(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function _r(a){a.g||(a.g=new Map,a.h=0,a.i&&pE(a.i,function(h,m){a.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}t=Ji.prototype,t.add=function(a,h){_r(this),this.i=null,a=Os(this,a);var m=this.g.get(a);return m||this.g.set(a,m=[]),m.push(h),this.h+=1,this};function jp(a,h){_r(a),h=Os(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function Dp(a,h){return _r(a),h=Os(a,h),a.g.has(h)}t.forEach=function(a,h){_r(this),this.g.forEach(function(m,v){m.forEach(function(L){a.call(h,L,v,this)},this)},this)},t.na=function(){_r(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),m=[];for(let v=0;v<h.length;v++){const L=a[v];for(let V=0;V<L.length;V++)m.push(h[v])}return m},t.V=function(a){_r(this);let h=[];if(typeof a=="string")Dp(this,a)&&(h=h.concat(this.g.get(Os(this,a))));else{a=Array.from(this.g.values());for(let m=0;m<a.length;m++)h=h.concat(a[m])}return h},t.set=function(a,h){return _r(this),this.i=null,a=Os(this,a),Dp(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function Lp(a,h,m){jp(a,h),0<m.length&&(a.i=null,a.g.set(Os(a,h),C(m)),a.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var m=0;m<h.length;m++){var v=h[m];const V=encodeURIComponent(String(v)),B=this.V(v);for(v=0;v<B.length;v++){var L=V;B[v]!==""&&(L+="="+encodeURIComponent(String(B[v]))),a.push(L)}}return this.i=a.join("&")};function Os(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function xE(a,h){h&&!a.j&&(_r(a),a.i=null,a.g.forEach(function(m,v){var L=v.toLowerCase();v!=L&&(jp(this,v),Lp(this,L,m))},a)),a.j=h}function EE(a,h){const m=new Gi;if(l.Image){const v=new Image;v.onload=x(wr,m,"TestLoadImage: loaded",!0,h,v),v.onerror=x(wr,m,"TestLoadImage: error",!1,h,v),v.onabort=x(wr,m,"TestLoadImage: abort",!1,h,v),v.ontimeout=x(wr,m,"TestLoadImage: timeout",!1,h,v),l.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else h(!1)}function TE(a,h){const m=new Gi,v=new AbortController,L=setTimeout(()=>{v.abort(),wr(m,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:v.signal}).then(V=>{clearTimeout(L),V.ok?wr(m,"TestPingServer: ok",!0,h):wr(m,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(L),wr(m,"TestPingServer: error",!1,h)})}function wr(a,h,m,v,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),v(m)}catch{}}function IE(){this.g=new oE}function SE(a,h,m){const v=m||"";try{kp(a,function(L,V){let B=L;d(L)&&(B=Du(L)),h.push(v+V+"="+encodeURIComponent(B))})}catch(L){throw h.push(v+"type="+encodeURIComponent("_badmap")),L}}function Ya(a){this.l=a.Ub||null,this.j=a.eb||!1}S(Ya,Lu),Ya.prototype.g=function(){return new Ja(this.l,this.j)},Ya.prototype.i=function(a){return function(){return a}}({});function Ja(a,h){_e.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Ja,_e),t=Ja.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,Zi(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xi(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Zi(this)),this.g&&(this.readyState=3,Zi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Vp(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Vp(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?Xi(this):Zi(this),this.readyState==3&&Vp(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Xi(this))},t.Qa=function(a){this.g&&(this.response=a,Xi(this))},t.ga=function(){this.g&&Xi(this)};function Xi(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Zi(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var m=h.next();!m.done;)m=m.value,a.push(m[0]+": "+m[1]),m=h.next();return a.join(`\r
`)};function Zi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Ja.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Op(a){let h="";return P(a,function(m,v){h+=v,h+=":",h+=m,h+=`\r
`}),h}function Hu(a,h,m){e:{for(v in m){var v=!1;break e}v=!0}v||(m=Op(m),typeof a=="string"?m!=null&&encodeURIComponent(String(m)):ke(a,h,m))}function ze(a){_e.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(ze,_e);var AE=/^https?$/i,CE=["POST","PUT"];t=ze.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,m,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Mu.g(),this.v=this.o?hp(this.o):hp(Mu),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(V){Mp(this,V);return}if(a=m||"",m=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var L in v)m.set(L,v[L]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const V of v.keys())m.set(V,v.get(V));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(m.keys()).find(V=>V.toLowerCase()=="content-type"),L=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(CE,h,void 0))||v||L||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,B]of m)this.g.setRequestHeader(V,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Bp(this),this.u=!0,this.g.send(a),this.u=!1}catch(V){Mp(this,V)}};function Mp(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,Fp(a),Xa(a)}function Fp(a){a.A||(a.A=!0,Ne(a,"complete"),Ne(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Ne(this,"complete"),Ne(this,"abort"),Xa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xa(this,!0)),ze.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Up(this):this.bb())},t.bb=function(){Up(this)};function Up(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Hn(a)!=4||a.Z()!=2)){if(a.u&&Hn(a)==4)lp(a.Ea,0,a);else if(Ne(a,"readystatechange"),Hn(a)==4){a.h=!1;try{const B=a.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var m;if(!(m=h)){var v;if(v=B===0){var L=String(a.D).match(Rp)[1]||null;!L&&l.self&&l.self.location&&(L=l.self.location.protocol.slice(0,-1)),v=!AE.test(L?L.toLowerCase():"")}m=v}if(m)Ne(a,"complete"),Ne(a,"success");else{a.m=6;try{var V=2<Hn(a)?a.g.statusText:""}catch{V=""}a.l=V+" ["+a.Z()+"]",Fp(a)}}finally{Xa(a)}}}}function Xa(a,h){if(a.g){Bp(a);const m=a.g,v=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||Ne(a,"ready");try{m.onreadystatechange=v}catch{}}}function Bp(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Hn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Hn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),iE(h)}};function $p(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function NE(a){const h={};a=(a.g&&2<=Hn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(E(a[v]))continue;var m=R(a[v]);const L=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const V=h[L]||[];h[L]=V,V.push(m)}_(h,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function eo(a,h,m){return m&&m.internalChannelParams&&m.internalChannelParams[a]||h}function zp(a){this.Aa=0,this.i=[],this.j=new Gi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=eo("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=eo("baseRetryDelayMs",5e3,a),this.cb=eo("retryDelaySeedMs",1e4,a),this.Wa=eo("forwardChannelMaxRetries",2,a),this.wa=eo("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Ip(a&&a.concurrentRequestLimit),this.Da=new IE,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=zp.prototype,t.la=8,t.G=1,t.connect=function(a,h,m,v){kt(0),this.W=a,this.H=h||{},m&&v!==void 0&&(this.H.OSID=m,this.H.OAID=v),this.F=this.X,this.I=Xp(this,null,this.W),el(this)};function Wu(a){if(qp(a),a.G==3){var h=a.U++,m=qn(a.I);if(ke(m,"SID",a.K),ke(m,"RID",h),ke(m,"TYPE","terminate"),to(a,m),h=new vr(a,a.j,h),h.L=2,h.v=Qa(qn(m)),m=!1,l.navigator&&l.navigator.sendBeacon)try{m=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!m&&l.Image&&(new Image().src=h.v,m=!0),m||(h.g=Zp(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Wa(h)}Jp(a)}function Za(a){a.g&&(Ku(a),a.g.cancel(),a.g=null)}function qp(a){Za(a),a.u&&(l.clearTimeout(a.u),a.u=null),tl(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function el(a){if(!Sp(a.h)&&!a.s){a.s=!0;var h=a.Ga;pn||Z(),z||(pn(),z=!0),q.add(h,a),a.B=0}}function kE(a,h){return Ap(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Wi(p(a.Ga,a,h),Yp(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const L=new vr(this,this.j,a);let V=this.o;if(this.S&&(V?(V=y(V),A(V,this.S)):V=this.S),this.m!==null||this.O||(L.H=V,V=null),this.P)e:{for(var h=0,m=0;m<this.i.length;m++){t:{var v=this.i[m];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(h+=v,4096<h){h=m;break e}if(h===4096||m===this.i.length-1){h=m+1;break e}}h=1e3}else h=1e3;h=Wp(this,L,h),m=qn(this.I),ke(m,"RID",a),ke(m,"CVER",22),this.D&&ke(m,"X-HTTP-Session-Id",this.D),to(this,m),V&&(this.O?h="headers="+encodeURIComponent(String(Op(V)))+"&"+h:this.m&&Hu(m,this.m,V)),qu(this.h,L),this.Ua&&ke(m,"TYPE","init"),this.P?(ke(m,"$req",h),ke(m,"SID","null"),L.T=!0,Uu(L,m,null)):Uu(L,m,h),this.G=2}}else this.G==3&&(a?Hp(this,a):this.i.length==0||Sp(this.h)||Hp(this))};function Hp(a,h){var m;h?m=h.l:m=a.U++;const v=qn(a.I);ke(v,"SID",a.K),ke(v,"RID",m),ke(v,"AID",a.T),to(a,v),a.m&&a.o&&Hu(v,a.m,a.o),m=new vr(a,a.j,m,a.B+1),a.m===null&&(m.H=a.o),h&&(a.i=h.D.concat(a.i)),h=Wp(a,m,1e3),m.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),qu(a.h,m),Uu(m,v,h)}function to(a,h){a.H&&P(a.H,function(m,v){ke(h,v,m)}),a.l&&kp({},function(m,v){ke(h,v,m)})}function Wp(a,h,m){m=Math.min(a.i.length,m);var v=a.l?p(a.l.Na,a.l,a):null;e:{var L=a.i;let V=-1;for(;;){const B=["count="+m];V==-1?0<m?(V=L[0].g,B.push("ofs="+V)):V=0:B.push("ofs="+V);let Ie=!0;for(let ut=0;ut<m;ut++){let me=L[ut].g;const vt=L[ut].map;if(me-=V,0>me)V=Math.max(0,L[ut].g-100),Ie=!1;else try{SE(vt,B,"req"+me+"_")}catch{v&&v(vt)}}if(Ie){v=B.join("&");break e}}}return a=a.i.splice(0,m),h.D=a,v}function Gp(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;pn||Z(),z||(pn(),z=!0),q.add(h,a),a.v=0}}function Gu(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Wi(p(a.Fa,a),Yp(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Kp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Wi(p(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kt(10),Za(this),Kp(this))};function Ku(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Kp(a){a.g=new vr(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=qn(a.qa);ke(h,"RID","rpc"),ke(h,"SID",a.K),ke(h,"AID",a.T),ke(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&ke(h,"TO",a.ja),ke(h,"TYPE","xmlhttp"),to(a,h),a.m&&a.o&&Hu(h,a.m,a.o),a.L&&(a.g.I=a.L);var m=a.g;a=a.ia,m.L=1,m.v=Qa(qn(h)),m.m=null,m.P=!0,xp(m,a)}t.Za=function(){this.C!=null&&(this.C=null,Za(this),Gu(this),kt(19))};function tl(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Qp(a,h){var m=null;if(a.g==h){tl(a),Ku(a),a.g=null;var v=2}else if(zu(a.h,h))m=h.D,Cp(a.h,h),v=1;else return;if(a.G!=0){if(h.o)if(v==1){m=h.m?h.m.length:0,h=Date.now()-h.F;var L=a.B;v=za(),Ne(v,new yp(v,m)),el(a)}else Gp(a);else if(L=h.s,L==3||L==0&&0<h.X||!(v==1&&kE(a,h)||v==2&&Gu(a)))switch(m&&0<m.length&&(h=a.h,h.i=h.i.concat(m)),L){case 1:as(a,5);break;case 4:as(a,10);break;case 3:as(a,6);break;default:as(a,2)}}}function Yp(a,h){let m=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(m*=2),m*h}function as(a,h){if(a.j.info("Error code "+h),h==2){var m=p(a.fb,a),v=a.Xa;const L=!v;v=new os(v||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ga(v,"https"),Qa(v),L?EE(v.toString(),m):TE(v.toString(),m)}else kt(2);a.G=0,a.l&&a.l.sa(h),Jp(a),qp(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function Jp(a){if(a.G=0,a.ka=[],a.l){const h=Np(a.h);(h.length!=0||a.i.length!=0)&&(D(a.ka,h),D(a.ka,a.i),a.h.i.length=0,C(a.i),a.i.length=0),a.l.ra()}}function Xp(a,h,m){var v=m instanceof os?qn(m):new os(m);if(v.g!="")h&&(v.g=h+"."+v.g),Ka(v,v.s);else{var L=l.location;v=L.protocol,h=h?h+"."+L.hostname:L.hostname,L=+L.port;var V=new os(null);v&&Ga(V,v),h&&(V.g=h),L&&Ka(V,L),m&&(V.l=m),v=V}return m=a.D,h=a.ya,m&&h&&ke(v,m,h),ke(v,"VER",a.la),to(a,v),v}function Zp(a,h,m){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new ze(new Ya({eb:m})):new ze(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function eg(){}t=eg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function nl(){}nl.prototype.g=function(a,h){return new qt(a,h)};function qt(a,h){_e.call(this),this.g=new zp(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!E(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!E(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Ms(this)}S(qt,_e),qt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qt.prototype.close=function(){Wu(this.g)},qt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var m={};m.__data__=a,a=m}else this.u&&(m={},m.__data__=Du(a),a=m);h.i.push(new hE(h.Ya++,a)),h.G==3&&el(h)},qt.prototype.N=function(){this.g.l=null,delete this.j,Wu(this.g),delete this.g,qt.aa.N.call(this)};function tg(a){Vu.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const m in h){a=m;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}S(tg,Vu);function ng(){Ou.call(this),this.status=1}S(ng,Ou);function Ms(a){this.g=a}S(Ms,eg),Ms.prototype.ua=function(){Ne(this.g,"a")},Ms.prototype.ta=function(a){Ne(this.g,new tg(a))},Ms.prototype.sa=function(a){Ne(this.g,new ng)},Ms.prototype.ra=function(){Ne(this.g,"b")},nl.prototype.createWebChannel=nl.prototype.g,qt.prototype.send=qt.prototype.o,qt.prototype.open=qt.prototype.m,qt.prototype.close=qt.prototype.close,p1=function(){return new nl},m1=function(){return za()},f1=ss,zh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},qa.NO_ERROR=0,qa.TIMEOUT=8,qa.HTTP_ERROR=6,Hl=qa,vp.COMPLETE="complete",h1=vp,fp.EventType=qi,qi.OPEN="a",qi.CLOSE="b",qi.ERROR="c",qi.MESSAGE="d",_e.prototype.listen=_e.prototype.K,vo=fp,ze.prototype.listenOnce=ze.prototype.L,ze.prototype.getLastError=ze.prototype.Ka,ze.prototype.getLastErrorCode=ze.prototype.Ba,ze.prototype.getStatus=ze.prototype.Z,ze.prototype.getResponseJson=ze.prototype.Oa,ze.prototype.getResponseText=ze.prototype.oa,ze.prototype.send=ze.prototype.ea,ze.prototype.setWithCredentials=ze.prototype.Ha,d1=ze}).apply(typeof El<"u"?El:typeof self<"u"?self:typeof window<"u"?window:{});const zy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tt.UNAUTHENTICATED=new Tt(null),Tt.GOOGLE_CREDENTIALS=new Tt("google-credentials-uid"),Tt.FIRST_PARTY=new Tt("first-party-uid"),Tt.MOCK_USER=new Tt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mi="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss=new cm("@firebase/firestore");function uo(){return Ss.logLevel}function G(t,...e){if(Ss.logLevel<=ce.DEBUG){const n=e.map(Im);Ss.debug(`Firestore (${Mi}): ${t}`,...n)}}function hr(t,...e){if(Ss.logLevel<=ce.ERROR){const n=e.map(Im);Ss.error(`Firestore (${Mi}): ${t}`,...n)}}function As(t,...e){if(Ss.logLevel<=ce.WARN){const n=e.map(Im);Ss.warn(`Firestore (${Mi}): ${t}`,...n)}}function Im(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t="Unexpected state"){const e=`FIRESTORE (${Mi}) INTERNAL ASSERTION FAILED: `+t;throw hr(e),new Error(e)}function Te(t,e){t||Y()}function X(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends pr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class y1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Tt.UNAUTHENTICATED))}shutdown(){}}class DC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class LC{constructor(e){this.t=e,this.currentUser=Tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Te(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new sr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new sr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new sr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Te(typeof r.accessToken=="string"),new g1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Te(e===null||typeof e=="string"),new Tt(e)}}class VC{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Tt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class OC{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new VC(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Tt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class MC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class FC{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Te(this.o===void 0);const r=i=>{i.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Te(typeof n.token=="string"),this.R=n.token,new MC(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UC(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=UC(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function pe(t,e){return t<e?-1:t>e?1:0}function Ei(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new H(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xe.fromMillis(Date.now())}static fromDate(e){return Xe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Xe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.timestamp=e}static fromTimestamp(e){return new J(e)}static min(){return new J(new Xe(0,0))}static max(){return new J(new Xe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n,r){n===void 0?n=0:n>e.length&&Y(),r===void 0?r=e.length-n:r>e.length-n&&Y(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return sa.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof sa?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Pe extends sa{construct(e,n,r){return new Pe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new H(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Pe(n)}static emptyPath(){return new Pe([])}}const BC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ot extends sa{construct(e,n,r){return new ot(e,n,r)}static isValidIdentifier(e){return BC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ot(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new H(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new H(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new H(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new H(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ot(n)}static emptyPath(){return new ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(Pe.fromString(e))}static fromName(e){return new K(Pe.fromString(e).popFirst(5))}static empty(){return new K(Pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Pe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new Pe(e.slice()))}}function $C(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=J.fromTimestamp(r===1e9?new Xe(n+1,0):new Xe(n,r));return new Gr(s,K.empty(),e)}function zC(t){return new Gr(t.readTime,t.key,-1)}class Gr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Gr(J.min(),K.empty(),-1)}static max(){return new Gr(J.max(),K.empty(),-1)}}function qC(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:pe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class WC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Na(t){if(t.code!==O.FAILED_PRECONDITION||t.message!==HC)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(s=>s?M.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new M((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(f=>{o[d]=f,++l,l===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new M((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function GC(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ka(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Am.oe=-1;function ou(t){return t==null}function Cc(t){return t===0&&1/t==-1/0}function KC(t){return typeof t=="number"&&Number.isInteger(t)&&!Cc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function js(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function v1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e,n){this.comparator=e,this.root=n||ht.EMPTY}insert(e,n){return new Be(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ht.BLACK,null,null))}remove(e){return new Be(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ht.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Tl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Tl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Tl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Tl(this.root,e,this.comparator,!0)}}class Tl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ht{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ht.RED,this.left=s??ht.EMPTY,this.right=i??ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new ht(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ht.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Y();const e=this.left.check();if(e!==this.right.check())throw Y();return e+(this.isRed()?0:1)}}ht.EMPTY=null,ht.RED=!0,ht.BLACK=!1;ht.EMPTY=new class{constructor(){this.size=0}get key(){throw Y()}get value(){throw Y()}get color(){throw Y()}get left(){throw Y()}get right(){throw Y()}copy(e,n,r,s,i){return this}insert(e,n,r){return new ht(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.comparator=e,this.data=new Be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Hy(this.data.getIterator())}getIteratorFrom(e){return new Hy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof mt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new mt(this.comparator);return n.data=e,n}}class Hy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.fields=e,e.sort(ot.comparator)}static empty(){return new Kt([])}unionWith(e){let n=new mt(ot.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Kt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ei(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new _1("Invalid base64 string: "+i):i}}(e);return new ct(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new ct(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ct.EMPTY_BYTE_STRING=new ct("");const QC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kr(t){if(Te(!!t),typeof t=="string"){let e=0;const n=QC.exec(t);if(Te(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:We(t.seconds),nanos:We(t.nanos)}}function We(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Cs(t){return typeof t=="string"?ct.fromBase64String(t):ct.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Nm(t){const e=t.mapValue.fields.__previous_value__;return Cm(e)?Nm(e):e}function ia(t){const e=Kr(t.mapValue.fields.__local_write_time__.timestampValue);return new Xe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,n,r,s,i,o,l,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d}}class Ti{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ti("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ti&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ns(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Cm(t)?4:XC(t)?9007199254740991:JC(t)?10:11:Y()}function Un(t,e){if(t===e)return!0;const n=Ns(t);if(n!==Ns(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ia(t).isEqual(ia(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Kr(s.timestampValue),l=Kr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Cs(s.bytesValue).isEqual(Cs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return We(s.geoPointValue.latitude)===We(i.geoPointValue.latitude)&&We(s.geoPointValue.longitude)===We(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return We(s.integerValue)===We(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=We(s.doubleValue),l=We(i.doubleValue);return o===l?Cc(o)===Cc(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Ei(t.arrayValue.values||[],e.arrayValue.values||[],Un);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(qy(o)!==qy(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Un(o[c],l[c])))return!1;return!0}(t,e);default:return Y()}}function oa(t,e){return(t.values||[]).find(n=>Un(n,e))!==void 0}function Ii(t,e){if(t===e)return 0;const n=Ns(t),r=Ns(e);if(n!==r)return pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=We(i.integerValue||i.doubleValue),c=We(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return Wy(t.timestampValue,e.timestampValue);case 4:return Wy(ia(t),ia(e));case 5:return pe(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Cs(i),c=Cs(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let d=0;d<l.length&&d<c.length;d++){const f=pe(l[d],c[d]);if(f!==0)return f}return pe(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=pe(We(i.latitude),We(o.latitude));return l!==0?l:pe(We(i.longitude),We(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Gy(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,c,d,f;const g=i.fields||{},p=o.fields||{},x=(l=g.value)===null||l===void 0?void 0:l.arrayValue,S=(c=p.value)===null||c===void 0?void 0:c.arrayValue,C=pe(((d=x==null?void 0:x.values)===null||d===void 0?void 0:d.length)||0,((f=S==null?void 0:S.values)===null||f===void 0?void 0:f.length)||0);return C!==0?C:Gy(x,S)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Il.mapValue&&o===Il.mapValue)return 0;if(i===Il.mapValue)return 1;if(o===Il.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),d=o.fields||{},f=Object.keys(d);c.sort(),f.sort();for(let g=0;g<c.length&&g<f.length;++g){const p=pe(c[g],f[g]);if(p!==0)return p;const x=Ii(l[c[g]],d[f[g]]);if(x!==0)return x}return pe(c.length,f.length)}(t.mapValue,e.mapValue);default:throw Y()}}function Wy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return pe(t,e);const n=Kr(t),r=Kr(e),s=pe(n.seconds,r.seconds);return s!==0?s:pe(n.nanos,r.nanos)}function Gy(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Ii(n[s],r[s]);if(i)return i}return pe(n.length,r.length)}function Si(t){return qh(t)}function qh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Kr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Cs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return K.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=qh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${qh(n.fields[o])}`;return s+"}"}(t.mapValue):Y()}function Ky(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Hh(t){return!!t&&"integerValue"in t}function km(t){return!!t&&"arrayValue"in t}function Qy(t){return!!t&&"nullValue"in t}function Yy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Wl(t){return!!t&&"mapValue"in t}function JC(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function jo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return js(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=jo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=jo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function XC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.value=e}static empty(){return new Vt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Wl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=jo(n)}setAll(e){let n=ot.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=jo(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Wl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Un(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Wl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){js(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Vt(jo(this.value))}}function w1(t){const e=[];return js(t.fields,(n,r)=>{const s=new ot([n]);if(Wl(r)){const i=w1(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Kt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new St(e,0,J.min(),J.min(),J.min(),Vt.empty(),0)}static newFoundDocument(e,n,r,s){return new St(e,1,n,J.min(),r,s,0)}static newNoDocument(e,n){return new St(e,2,n,J.min(),J.min(),Vt.empty(),0)}static newUnknownDocument(e,n){return new St(e,3,n,J.min(),J.min(),Vt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof St&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new St(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,n){this.position=e,this.inclusive=n}}function Jy(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=K.comparator(K.fromName(o.referenceValue),n.key):r=Ii(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Xy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Un(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,n="asc"){this.field=e,this.dir=n}}function ZC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{}class Ye extends x1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new tN(e,n,r):n==="array-contains"?new sN(e,r):n==="in"?new iN(e,r):n==="not-in"?new oN(e,r):n==="array-contains-any"?new aN(e,r):new Ye(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new nN(e,r):new rN(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ii(n,this.value)):n!==null&&Ns(this.value)===Ns(n)&&this.matchesComparison(Ii(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class kn extends x1{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new kn(e,n)}matches(e){return E1(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function E1(t){return t.op==="and"}function T1(t){return eN(t)&&E1(t)}function eN(t){for(const e of t.filters)if(e instanceof kn)return!1;return!0}function Wh(t){if(t instanceof Ye)return t.field.canonicalString()+t.op.toString()+Si(t.value);if(T1(t))return t.filters.map(e=>Wh(e)).join(",");{const e=t.filters.map(n=>Wh(n)).join(",");return`${t.op}(${e})`}}function I1(t,e){return t instanceof Ye?function(r,s){return s instanceof Ye&&r.op===s.op&&r.field.isEqual(s.field)&&Un(r.value,s.value)}(t,e):t instanceof kn?function(r,s){return s instanceof kn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&I1(o,s.filters[l]),!0):!1}(t,e):void Y()}function S1(t){return t instanceof Ye?function(n){return`${n.field.canonicalString()} ${n.op} ${Si(n.value)}`}(t):t instanceof kn?function(n){return n.op.toString()+" {"+n.getFilters().map(S1).join(" ,")+"}"}(t):"Filter"}class tN extends Ye{constructor(e,n,r){super(e,n,r),this.key=K.fromName(r.referenceValue)}matches(e){const n=K.comparator(e.key,this.key);return this.matchesComparison(n)}}class nN extends Ye{constructor(e,n){super(e,"in",n),this.keys=A1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class rN extends Ye{constructor(e,n){super(e,"not-in",n),this.keys=A1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function A1(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>K.fromName(r.referenceValue))}class sN extends Ye{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return km(n)&&oa(n.arrayValue,this.value)}}class iN extends Ye{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&oa(this.value.arrayValue,n)}}class oN extends Ye{constructor(e,n){super(e,"not-in",n)}matches(e){if(oa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!oa(this.value.arrayValue,n)}}class aN extends Ye{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!km(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>oa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.ue=null}}function Zy(t,e=null,n=[],r=[],s=null,i=null,o=null){return new lN(t,e,n,r,s,i,o)}function Rm(t){const e=X(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Wh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),ou(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Si(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Si(r)).join(",")),e.ue=n}return e.ue}function Pm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!ZC(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!I1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Xy(t.startAt,e.startAt)&&Xy(t.endAt,e.endAt)}function Gh(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function cN(t,e,n,r,s,i,o,l){return new Fi(t,e,n,r,s,i,o,l)}function bm(t){return new Fi(t)}function e0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function C1(t){return t.collectionGroup!==null}function Do(t){const e=X(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new mt(ot.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new aa(i,r))}),n.has(ot.keyField().canonicalString())||e.ce.push(new aa(ot.keyField(),r))}return e.ce}function Mn(t){const e=X(t);return e.le||(e.le=uN(e,Do(t))),e.le}function uN(t,e){if(t.limitType==="F")return Zy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new aa(s.field,i)});const n=t.endAt?new Nc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Nc(t.startAt.position,t.startAt.inclusive):null;return Zy(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Kh(t,e){const n=t.filters.concat([e]);return new Fi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function kc(t,e,n){return new Fi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function au(t,e){return Pm(Mn(t),Mn(e))&&t.limitType===e.limitType}function N1(t){return`${Rm(Mn(t))}|lt:${t.limitType}`}function Bs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>S1(s)).join(", ")}]`),ou(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Si(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Si(s)).join(",")),`Target(${r})`}(Mn(t))}; limitType=${t.limitType})`}function lu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):K.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Do(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const d=Jy(o,l,c);return o.inclusive?d<=0:d<0}(r.startAt,Do(r),s)||r.endAt&&!function(o,l,c){const d=Jy(o,l,c);return o.inclusive?d>=0:d>0}(r.endAt,Do(r),s))}(t,e)}function dN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function k1(t){return(e,n)=>{let r=!1;for(const s of Do(t)){const i=hN(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function hN(t,e,n){const r=t.field.isKeyField()?K.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),d=l.data.field(i);return c!==null&&d!==null?Ii(c,d):Y()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Y()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){js(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return v1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN=new Be(K.comparator);function fr(){return fN}const R1=new Be(K.comparator);function _o(...t){let e=R1;for(const n of t)e=e.insert(n.key,n);return e}function P1(t){let e=R1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ms(){return Lo()}function b1(){return Lo()}function Lo(){return new Ui(t=>t.toString(),(t,e)=>t.isEqual(e))}const mN=new Be(K.comparator),pN=new mt(K.comparator);function ae(...t){let e=pN;for(const n of t)e=e.add(n);return e}const gN=new mt(pe);function yN(){return gN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cc(e)?"-0":e}}function j1(t){return{integerValue:""+t}}function vN(t,e){return KC(e)?j1(e):jm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(){this._=void 0}}function _N(t,e,n){return t instanceof la?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Cm(i)&&(i=Nm(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof ca?L1(t,e):t instanceof ua?V1(t,e):function(s,i){const o=D1(s,i),l=t0(o)+t0(s.Pe);return Hh(o)&&Hh(s.Pe)?j1(l):jm(s.serializer,l)}(t,e)}function wN(t,e,n){return t instanceof ca?L1(t,e):t instanceof ua?V1(t,e):n}function D1(t,e){return t instanceof Rc?function(r){return Hh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class la extends cu{}class ca extends cu{constructor(e){super(),this.elements=e}}function L1(t,e){const n=O1(e);for(const r of t.elements)n.some(s=>Un(s,r))||n.push(r);return{arrayValue:{values:n}}}class ua extends cu{constructor(e){super(),this.elements=e}}function V1(t,e){let n=O1(e);for(const r of t.elements)n=n.filter(s=>!Un(s,r));return{arrayValue:{values:n}}}class Rc extends cu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function t0(t){return We(t.integerValue||t.doubleValue)}function O1(t){return km(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e,n){this.field=e,this.transform=n}}function EN(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ca&&s instanceof ca||r instanceof ua&&s instanceof ua?Ei(r.elements,s.elements,Un):r instanceof Rc&&s instanceof Rc?Un(r.Pe,s.Pe):r instanceof la&&s instanceof la}(t.transform,e.transform)}class TN{constructor(e,n){this.version=e,this.transformResults=n}}class cn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new cn}static exists(e){return new cn(void 0,e)}static updateTime(e){return new cn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class uu{}function M1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Dm(t.key,cn.none()):new Ra(t.key,t.data,cn.none());{const n=t.data,r=Vt.empty();let s=new mt(ot.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ts(t.key,r,new Kt(s.toArray()),cn.none())}}function IN(t,e,n){t instanceof Ra?function(s,i,o){const l=s.value.clone(),c=r0(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof ts?function(s,i,o){if(!Gl(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=r0(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(F1(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Vo(t,e,n,r){return t instanceof Ra?function(i,o,l,c){if(!Gl(i.precondition,o))return l;const d=i.value.clone(),f=s0(i.fieldTransforms,c,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof ts?function(i,o,l,c){if(!Gl(i.precondition,o))return l;const d=s0(i.fieldTransforms,c,o),f=o.data;return f.setAll(F1(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(i,o,l){return Gl(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function SN(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=D1(r.transform,s||null);i!=null&&(n===null&&(n=Vt.empty()),n.set(r.field,i))}return n||null}function n0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ei(r,s,(i,o)=>EN(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ra extends uu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ts extends uu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function F1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function r0(t,e,n){const r=new Map;Te(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,wN(o,l,n[s]))}return r}function s0(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,_N(i,o,e))}return r}class Dm extends uu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class AN extends uu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&IN(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Vo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Vo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=b1();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const c=M1(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ae())}isEqual(e){return this.batchId===e.batchId&&Ei(this.mutations,e.mutations,(n,r)=>n0(n,r))&&Ei(this.baseMutations,e.baseMutations,(n,r)=>n0(n,r))}}class Lm{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Te(e.mutations.length===r.length);let s=function(){return mN}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Lm(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke,de;function RN(t){switch(t){default:return Y();case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0}}function U1(t){if(t===void 0)return hr("GRPC error has no .code"),O.UNKNOWN;switch(t){case Ke.OK:return O.OK;case Ke.CANCELLED:return O.CANCELLED;case Ke.UNKNOWN:return O.UNKNOWN;case Ke.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case Ke.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case Ke.INTERNAL:return O.INTERNAL;case Ke.UNAVAILABLE:return O.UNAVAILABLE;case Ke.UNAUTHENTICATED:return O.UNAUTHENTICATED;case Ke.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case Ke.NOT_FOUND:return O.NOT_FOUND;case Ke.ALREADY_EXISTS:return O.ALREADY_EXISTS;case Ke.PERMISSION_DENIED:return O.PERMISSION_DENIED;case Ke.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case Ke.ABORTED:return O.ABORTED;case Ke.OUT_OF_RANGE:return O.OUT_OF_RANGE;case Ke.UNIMPLEMENTED:return O.UNIMPLEMENTED;case Ke.DATA_LOSS:return O.DATA_LOSS;default:return Y()}}(de=Ke||(Ke={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN=new ys([4294967295,4294967295],0);function i0(t){const e=PN().encode(t),n=new u1;return n.update(e),new Uint8Array(n.digest())}function o0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ys([n,r],0),new ys([s,i],0)]}class Vm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new wo(`Invalid padding: ${n}`);if(r<0)throw new wo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new wo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new wo(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ys.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(ys.fromNumber(r)));return s.compare(bN)===1&&(s=new ys([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=i0(e),[r,s]=o0(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Vm(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=i0(e),[r,s]=o0(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class wo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Pa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new du(J.min(),s,new Be(pe),fr(),ae())}}class Pa{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Pa(r,n,ae(),ae(),ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class B1{constructor(e,n){this.targetId=e,this.me=n}}class $1{constructor(e,n,r=ct.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class a0{constructor(){this.fe=0,this.ge=c0(),this.pe=ct.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ae(),n=ae(),r=ae();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Y()}}),new Pa(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=c0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Te(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class jN{constructor(e){this.Le=e,this.Be=new Map,this.ke=fr(),this.qe=l0(),this.Qe=new Be(pe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Y()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Gh(i))if(r===0){const o=new K(i.path);this.Ue(n,o,St.newNoDocument(o,J.min()))}else Te(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),c=l?this.Xe(l,e,o):1;if(c!==0){this.je(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Cs(r).toUint8Array()}catch(c){if(c instanceof _1)return As("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Vm(o,s,i)}catch(c){return As(c instanceof wo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const l=this.Je(o);if(l){if(i.current&&Gh(l.target)){const c=new K(l.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,St.newNoDocument(c,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=ae();this.qe.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const d=this.Je(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new du(e,n,this.Qe,this.ke,r);return this.ke=fr(),this.qe=l0(),this.Qe=new Be(pe),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new a0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new mt(pe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new a0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function l0(){return new Be(K.comparator)}function c0(){return new Be(K.comparator)}const DN={asc:"ASCENDING",desc:"DESCENDING"},LN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},VN={and:"AND",or:"OR"};class ON{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Qh(t,e){return t.useProto3Json||ou(e)?e:{value:e}}function Pc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function z1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function MN(t,e){return Pc(t,e.toTimestamp())}function Fn(t){return Te(!!t),J.fromTimestamp(function(n){const r=Kr(n);return new Xe(r.seconds,r.nanos)}(t))}function Om(t,e){return Yh(t,e).canonicalString()}function Yh(t,e){const n=function(s){return new Pe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function q1(t){const e=Pe.fromString(t);return Te(Q1(e)),e}function Jh(t,e){return Om(t.databaseId,e.path)}function kd(t,e){const n=q1(e);if(n.get(1)!==t.databaseId.projectId)throw new H(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(W1(n))}function H1(t,e){return Om(t.databaseId,e)}function FN(t){const e=q1(t);return e.length===4?Pe.emptyPath():W1(e)}function Xh(t){return new Pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function W1(t){return Te(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function u0(t,e,n){return{name:Jh(t,e),fields:n.value.mapValue.fields}}function UN(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Y()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(Te(f===void 0||typeof f=="string"),ct.fromBase64String(f||"")):(Te(f===void 0||f instanceof Buffer||f instanceof Uint8Array),ct.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const f=d.code===void 0?O.UNKNOWN:U1(d.code);return new H(f,d.message||"")}(o);n=new $1(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=kd(t,r.document.name),i=Fn(r.document.updateTime),o=r.document.createTime?Fn(r.document.createTime):J.min(),l=new Vt({mapValue:{fields:r.document.fields}}),c=St.newFoundDocument(s,i,o,l),d=r.targetIds||[],f=r.removedTargetIds||[];n=new Kl(d,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=kd(t,r.document),i=r.readTime?Fn(r.readTime):J.min(),o=St.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Kl([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=kd(t,r.document),i=r.removedTargetIds||[];n=new Kl([],i,s,null)}else{if(!("filter"in e))return Y();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new kN(s,i),l=r.targetId;n=new B1(l,o)}}return n}function BN(t,e){let n;if(e instanceof Ra)n={update:u0(t,e.key,e.value)};else if(e instanceof Dm)n={delete:Jh(t,e.key)};else if(e instanceof ts)n={update:u0(t,e.key,e.data),updateMask:YN(e.fieldMask)};else{if(!(e instanceof AN))return Y();n={verify:Jh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof la)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ca)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ua)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Rc)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw Y()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:MN(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Y()}(t,e.precondition)),n}function $N(t,e){return t&&t.length>0?(Te(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Fn(s.updateTime):Fn(i);return o.isEqual(J.min())&&(o=Fn(i)),new TN(o,s.transformResults||[])}(n,e))):[]}function zN(t,e){return{documents:[H1(t,e.path)]}}function qN(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=H1(t,s);const i=function(d){if(d.length!==0)return K1(kn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(p){return{field:$s(p.field),direction:GN(p.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Qh(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function HN(t){let e=FN(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Te(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(g){const p=G1(g);return p instanceof kn&&T1(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(g){return g.map(p=>function(S){return new aa(zs(S.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(p))}(n.orderBy));let l=null;n.limit&&(l=function(g){let p;return p=typeof g=="object"?g.value:g,ou(p)?null:p}(n.limit));let c=null;n.startAt&&(c=function(g){const p=!!g.before,x=g.values||[];return new Nc(x,p)}(n.startAt));let d=null;return n.endAt&&(d=function(g){const p=!g.before,x=g.values||[];return new Nc(x,p)}(n.endAt)),cN(e,s,o,i,l,"F",c,d)}function WN(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function G1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=zs(n.unaryFilter.field);return Ye.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=zs(n.unaryFilter.field);return Ye.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=zs(n.unaryFilter.field);return Ye.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=zs(n.unaryFilter.field);return Ye.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Y()}}(t):t.fieldFilter!==void 0?function(n){return Ye.create(zs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Y()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return kn.create(n.compositeFilter.filters.map(r=>G1(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Y()}}(n.compositeFilter.op))}(t):Y()}function GN(t){return DN[t]}function KN(t){return LN[t]}function QN(t){return VN[t]}function $s(t){return{fieldPath:t.canonicalString()}}function zs(t){return ot.fromServerFormat(t.fieldPath)}function K1(t){return t instanceof Ye?function(n){if(n.op==="=="){if(Yy(n.value))return{unaryFilter:{field:$s(n.field),op:"IS_NAN"}};if(Qy(n.value))return{unaryFilter:{field:$s(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Yy(n.value))return{unaryFilter:{field:$s(n.field),op:"IS_NOT_NAN"}};if(Qy(n.value))return{unaryFilter:{field:$s(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$s(n.field),op:KN(n.op),value:n.value}}}(t):t instanceof kn?function(n){const r=n.getFilters().map(s=>K1(s));return r.length===1?r[0]:{compositeFilter:{op:QN(n.op),filters:r}}}(t):Y()}function YN(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Q1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,n,r,s,i=J.min(),o=J.min(),l=ct.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Rr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Rr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e){this.ct=e}}function XN(t){const e=HN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?kc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(){this.un=new ek}addToCollectionParentIndex(e,n){return this.un.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(Gr.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(Gr.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class ek{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new mt(Pe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new mt(Pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ai(0)}static kn(){return new Ai(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(){this.changes=new Ui(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,St.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Vo(r.mutation,s,Kt.empty(),Xe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ae()){const s=ms();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=_o();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ms();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ae()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=fr();const o=Lo(),l=function(){return Lo()}();return n.forEach((c,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof ts)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),Vo(f.mutation,d,f.mutation.getFieldMask(),Xe.now())):o.set(d.key,Kt.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var g;return l.set(d,new nk(f,(g=o.get(d))!==null&&g!==void 0?g:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Lo();let s=new Be((o,l)=>o-l),i=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let f=r.get(c)||Kt.empty();f=l.applyToLocalView(d,f),r.set(c,f);const g=(s.get(l.batchId)||ae()).add(c);s=s.insert(l.batchId,g)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,f=c.value,g=b1();f.forEach(p=>{if(!i.has(p)){const x=M1(n.get(p),r.get(p));x!==null&&g.set(p,x),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return K.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):C1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):M.resolve(ms());let l=-1,c=i;return o.next(d=>M.forEach(d,(f,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),i.get(f)?M.resolve():this.remoteDocumentCache.getEntry(e,f).next(p=>{c=c.insert(f,p)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,ae())).next(f=>({batchId:l,changes:P1(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(r=>{let s=_o();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=_o();return this.indexManager.getCollectionParents(e,i).next(l=>M.forEach(l,c=>{const d=function(g,p){return new Fi(p,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((g,p)=>{o=o.insert(g,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,St.newInvalidDocument(f)))});let l=_o();return o.forEach((c,d)=>{const f=i.get(c);f!==void 0&&Vo(f.mutation,d,Kt.empty(),Xe.now()),lu(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return M.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Fn(s.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:XN(s.bundledQuery),readTime:Fn(s.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(){this.overlays=new Be(K.comparator),this.Ir=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ms();return M.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const s=ms(),i=n.length+1,o=new K(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return M.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Be((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=ms(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const l=ms(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,f)=>l.set(d,f)),!(l.size()>=s)););return M.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new NN(n,r));let i=this.Ir.get(n);i===void 0&&(i=ae(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(){this.sessionToken=ct.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(){this.Tr=new mt(st.Er),this.dr=new mt(st.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new st(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new st(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new K(new Pe([])),r=new st(n,e),s=new st(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new K(new Pe([])),r=new st(n,e),s=new st(n,e+1);let i=ae();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new st(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class st{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return K.comparator(e.key,n.key)||pe(e.wr,n.wr)}static Ar(e,n){return pe(e.wr,n.wr)||K.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new mt(st.Er)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new CN(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new st(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return M.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new st(n,0),s=new st(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);i.push(l)}),M.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new mt(pe);return n.forEach(s=>{const i=new st(s,0),o=new st(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],l=>{r=r.add(l.wr)})}),M.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;K.isDocumentKey(i)||(i=i.child(""));const o=new st(new K(i),0);let l=new mt(pe);return this.br.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(c.wr)),!0)},o),M.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Te(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return M.forEach(n.mutations,s=>{const i=new st(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new st(n,0),s=this.br.firstAfterOrEqual(r);return M.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e){this.Mr=e,this.docs=function(){return new Be(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():St.newInvalidDocument(n))}getEntries(e,n){let r=fr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():St.newInvalidDocument(s))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=fr();const o=n.path,l=new K(o.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:f}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||qC(zC(f),r)<=0||(s.has(f.key)||lu(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return M.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Y()}Or(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new ck(this)}getSize(e){return M.resolve(this.size)}}class ck extends tk{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e){this.persistence=e,this.Nr=new Ui(n=>Rm(n),Pm),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Mm,this.targetCount=0,this.kr=Ai.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),M.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ai(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Kn(n),M.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),M.waitFor(i).next(()=>s)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),M.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Am(0),this.Kr=!1,this.Kr=!0,this.$r=new ok,this.referenceDelegate=e(this),this.Ur=new uk(this),this.indexManager=new ZN,this.remoteDocumentCache=function(s){return new lk(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new JN(n),this.Gr=new sk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ik,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new ak(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const s=new hk(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return M.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class hk extends WC{constructor(e){super(),this.currentSequenceNumber=e}}class Fm{constructor(e){this.persistence=e,this.Jr=new Mm,this.Yr=null}static Zr(e){return new Fm(e)}get Xr(){if(this.Yr)return this.Yr;throw Y()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),M.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Xr,r=>{const s=K.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,J.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return M.or([()=>M.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ae(),s=ae();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Um(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return wS()?8:GC(Nt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new fk;return this.Xi(e,n,o).next(l=>{if(i.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(uo()<=ce.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",Bs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),M.resolve()):(uo()<=ce.DEBUG&&G("QueryEngine","Query:",Bs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(uo()<=ce.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",Bs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mn(n))):M.resolve())}Yi(e,n){if(e0(n))return M.resolve(null);let r=Mn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=kc(n,null,"F"),r=Mn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ae(...i);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.ts(n,l);return this.ns(n,d,o,c.readTime)?this.Yi(e,kc(n,null,"F")):this.rs(e,d,n,c)}))})))}Zi(e,n,r,s){return e0(n)||s.isEqual(J.min())?M.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?M.resolve(null):(uo()<=ce.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Bs(n)),this.rs(e,o,n,$C(s,-1)).next(l=>l))})}ts(e,n){let r=new mt(k1(e));return n.forEach((s,i)=>{lu(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return uo()<=ce.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",Bs(n)),this.Ji.getDocumentsMatchingQuery(e,n,Gr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Be(pe),this._s=new Ui(i=>Rm(i),Pm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rk(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function gk(t,e,n,r){return new pk(t,e,n,r)}async function Y1(t,e){const n=X(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=ae();for(const d of s){o.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}for(const d of i){l.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(r,c).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:l}))})})}function yk(t,e){const n=X(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,d,f){const g=d.batch,p=g.keys();let x=M.resolve();return p.forEach(S=>{x=x.next(()=>f.getEntry(c,S)).next(C=>{const D=d.docVersions.get(S);Te(D!==null),C.version.compareTo(D)<0&&(g.applyToRemoteDocument(C,d),C.isValidDocument()&&(C.setReadTime(d.commitVersion),f.addEntry(C)))})}),x.next(()=>l.mutationQueue.removeMutationBatch(c,g))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=ae();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function J1(t){const e=X(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function vk(t,e){const n=X(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((f,g)=>{const p=s.get(g);if(!p)return;l.push(n.Ur.removeMatchingKeys(i,f.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(i,f.addedDocuments,g)));let x=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(g)!==null?x=x.withResumeToken(ct.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):f.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(f.resumeToken,r)),s=s.insert(g,x),function(C,D,T){return C.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(p,x,f)&&l.push(n.Ur.updateTargetData(i,x))});let c=fr(),d=ae();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(_k(i,o,e.documentUpdates).next(f=>{c=f.Ps,d=f.Is})),!r.isEqual(J.min())){const f=n.Ur.getLastRemoteSnapshotVersion(i).next(g=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(f)}return M.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.os=s,i))}function _k(t,e,n){let r=ae(),s=ae();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=fr();return n.forEach((l,c)=>{const d=i.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(J.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):G("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{Ps:o,Is:s}})}function wk(t,e){const n=X(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function xk(t,e){const n=X(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,M.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Rr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Zh(t,e,n){const r=X(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ka(o))throw o;G("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function d0(t,e,n){const r=X(t);let s=J.min(),i=ae();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,f){const g=X(c),p=g._s.get(f);return p!==void 0?M.resolve(g.os.get(p)):g.Ur.getTargetData(d,f)}(r,o,Mn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:J.min(),n?i:ae())).next(l=>(Ek(r,dN(e),l),{documents:l,Ts:i})))}function Ek(t,e,n){let r=t.us.get(e)||J.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class h0{constructor(){this.activeTargetIds=yN()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Tk{constructor(){this.so=new h0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new h0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){G("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){G("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sl=null;function Rd(){return Sl===null?Sl=function(){return 268435456+Math.round(2147483648*Math.random())}():Sl++,"0x"+Sl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Et="WebChannelConnection";class Ck extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const l=Rd(),c=this.xo(n,r.toUriEncodedString());G("RestConnection",`Sending RPC '${n}' ${l}:`,c,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,o),this.No(n,c,d,s).then(f=>(G("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw As("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",c,"request:",s),f})}Lo(n,r,s,i,o,l){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Mi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=Sk[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Rd();return new Promise((o,l)=>{const c=new d1;c.setWithCredentials(!0),c.listenOnce(h1.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Hl.NO_ERROR:const f=c.getResponseJson();G(Et,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),o(f);break;case Hl.TIMEOUT:G(Et,`RPC '${e}' ${i} timed out`),l(new H(O.DEADLINE_EXCEEDED,"Request time out"));break;case Hl.HTTP_ERROR:const g=c.getStatus();if(G(Et,`RPC '${e}' ${i} failed with status:`,g,"response text:",c.getResponseText()),g>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);const x=p==null?void 0:p.error;if(x&&x.status&&x.message){const S=function(D){const T=D.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(T)>=0?T:O.UNKNOWN}(x.status);l(new H(S,x.message))}else l(new H(O.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new H(O.UNAVAILABLE,"Connection failed."));break;default:Y()}}finally{G(Et,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);G(Et,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=Rd(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=p1(),l=m1(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const f=i.join("");G(Et,`Creating RPC '${e}' stream ${s}: ${f}`,c);const g=o.createWebChannel(f,c);let p=!1,x=!1;const S=new Ak({Io:D=>{x?G(Et,`Not sending because RPC '${e}' stream ${s} is closed:`,D):(p||(G(Et,`Opening RPC '${e}' stream ${s} transport.`),g.open(),p=!0),G(Et,`RPC '${e}' stream ${s} sending:`,D),g.send(D))},To:()=>g.close()}),C=(D,T,E)=>{D.listen(T,w=>{try{E(w)}catch(k){setTimeout(()=>{throw k},0)}})};return C(g,vo.EventType.OPEN,()=>{x||(G(Et,`RPC '${e}' stream ${s} transport opened.`),S.yo())}),C(g,vo.EventType.CLOSE,()=>{x||(x=!0,G(Et,`RPC '${e}' stream ${s} transport closed`),S.So())}),C(g,vo.EventType.ERROR,D=>{x||(x=!0,As(Et,`RPC '${e}' stream ${s} transport errored:`,D),S.So(new H(O.UNAVAILABLE,"The operation could not be completed")))}),C(g,vo.EventType.MESSAGE,D=>{var T;if(!x){const E=D.data[0];Te(!!E);const w=E,k=w.error||((T=w[0])===null||T===void 0?void 0:T.error);if(k){G(Et,`RPC '${e}' stream ${s} received error:`,k);const j=k.status;let P=function(I){const A=Ke[I];if(A!==void 0)return U1(A)}(j),_=k.message;P===void 0&&(P=O.INTERNAL,_="Unknown error status: "+j+" with message "+k.message),x=!0,S.So(new H(P,_)),g.close()}else G(Et,`RPC '${e}' stream ${s} received:`,E),S.bo(E)}}),C(l,f1.STAT_EVENT,D=>{D.stat===zh.PROXY?G(Et,`RPC '${e}' stream ${s} detected buffering proxy`):D.stat===zh.NOPROXY&&G(Et,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{S.wo()},0),S}}function Pd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hu(t){return new ON(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&G("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,n,r,s,i,o,l,c){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new X1(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===O.RESOURCE_EXHAUSTED?(hr(n.toString()),hr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new H(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return G("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(G("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Nk extends Z1{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=UN(this.serializer,e),r=function(i){if(!("targetChange"in i))return J.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?J.min():o.readTime?Fn(o.readTime):J.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Xh(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=Gh(c)?{documents:zN(i,c)}:{query:qN(i,c)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=z1(i,o.resumeToken);const d=Qh(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(J.min())>0){l.readTime=Pc(i,o.snapshotVersion.toTimestamp());const d=Qh(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=WN(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Xh(this.serializer),n.removeTarget=e,this.a_(n)}}class kk extends Z1{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Te(!!e.streamToken),this.lastStreamToken=e.streamToken,Te(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Te(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=$N(e.writeResults,e.commitTime),r=Fn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Xh(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>BN(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new H(O.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Yh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new H(O.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,Yh(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(O.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Pk{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(hr(n),this.D_=!1):G("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Ds(this)&&(G("RemoteStore","Restarting streams for network reachability change."),await async function(c){const d=X(c);d.L_.add(4),await ba(d),d.q_.set("Unknown"),d.L_.delete(4),await fu(d)}(this))})}),this.q_=new Pk(r,s)}}async function fu(t){if(Ds(t))for(const e of t.B_)await e(!0)}async function ba(t){for(const e of t.B_)await e(!1)}function ex(t,e){const n=X(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),qm(n)?zm(n):Bi(n).r_()&&$m(n,e))}function Bm(t,e){const n=X(t),r=Bi(n);n.N_.delete(e),r.r_()&&tx(n,e),n.N_.size===0&&(r.r_()?r.o_():Ds(n)&&n.q_.set("Unknown"))}function $m(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Bi(t).A_(e)}function tx(t,e){t.Q_.xe(e),Bi(t).R_(e)}function zm(t){t.Q_=new jN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Bi(t).start(),t.q_.v_()}function qm(t){return Ds(t)&&!Bi(t).n_()&&t.N_.size>0}function Ds(t){return X(t).L_.size===0}function nx(t){t.Q_=void 0}async function jk(t){t.q_.set("Online")}async function Dk(t){t.N_.forEach((e,n)=>{$m(t,e)})}async function Lk(t,e){nx(t),qm(t)?(t.q_.M_(e),zm(t)):t.q_.set("Unknown")}async function Vk(t,e,n){if(t.q_.set("Online"),e instanceof $1&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){G("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await bc(t,r)}else if(e instanceof Kl?t.Q_.Ke(e):e instanceof B1?t.Q_.He(e):t.Q_.We(e),!n.isEqual(J.min()))try{const r=await J1(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Q_.rt(o);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const f=i.N_.get(d);f&&i.N_.set(d,f.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,d)=>{const f=i.N_.get(c);if(!f)return;i.N_.set(c,f.withResumeToken(ct.EMPTY_BYTE_STRING,f.snapshotVersion)),tx(i,c);const g=new Rr(f.target,c,d,f.sequenceNumber);$m(i,g)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){G("RemoteStore","Failed to raise snapshot:",r),await bc(t,r)}}async function bc(t,e,n){if(!ka(e))throw e;t.L_.add(1),await ba(t),t.q_.set("Offline"),n||(n=()=>J1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await fu(t)})}function rx(t,e){return e().catch(n=>bc(t,n,e))}async function mu(t){const e=X(t),n=Qr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Ok(e);)try{const s=await wk(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,Mk(e,s)}catch(s){await bc(e,s)}sx(e)&&ix(e)}function Ok(t){return Ds(t)&&t.O_.length<10}function Mk(t,e){t.O_.push(e);const n=Qr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function sx(t){return Ds(t)&&!Qr(t).n_()&&t.O_.length>0}function ix(t){Qr(t).start()}async function Fk(t){Qr(t).p_()}async function Uk(t){const e=Qr(t);for(const n of t.O_)e.m_(n.mutations)}async function Bk(t,e,n){const r=t.O_.shift(),s=Lm.from(r,e,n);await rx(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await mu(t)}async function $k(t,e){e&&Qr(t).V_&&await async function(r,s){if(function(o){return RN(o)&&o!==O.ABORTED}(s.code)){const i=r.O_.shift();Qr(r).s_(),await rx(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await mu(r)}}(t,e),sx(t)&&ix(t)}async function m0(t,e){const n=X(t);n.asyncQueue.verifyOperationInProgress(),G("RemoteStore","RemoteStore received new credentials");const r=Ds(n);n.L_.add(3),await ba(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await fu(n)}async function zk(t,e){const n=X(t);e?(n.L_.delete(2),await fu(n)):e||(n.L_.add(2),await ba(n),n.q_.set("Unknown"))}function Bi(t){return t.K_||(t.K_=function(n,r,s){const i=X(n);return i.w_(),new Nk(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:jk.bind(null,t),Ro:Dk.bind(null,t),mo:Lk.bind(null,t),d_:Vk.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),qm(t)?zm(t):t.q_.set("Unknown")):(await t.K_.stop(),nx(t))})),t.K_}function Qr(t){return t.U_||(t.U_=function(n,r,s){const i=X(n);return i.w_(),new kk(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Fk.bind(null,t),mo:$k.bind(null,t),f_:Uk.bind(null,t),g_:Bk.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await mu(t)):(await t.U_.stop(),t.O_.length>0&&(G("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Hm(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wm(t,e){if(hr("AsyncQueue",`${e}: ${t}`),ka(t))return new H(O.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.comparator=e?(n,r)=>e(n,r)||K.comparator(n.key,r.key):(n,r)=>K.comparator(n.key,r.key),this.keyedMap=_o(),this.sortedSet=new Be(this.comparator)}static emptySet(e){return new hi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof hi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new hi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(){this.W_=new Be(K.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Y():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ci{constructor(e,n,r,s,i,o,l,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Ci(e,n,hi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&au(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Hk{constructor(){this.queries=g0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=X(n),i=s.queries;s.queries=g0(),i.forEach((o,l)=>{for(const c of l.j_)c.onError(r)})})(this,new H(O.ABORTED,"Firestore shutting down"))}}function g0(){return new Ui(t=>N1(t),au)}async function ox(t,e){const n=X(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new qk,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Wm(o,`Initialization of query '${Bs(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Gm(n)}async function ax(t,e){const n=X(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Wk(t,e){const n=X(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&Gm(n)}function Gk(t,e,n){const r=X(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Gm(t){t.Y_.forEach(e=>{e.next()})}var ef,y0;(y0=ef||(ef={})).ea="default",y0.Cache="cache";class lx{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ci(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ci.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==ef.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e){this.key=e}}class ux{constructor(e){this.key=e}}class Kk{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ae(),this.mutatedKeys=ae(),this.Aa=k1(e),this.Ra=new hi(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new p0,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,g)=>{const p=s.get(f),x=lu(this.query,g)?g:null,S=!!p&&this.mutatedKeys.has(p.key),C=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let D=!1;p&&x?p.data.isEqual(x.data)?S!==C&&(r.track({type:3,doc:x}),D=!0):this.ga(p,x)||(r.track({type:2,doc:x}),D=!0,(c&&this.Aa(x,c)>0||d&&this.Aa(x,d)<0)&&(l=!0)):!p&&x?(r.track({type:0,doc:x}),D=!0):p&&!x&&(r.track({type:1,doc:p}),D=!0,(c||d)&&(l=!0)),D&&(x?(o=o.add(x),i=C?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,g)=>function(x,S){const C=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y()}};return C(x)-C(S)}(f.type,g.type)||this.Aa(f.doc,g.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,d=c!==this.Ea;return this.Ea=c,o.length!==0||d?{snapshot:new Ci(this.query,e.Ra,i,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new p0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ae(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new ux(r))}),this.da.forEach(r=>{e.has(r)||n.push(new cx(r))}),n}ba(e){this.Ta=e.Ts,this.da=ae();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ci.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Qk{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Yk{constructor(e){this.key=e,this.va=!1}}class Jk{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ui(l=>N1(l),au),this.Ma=new Map,this.xa=new Set,this.Oa=new Be(K.comparator),this.Na=new Map,this.La=new Mm,this.Ba={},this.ka=new Map,this.qa=Ai.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Xk(t,e,n=!0){const r=gx(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await dx(r,e,n,!0),s}async function Zk(t,e){const n=gx(t);await dx(n,e,!0,!1)}async function dx(t,e,n,r){const s=await xk(t.localStore,Mn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await eR(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&ex(t.remoteStore,s),l}async function eR(t,e,n,r,s){t.Ka=(g,p,x)=>async function(C,D,T,E){let w=D.view.ma(T);w.ns&&(w=await d0(C.localStore,D.query,!1).then(({documents:_})=>D.view.ma(_,w)));const k=E&&E.targetChanges.get(D.targetId),j=E&&E.targetMismatches.get(D.targetId)!=null,P=D.view.applyChanges(w,C.isPrimaryClient,k,j);return _0(C,D.targetId,P.wa),P.snapshot}(t,g,p,x);const i=await d0(t.localStore,e,!0),o=new Kk(e,i.Ts),l=o.ma(i.documents),c=Pa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,c);_0(t,n,d.wa);const f=new Qk(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function tR(t,e,n){const r=X(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!au(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Zh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Bm(r.remoteStore,s.targetId),tf(r,s.targetId)}).catch(Na)):(tf(r,s.targetId),await Zh(r.localStore,s.targetId,!0))}async function nR(t,e){const n=X(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Bm(n.remoteStore,r.targetId))}async function rR(t,e,n){const r=uR(t);try{const s=await function(o,l){const c=X(o),d=Xe.now(),f=l.reduce((x,S)=>x.add(S.key),ae());let g,p;return c.persistence.runTransaction("Locally write mutations","readwrite",x=>{let S=fr(),C=ae();return c.cs.getEntries(x,f).next(D=>{S=D,S.forEach((T,E)=>{E.isValidDocument()||(C=C.add(T))})}).next(()=>c.localDocuments.getOverlayedDocuments(x,S)).next(D=>{g=D;const T=[];for(const E of l){const w=SN(E,g.get(E.key).overlayedDocument);w!=null&&T.push(new ts(E.key,w,w1(w.value.mapValue),cn.exists(!0)))}return c.mutationQueue.addMutationBatch(x,d,T,l)}).next(D=>{p=D;const T=D.applyToLocalDocumentSet(g,C);return c.documentOverlayCache.saveOverlays(x,D.batchId,T)})}).then(()=>({batchId:p.batchId,changes:P1(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let d=o.Ba[o.currentUser.toKey()];d||(d=new Be(pe)),d=d.insert(l,c),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await ja(r,s.changes),await mu(r.remoteStore)}catch(s){const i=Wm(s,"Failed to persist write");n.reject(i)}}async function hx(t,e){const n=X(t);try{const r=await vk(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(Te(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Te(o.va):s.removedDocuments.size>0&&(Te(o.va),o.va=!1))}),await ja(n,r,e)}catch(r){await Na(r)}}function v0(t,e,n){const r=X(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=X(o);c.onlineState=l;let d=!1;c.queries.forEach((f,g)=>{for(const p of g.j_)p.Z_(l)&&(d=!0)}),d&&Gm(c)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function sR(t,e,n){const r=X(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Be(K.comparator);o=o.insert(i,St.newNoDocument(i,J.min()));const l=ae().add(i),c=new du(J.min(),new Map,new Be(pe),o,l);await hx(r,c),r.Oa=r.Oa.remove(i),r.Na.delete(e),Km(r)}else await Zh(r.localStore,e,!1).then(()=>tf(r,e,n)).catch(Na)}async function iR(t,e){const n=X(t),r=e.batch.batchId;try{const s=await yk(n.localStore,e);mx(n,r,null),fx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ja(n,s)}catch(s){await Na(s)}}async function oR(t,e,n){const r=X(t);try{const s=await function(o,l){const c=X(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return c.mutationQueue.lookupMutationBatch(d,l).next(g=>(Te(g!==null),f=g.keys(),c.mutationQueue.removeMutationBatch(d,g))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,f,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>c.localDocuments.getDocuments(d,f))})}(r.localStore,e);mx(r,e,n),fx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ja(r,s)}catch(s){await Na(s)}}function fx(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function mx(t,e,n){const r=X(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function tf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||px(t,r)})}function px(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Bm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Km(t))}function _0(t,e,n){for(const r of n)r instanceof cx?(t.La.addReference(r.key,e),aR(t,r)):r instanceof ux?(G("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||px(t,r.key)):Y()}function aR(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(G("SyncEngine","New document in limbo: "+n),t.xa.add(r),Km(t))}function Km(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new K(Pe.fromString(e)),r=t.qa.next();t.Na.set(r,new Yk(n)),t.Oa=t.Oa.insert(n,r),ex(t.remoteStore,new Rr(Mn(bm(n.path)),r,"TargetPurposeLimboResolution",Am.oe))}}async function ja(t,e,n){const r=X(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,c)=>{o.push(r.Ka(c,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const g=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(d){s.push(d);const g=Um.Wi(c.targetId,d);i.push(g)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(c,d){const f=X(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>M.forEach(d,p=>M.forEach(p.$i,x=>f.persistence.referenceDelegate.addReference(g,p.targetId,x)).next(()=>M.forEach(p.Ui,x=>f.persistence.referenceDelegate.removeReference(g,p.targetId,x)))))}catch(g){if(!ka(g))throw g;G("LocalStore","Failed to update sequence numbers: "+g)}for(const g of d){const p=g.targetId;if(!g.fromCache){const x=f.os.get(p),S=x.snapshotVersion,C=x.withLastLimboFreeSnapshotVersion(S);f.os=f.os.insert(p,C)}}}(r.localStore,i))}async function lR(t,e){const n=X(t);if(!n.currentUser.isEqual(e)){G("SyncEngine","User change. New user:",e.toKey());const r=await Y1(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(l=>{l.forEach(c=>{c.reject(new H(O.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ja(n,r.hs)}}function cR(t,e){const n=X(t),r=n.Na.get(e);if(r&&r.va)return ae().add(r.key);{let s=ae();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function gx(t){const e=X(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=hx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sR.bind(null,e),e.Ca.d_=Wk.bind(null,e.eventManager),e.Ca.$a=Gk.bind(null,e.eventManager),e}function uR(t){const e=X(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oR.bind(null,e),e}class jc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return gk(this.persistence,new mk,e.initialUser,this.serializer)}Ga(e){return new dk(Fm.Zr,this.serializer)}Wa(e){return new Tk}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}jc.provider={build:()=>new jc};class nf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>v0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=lR.bind(null,this.syncEngine),await zk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Hk}()}createDatastore(e){const n=hu(e.databaseInfo.databaseId),r=function(i){return new Ck(i)}(e.databaseInfo);return function(i,o,l,c){return new Rk(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new bk(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>v0(this.syncEngine,n,0),function(){return f0.D()?new f0:new Ik}())}createSyncEngine(e,n){return function(s,i,o,l,c,d,f){const g=new Jk(s,i,o,l,c,d);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=X(s);G("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await ba(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}nf.provider={build:()=>new nf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):hr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Tt.UNAUTHENTICATED,this.clientId=Sm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{G("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(G("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Wm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function bd(t,e){t.asyncQueue.verifyOperationInProgress(),G("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Y1(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function w0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await hR(t);G("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>m0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>m0(e.remoteStore,s)),t._onlineComponents=e}async function hR(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G("FirestoreClient","Using user provided OfflineComponentProvider");try{await bd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===O.FAILED_PRECONDITION||s.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;As("Error using user provided cache. Falling back to memory cache: "+n),await bd(t,new jc)}}else G("FirestoreClient","Using default OfflineComponentProvider"),await bd(t,new jc);return t._offlineComponents}async function vx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G("FirestoreClient","Using user provided OnlineComponentProvider"),await w0(t,t._uninitializedComponentsProvider._online)):(G("FirestoreClient","Using default OnlineComponentProvider"),await w0(t,new nf))),t._onlineComponents}function fR(t){return vx(t).then(e=>e.syncEngine)}async function _x(t){const e=await vx(t),n=e.eventManager;return n.onListen=Xk.bind(null,e.syncEngine),n.onUnlisten=tR.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Zk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=nR.bind(null,e.syncEngine),n}function mR(t,e,n={}){const r=new sr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,d){const f=new yx({next:p=>{f.Za(),o.enqueueAndForget(()=>ax(i,g));const x=p.docs.has(l);!x&&p.fromCache?d.reject(new H(O.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&p.fromCache&&c&&c.source==="server"?d.reject(new H(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(p)},error:p=>d.reject(p)}),g=new lx(bm(l.path),f,{includeMetadataChanges:!0,_a:!0});return ox(i,g)}(await _x(t),t.asyncQueue,e,n,r)),r.promise}function pR(t,e,n={}){const r=new sr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,d){const f=new yx({next:p=>{f.Za(),o.enqueueAndForget(()=>ax(i,g)),p.fromCache&&c.source==="server"?d.reject(new H(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(p)},error:p=>d.reject(p)}),g=new lx(l,f,{includeMetadataChanges:!0,_a:!0});return ox(i,g)}(await _x(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(t,e,n){if(!n)throw new H(O.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Ex(t,e,n,r){if(e===!0&&r===!0)throw new H(O.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function E0(t){if(!K.isDocumentKey(t))throw new H(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function T0(t){if(K.isDocumentKey(t))throw new H(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function pu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y()}function fn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=pu(t);throw new H(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function gR(t,e){if(e<=0)throw new H(O.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new H(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new H(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ex("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new H(O.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new H(O.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new H(O.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new I0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new I0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new y1;switch(r.type){case"firstParty":return new OC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=x0.get(n);r&&(G("ComponentProvider","Removing Datastore"),x0.delete(n),r.terminate())}(this),Promise.resolve()}}function Tx(t,e,n,r={}){var s;const i=(t=fn(t,gu))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&As("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let l,c;if(typeof r.mockUserToken=="string")l=r.mockUserToken,c=Tt.MOCK_USER;else{l=fS(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new H(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Tt(d)}t._authCredentials=new DC(new g1(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new gr(this.firestore,e,this._query)}}class At{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ir(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new At(this.firestore,e,this._key)}}class ir extends gr{constructor(e,n,r){super(e,n,bm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new At(this.firestore,null,new K(e))}withConverter(e){return new ir(this.firestore,e,this._path)}}function Se(t,e,...n){if(t=lt(t),xx("collection","path",e),t instanceof gu){const r=Pe.fromString(e,...n);return T0(r),new ir(t,null,r)}{if(!(t instanceof At||t instanceof ir))throw new H(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Pe.fromString(e,...n));return T0(r),new ir(t.firestore,null,r)}}function pt(t,e,...n){if(t=lt(t),arguments.length===1&&(e=Sm.newId()),xx("doc","path",e),t instanceof gu){const r=Pe.fromString(e,...n);return E0(r),new At(t,null,new K(r))}{if(!(t instanceof At||t instanceof ir))throw new H(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Pe.fromString(e,...n));return E0(r),new At(t.firestore,t instanceof ir?t.converter:null,new K(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new X1(this,"async_queue_retry"),this.Vu=()=>{const r=Pd();r&&G("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Pd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Pd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new sr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ka(e))throw e;G("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw hr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Hm.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Y()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class ns extends gu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new S0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new S0(e),this._firestoreClient=void 0,await e}}}function Ix(t,e){const n=typeof t=="object"?t:uw(),r=typeof t=="string"?t:"(default)",s=dm(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=dS("firestore");i&&Tx(s,...i)}return s}function yu(t){if(t._terminated)throw new H(O.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||yR(t),t._firestoreClient}function yR(t){var e,n,r;const s=t._freezeSettings(),i=function(l,c,d,f){return new YC(l,c,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,wx(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new dR(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ks(ct.fromBase64String(e))}catch(n){throw new H(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ks(ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR=/^__.*__$/;class _R{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ts(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ra(e,this.data,n,this.fieldTransforms)}}class Sx{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ts(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Ax(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y()}}class Qm{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Qm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Dc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Ax(this.Cu)&&vR.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class wR{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||hu(e)}Qu(e,n,r,s=!1){return new Qm({Cu:e,methodName:n,qu:r,path:ot.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wu(t){const e=t._freezeSettings(),n=hu(t._databaseId);return new wR(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Cx(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Jm("Data must be an object, but it was:",o,r);const l=Nx(r,o);let c,d;if(i.merge)c=new Kt(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const g of i.mergeFields){const p=rf(e,g,n);if(!o.contains(p))throw new H(O.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);Rx(f,p)||f.push(p)}c=new Kt(f),d=o.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,d=o.fieldTransforms;return new _R(new Vt(l),c,d)}class xu extends La{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xu}}class Ym extends La{_toFieldTransform(e){return new xN(e.path,new la)}isEqual(e){return e instanceof Ym}}function xR(t,e,n,r){const s=t.Qu(1,e,n);Jm("Data must be an object, but it was:",s,r);const i=[],o=Vt.empty();js(r,(c,d)=>{const f=Xm(e,c,n);d=lt(d);const g=s.Nu(f);if(d instanceof xu)i.push(f);else{const p=Va(d,g);p!=null&&(i.push(f),o.set(f,p))}});const l=new Kt(i);return new Sx(o,l,s.fieldTransforms)}function ER(t,e,n,r,s,i){const o=t.Qu(1,e,n),l=[rf(e,r,n)],c=[s];if(i.length%2!=0)throw new H(O.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)l.push(rf(e,i[p])),c.push(i[p+1]);const d=[],f=Vt.empty();for(let p=l.length-1;p>=0;--p)if(!Rx(d,l[p])){const x=l[p];let S=c[p];S=lt(S);const C=o.Nu(x);if(S instanceof xu)d.push(x);else{const D=Va(S,C);D!=null&&(d.push(x),f.set(x,D))}}const g=new Kt(d);return new Sx(f,g,o.fieldTransforms)}function TR(t,e,n,r=!1){return Va(n,t.Qu(r?4:3,e))}function Va(t,e){if(kx(t=lt(t)))return Jm("Unsupported field value:",e,t),Nx(t,e);if(t instanceof La)return function(r,s){if(!Ax(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=Va(l,s.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=lt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return vN(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Xe.fromDate(r);return{timestampValue:Pc(s.serializer,i)}}if(r instanceof Xe){const i=new Xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Pc(s.serializer,i)}}if(r instanceof vu)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ks)return{bytesValue:z1(s.serializer,r._byteString)};if(r instanceof At){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Om(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof _u)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return jm(l.serializer,c)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${pu(r)}`)}(t,e)}function Nx(t,e){const n={};return v1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):js(t,(r,s)=>{const i=Va(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function kx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xe||t instanceof vu||t instanceof ks||t instanceof At||t instanceof La||t instanceof _u)}function Jm(t,e,n){if(!kx(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=pu(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function rf(t,e,n){if((e=lt(e))instanceof Da)return e._internalPath;if(typeof e=="string")return Xm(t,e);throw Dc("Field path arguments must be of type string or ",t,!1,void 0,n)}const IR=new RegExp("[~\\*/\\[\\]]");function Xm(t,e,n){if(e.search(IR)>=0)throw Dc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Da(...e.split("."))._internalPath}catch{throw Dc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Dc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new H(O.INVALID_ARGUMENT,l+t+c)}function Rx(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new At(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new SR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Eu("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class SR extends Px{data(){return super.data()}}function Eu(t,e){return typeof e=="string"?Xm(t,e):e instanceof Da?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new H(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Zm{}class Tu extends Zm{}function Bt(t,e,...n){let r=[];e instanceof Zm&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof Iu).length,l=i.filter(c=>c instanceof Oa).length;if(o>1||o>0&&l>0)throw new H(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Oa extends Tu{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Oa(e,n,r)}_apply(e){const n=this._parse(e);return bx(e._query,n),new gr(e.firestore,e.converter,Kh(e._query,n))}_parse(e){const n=wu(e.firestore);return function(i,o,l,c,d,f,g){let p;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new H(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){C0(g,f);const x=[];for(const S of g)x.push(A0(c,i,S));p={arrayValue:{values:x}}}else p=A0(c,i,g)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||C0(g,f),p=TR(l,o,g,f==="in"||f==="not-in");return Ye.create(d,f,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ma(t,e,n){const r=e,s=Eu("where",t);return Oa._create(s,r,n)}class Iu extends Zm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Iu(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:kn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const c of l)bx(o,c),o=Kh(o,c)}(e._query,n),new gr(e.firestore,e.converter,Kh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Su extends Tu{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Su(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new H(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new H(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new aa(i,o)}(e._query,this._field,this._direction);return new gr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Fi(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Bn(t,e="asc"){const n=e,r=Eu("orderBy",t);return Su._create(r,n)}class Au extends Tu{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Au(e,n,r)}_apply(e){return new gr(e.firestore,e.converter,kc(e._query,this._limit,this._limitType))}}function Fa(t){return gR("limit",t),Au._create("limit",t,"F")}function A0(t,e,n){if(typeof(n=lt(n))=="string"){if(n==="")throw new H(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!C1(e)&&n.indexOf("/")!==-1)throw new H(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Pe.fromString(n));if(!K.isDocumentKey(r))throw new H(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ky(t,new K(r))}if(n instanceof At)return Ky(t,n._key);throw new H(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pu(n)}.`)}function C0(t,e){if(!Array.isArray(t)||t.length===0)throw new H(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bx(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new H(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class jx{convertValue(e,n="none"){switch(Ns(e)){case 0:return null;case 1:return e.booleanValue;case 2:return We(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Y()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return js(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>We(o.doubleValue));return new _u(i)}convertGeoPoint(e){return new vu(We(e.latitude),We(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Nm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ia(e));default:return null}}convertTimestamp(e){const n=Kr(e);return new Xe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Pe.fromString(e);Te(Q1(r));const s=new Ti(r.get(1),r.get(3)),i=new K(r.popFirst(5));return s.isEqual(n)||hr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ep extends Px{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Oo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Eu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Oo extends ep{data(e={}){return super.data(e)}}class Lx{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ni(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Oo(this._firestore,this._userDataWriter,r.key,r,new ni(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new Oo(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ni(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new Oo(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ni(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:CR(l.type),doc:c,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function CR(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ni(t){t=fn(t,At);const e=fn(t.firestore,ns);return mR(yu(e),t._key).then(n=>NR(e,t,n))}class Vx extends jx{constructor(e){super(),this.firestore=e}convertBytes(e){return new ks(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new At(this.firestore,null,n)}}function Je(t){t=fn(t,gr);const e=fn(t.firestore,ns),n=yu(e),r=new Vx(e);return AR(t._query),pR(n,t._query).then(s=>new Lx(e,r,t,s))}function da(t,e,n){t=fn(t,At);const r=fn(t.firestore,ns),s=Dx(t.converter,e,n);return Ua(r,[Cx(wu(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,cn.none())])}function ha(t,e,n,...r){t=fn(t,At);const s=fn(t.firestore,ns),i=wu(s);let o;return o=typeof(e=lt(e))=="string"||e instanceof Da?ER(i,"updateDoc",t._key,e,n,r):xR(i,"updateDoc",t._key,e),Ua(s,[o.toMutation(t._key,cn.exists(!0))])}function Cu(t){return Ua(fn(t.firestore,ns),[new Dm(t._key,cn.none())])}function nr(t,e){const n=fn(t.firestore,ns),r=pt(t),s=Dx(t.converter,e);return Ua(n,[Cx(wu(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,cn.exists(!1))]).then(()=>r)}function Ua(t,e){return function(r,s){const i=new sr;return r.asyncQueue.enqueueAndForget(async()=>rR(await fR(r),s,i)),i.promise}(yu(t),e)}function NR(t,e,n){const r=n.docs.get(e._key),s=new Vx(t);return new ep(t,s,e._key,r,new ni(n.hasPendingWrites,n.fromCache),e.converter)}function Pt(){return new Ym("serverTimestamp")}(function(e,n=!0){(function(s){Mi=s})(Oi),wi(new Ts("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new ns(new LC(r.getProvider("auth-internal")),new FC(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new H(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ti(d.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),$r(zy,"4.7.3",e),$r(zy,"4.7.3","esm2017")})();const kR=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:jx,Bytes:ks,CollectionReference:ir,DocumentReference:At,DocumentSnapshot:ep,FieldPath:Da,FieldValue:La,Firestore:ns,FirestoreError:H,GeoPoint:vu,Query:gr,QueryCompositeFilterConstraint:Iu,QueryConstraint:Tu,QueryDocumentSnapshot:Oo,QueryFieldFilterConstraint:Oa,QueryLimitConstraint:Au,QueryOrderByConstraint:Su,QuerySnapshot:Lx,SnapshotMetadata:ni,Timestamp:Xe,VectorValue:_u,_AutoId:Sm,_ByteString:ct,_DatabaseId:Ti,_DocumentKey:K,_EmptyAuthCredentialsProvider:y1,_FieldPath:ot,_cast:fn,_logWarn:As,_validateIsNotUsedTogether:Ex,addDoc:nr,collection:Se,connectFirestoreEmulator:Tx,deleteDoc:Cu,doc:pt,ensureFirestoreConfigured:yu,executeWrite:Ua,getDoc:Ni,getDocs:Je,getFirestore:Ix,limit:Fa,orderBy:Bn,query:Bt,serverTimestamp:Pt,setDoc:da,updateDoc:ha,where:Ma},Symbol.toStringTag,{value:"Module"})),sf={apiKey:"AIzaSyC1DYvfAHj41upqQxMndNre6oO2yWZTDPk",authDomain:"ems-adib.firebaseapp.com",projectId:"ems-adib",storageBucket:"ems-adib.appspot.com",messagingSenderId:"691396622033",appId:"1:691396622033:web:8ea0b572e0945024a877f0"};if(!sf.apiKey||!sf.projectId)throw new Error(`Missing Firebase configuration. Please add the following environment variables to your .env file:
  VITE_FIREBASE_API_KEY
  VITE_FIREBASE_AUTH_DOMAIN
  VITE_FIREBASE_PROJECT_ID
  VITE_FIREBASE_STORAGE_BUCKET
  VITE_FIREBASE_MESSAGING_SENDER_ID
  VITE_FIREBASE_APP_ID
Get these values from Firebase Console  Project Settings  Your apps  SDK setup and configuration.`);const Ox=cw(sf),En=c1(Ox);$w(En,wm).then(()=>{}).catch(t=>{});const wn=new jn,RR=s1,PR=e1,te=Ix(Ox);async function N0(t){try{const e=pt(te,"admins",t),n=await Ni(e);if(n.exists())return{id:n.id,...n.data()};const r=Bt(Se(te,"admins"),Ma("id","==",t)),s=await Je(r);if(!s.empty)return s.docs[0].data();const i={id:t,email:"",role:"scanner_admin",created_at:new Date().toISOString()};return await da(e,i),i}catch(e){throw e}}const Mx=F.createContext(void 0);function bR({children:t}){const[e,n]=F.useState(null),[r,s]=F.useState(null),[i,o]=F.useState(!0);F.useEffect(()=>{i1(En).then(C=>{C!=null&&C.user}).catch(C=>{});const S=En.onAuthStateChanged(C=>{n(C??null),C?l(C.uid):(s(null),o(!1))});return()=>S()},[]);const l=async S=>{try{const C=await N0(S);s(C??null)}catch{s(null)}finally{o(!1)}},x={user:e,admin:r,loading:i,signInWithGoogle:async()=>{try{wn.addScope("email"),wn.addScope("profile"),wn.addScope("https://www.googleapis.com/auth/spreadsheets"),wn.addScope("https://www.googleapis.com/auth/gmail.send");try{const S=await PR(En,wn);if(!await N0(S.user.uid))throw await En.signOut(),new Error("Access denied. Contact your administrator to get an account.");const D=(await Po(async()=>{const{GoogleAuthProvider:T}=await Promise.resolve().then(()=>By);return{GoogleAuthProvider:T}},void 0)).GoogleAuthProvider.credentialFromResult(S);if(D!=null&&D.accessToken){localStorage.setItem("google_access_token",D.accessToken);const{doc:T,setDoc:E}=await Po(async()=>{const{doc:k,setDoc:j}=await Promise.resolve().then(()=>kR);return{doc:k,setDoc:j}},void 0),w=T(te,"admins",S.user.uid);await E(w,{google_linked:!0},{merge:!0})}}catch(S){const C=String((S==null?void 0:S.message)??S??"");if(C.includes("popup-blocked")||C.includes("popup-closed-by-user"))throw alert("Popup was blocked. Please allow popups for this site or try again."),S;if(C.includes("provider is not enabled")||C.includes("Unsupported provider"))throw alert("OAuth provider is not enabled. Enable the Google provider in your Firebase Console (Authentication  Sign-in method) and ensure the OAuth client and redirect domains are configured."),S;await RR(En,wn)}}catch(S){const C=String((S==null?void 0:S.message)??S??"");throw(C.includes("provider is not enabled")||C.includes("Unsupported provider"))&&alert("OAuth provider is not enabled. Enable the Google provider in your Firebase Console (Authentication  Sign-in method) and ensure the OAuth client and redirect domains are configured."),S}},signInWithEmail:async(S,C)=>{try{const D=await Bw(En,S,C)}catch(D){throw D.code==="auth/user-not-found"?new Error("No account found with this email"):D.code==="auth/wrong-password"?new Error("Incorrect password"):D.code==="auth/invalid-email"?new Error("Invalid email address"):D}},signUpWithEmail:async(S,C,D)=>{try{const T=await _m(En,S,C),E=pt(te,"admins",T.user.uid);await da(E,{email:S,name:D,role:"scanner_admin",created_at:Pt(),google_linked:!1})}catch(T){throw T.code==="auth/email-already-in-use"?new Error("Email already in use"):T.code==="auth/weak-password"?new Error("Password should be at least 6 characters"):T.code==="auth/invalid-email"?new Error("Invalid email address"):T}},linkGoogleAccount:async()=>{if(!e)throw new Error("No user signed in");try{wn.addScope("email"),wn.addScope("profile"),wn.addScope("https://www.googleapis.com/auth/spreadsheets"),wn.addScope("https://www.googleapis.com/auth/gmail.send");const S=await t1(e,wn),C=(await Po(async()=>{const{GoogleAuthProvider:T}=await Promise.resolve().then(()=>By);return{GoogleAuthProvider:T}},void 0)).GoogleAuthProvider.credentialFromResult(S);C!=null&&C.accessToken&&localStorage.setItem("google_access_token",C.accessToken);const D=pt(te,"admins",e.uid);await da(D,{google_linked:!0},{merge:!0}),await l(e.uid)}catch(S){throw S.code==="auth/provider-already-linked"?new Error("Google account already linked"):S.code==="auth/credential-already-in-use"?new Error("This Google account is already linked to another user"):S}},signOut:async()=>{try{await En.signOut(),n(null),s(null)}catch(S){throw S}},isSuperAdmin:(r==null?void 0:r.role)==="super_admin",isScannerAdmin:(r==null?void 0:r.role)==="scanner_admin",hasGoogleLinked:!!((r==null?void 0:r.google_linked)===!0||e!=null&&e.providerData.some(S=>S.providerId==="google.com"))};return u.jsx(Mx.Provider,{value:x,children:t})}function $i(){const t=F.useContext(Mx);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function ee({variant:t="primary",size:e="md",children:n,isLoading:r=!1,className:s="",disabled:i,...o}){const l="font-medium rounded-xl transition-all duration-200 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed disabled:active:scale-100",c={primary:"bg-gradient-to-br from-[#FFD43B] to-[#FFC107] text-gray-900 hover:shadow-lg hover:shadow-yellow-200",secondary:"bg-white text-gray-900 border border-gray-200 hover:bg-gray-50 hover:shadow-md",danger:"bg-gradient-to-br from-red-500 to-red-600 text-white hover:shadow-lg hover:shadow-red-200",ghost:"bg-transparent text-gray-700 hover:bg-gray-100"},d={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2.5 text-base",lg:"px-6 py-3.5 text-lg"};return u.jsx("button",{className:`${l} ${c[t]} ${d[e]} ${s}`,disabled:i||r,...o,children:r?u.jsx("span",{className:"flex items-center justify-center",children:u.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):n})}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var jR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DR=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ue=(t,e)=>{const n=F.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...d},f)=>F.createElement("svg",{ref:f,...jR,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${DR(t)}`,l].join(" "),...d},[...e.map(([g,p])=>F.createElement(g,p)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LR=ue("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=ue("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const of=ue("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0=ue("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jd=ue("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VR=ue("CameraOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16",key:"qmtpty"}],["path",{d:"M9.5 4h5L17 7h3a2 2 0 0 1 2 2v7.5",key:"1ufyfc"}],["path",{d:"M14.121 15.121A3 3 0 1 1 9.88 10.88",key:"11zox6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const af=ue("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=ue("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nu=ue("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0=ue("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OR=ue("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MR=ue("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FR=ue("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UR=ue("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=ue("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=ue("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BR=ue("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=ue("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $R=ue("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ki=ue("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=ue("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b0=ue("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j0=ue("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zR=ue("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qR=ue("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0=ue("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dd=ue("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=ue("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HR=ue("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WR=ue("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lf=ue("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GR=ue("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const np=ue("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=ue("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KR=ue("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function QR(){const{signInWithGoogle:t,signInWithEmail:e}=$i(),[n,r]=F.useState(!1),[s,i]=F.useState(""),[o,l]=F.useState(""),[c,d]=F.useState(""),f=async()=>{try{r(!0),d(""),await t()}catch(p){d(p.message||"Failed to sign in with Google"),r(!1)}},g=async p=>{if(p.preventDefault(),!s||!o){d("Please fill in all fields");return}try{r(!0),d(""),await e(s,o)}catch(x){d(x.message||"Failed to sign in"),r(!1)}};return u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#F5F5F7] to-[#E8E8ED] flex items-center justify-center p-4",children:u.jsxs("div",{className:"max-w-md w-full",children:[u.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-8 border border-gray-100",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-yellow-400 to-yellow-500 rounded-2xl mb-4 shadow-lg shadow-yellow-200",children:u.jsx(zr,{className:"w-8 h-8 text-white"})}),u.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"QR Pass"}),u.jsx("p",{className:"text-gray-600",children:"Event Invitation & Entry Management"})]}),c&&u.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-xl text-red-600 text-sm",children:c}),u.jsxs("form",{onSubmit:g,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),u.jsxs("div",{className:"relative",children:[u.jsx(ma,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),u.jsx("input",{type:"email",value:s,onChange:p=>i(p.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent",placeholder:"Enter your email",disabled:n})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),u.jsxs("div",{className:"relative",children:[u.jsx(UR,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),u.jsx("input",{type:"password",value:o,onChange:p=>l(p.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent",placeholder:"Enter your password",disabled:n})]})]}),u.jsx(ee,{type:"submit",variant:"primary",size:"lg",className:"w-full",isLoading:n,children:"Sign In"})]}),u.jsxs("div",{className:"my-6 flex items-center",children:[u.jsx("div",{className:"flex-1 border-t border-gray-200"}),u.jsx("span",{className:"px-4 text-sm text-gray-500",children:"or"}),u.jsx("div",{className:"flex-1 border-t border-gray-200"})]}),u.jsx(ee,{variant:"secondary",size:"lg",className:"w-full",onClick:f,isLoading:n,children:u.jsxs("span",{className:"flex items-center justify-center space-x-2",children:[u.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),u.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),u.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),u.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),u.jsx("span",{children:"Continue with Google"})]})}),u.jsx("div",{className:"mt-6 text-center",children:u.jsx("p",{className:"text-xs text-gray-500",children:"Contact your administrator to get access credentials"})})]}),u.jsx("div",{className:"mt-6 text-center text-xs text-gray-500",children:"Powered by Mangrove Esports"})]})})}function ge({children:t,className:e="",hover:n=!1}){return u.jsx("div",{className:`bg-white rounded-2xl shadow-sm border border-gray-100 ${n?"hover:shadow-md transition-shadow duration-200":""} ${e}`,children:t})}function Me({children:t,className:e=""}){return u.jsx("div",{className:`px-6 py-4 border-b border-gray-100 ${e}`,children:t})}function ye({children:t,className:e=""}){return u.jsx("div",{className:`px-6 py-4 ${e}`,children:t})}function L0(){const[t,e]=F.useState({totalEvents:0,totalPasses:0,emailsSent:0,scannedPasses:0}),[n,r]=F.useState([]),[s,i]=F.useState(!0);F.useEffect(()=>{o()},[]);const o=async()=>{try{const c=Se(te,"events"),f=(await Je(c)).size,g=Bt(c,Bn("created_at","desc"),Fa(5)),x=(await Je(g)).docs.map(j=>({id:j.id,...j.data()})),S=Se(te,"passes"),C=await Je(S),D=C.size,T=C.docs.filter(j=>{const P=j.data();return P.used===!0||P.scanned_at}).length,E=Se(te,"email_logs"),k=(await Je(E)).docs.filter(j=>j.data().status==="sent").length;e({totalEvents:f,totalPasses:D,emailsSent:k,scannedPasses:T}),r(x)}catch{}finally{i(!1)}},l=[{title:"Total Events",value:t.totalEvents,icon:zr,color:"text-blue-600",bgColor:"bg-blue-50"},{title:"Passes Generated",value:t.totalPasses,icon:np,color:"text-purple-600",bgColor:"bg-purple-50"},{title:"Emails Sent",value:t.emailsSent,icon:ma,color:"text-green-600",bgColor:"bg-green-50"},{title:"Entries Scanned",value:t.scannedPasses,icon:fa,color:"text-yellow-600",bgColor:"bg-yellow-50"}];return s?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-500"})}):u.jsxs("div",{className:"space-y-4 md:space-y-6",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-1 md:mb-2",children:"Dashboard"}),u.jsx("p",{className:"text-sm md:text-base text-gray-600",children:"Welcome to QR Pass management system"})]}),u.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4",children:l.map(c=>u.jsx(ge,{hover:!0,children:u.jsx(ye,{children:u.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[u.jsxs("div",{className:"mb-2 md:mb-0",children:[u.jsx("p",{className:"text-xs md:text-sm text-gray-600 mb-1",children:c.title}),u.jsx("p",{className:"text-xl md:text-3xl font-bold text-gray-900",children:c.value})]}),u.jsx("div",{className:`${c.bgColor} p-2 md:p-3 rounded-xl self-end md:self-auto`,children:u.jsx(c.icon,{className:`w-4 h-4 md:w-6 md:h-6 ${c.color}`})})]})})},c.title))}),u.jsxs(ge,{children:[u.jsx(Me,{children:u.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-900",children:"Recent Events"})}),u.jsx(ye,{children:n.length===0?u.jsxs("div",{className:"text-center py-6 md:py-8 text-gray-500",children:[u.jsx(zr,{className:"w-10 h-10 md:w-12 md:h-12 mx-auto mb-3 text-gray-300"}),u.jsx("p",{className:"text-sm md:text-base",children:"No events created yet"})]}):u.jsx("div",{className:"space-y-2 md:space-y-3",children:n.map(c=>{var d;return u.jsxs("div",{className:"flex items-center justify-between p-3 md:p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors duration-200 gap-3",children:[u.jsxs("div",{className:"flex items-center space-x-2 md:space-x-3 min-w-0 flex-1",children:[c.logo_url?u.jsx("img",{src:c.logo_url,alt:c.title,className:"w-8 h-8 md:w-10 md:h-10 rounded-lg object-cover flex-shrink-0"}):u.jsx("div",{className:"w-8 h-8 md:w-10 md:h-10 bg-gradient-to-br from-yellow-400 to-yellow-500 rounded-lg flex items-center justify-center flex-shrink-0",children:u.jsx(zr,{className:"w-4 h-4 md:w-6 md:h-6 text-white"})}),u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsx("p",{className:"font-medium text-sm md:text-base text-gray-900 truncate",children:c.title}),u.jsx("p",{className:"text-xs md:text-sm text-gray-500 truncate hidden sm:block",children:c.description})]})]}),u.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0",children:(d=c.created_at)!=null&&d.toDate?c.created_at.toDate().toLocaleDateString(void 0,{month:"short",day:"numeric"}):c.created_at?new Date(c.created_at).toLocaleDateString(void 0,{month:"short",day:"numeric"}):"N/A"})]},c.id)})})})]})]})}const Wt=F.forwardRef(({label:t,error:e,helperText:n,className:r="",...s},i)=>u.jsxs("div",{className:"w-full",children:[t&&u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:t}),u.jsx("input",{ref:i,className:`w-full px-4 py-2.5 bg-white border rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition-all duration-200 ${e?"border-red-300 focus:ring-red-400":"border-gray-200"} ${r}`,...s}),e&&u.jsx("p",{className:"mt-1.5 text-sm text-red-600",children:e}),n&&!e&&u.jsx("p",{className:"mt-1.5 text-sm text-gray-500",children:n})]}));Wt.displayName="Input";function YR(){const{user:t}=$i(),[e,n]=F.useState([]),[r,s]=F.useState(!0),[i,o]=F.useState(!1),[l,c]=F.useState({title:"",description:"",qr_prefix:"QRP",bg_color:"#ffffff",accent_color:"#FFD43B"});F.useEffect(()=>{d()},[]);const d=async()=>{try{const p=Se(te,"events"),x=Bt(p,Bn("created_at","desc")),C=(await Je(x)).docs.map(D=>({id:D.id,...D.data()}));n(C)}catch{}finally{s(!1)}},f=async p=>{if(p.preventDefault(),!!t)try{const x=Se(te,"events");await nr(x,{admin_id:t.uid,title:l.title,description:l.description,qr_prefix:l.qr_prefix,bg_color:l.bg_color,accent_color:l.accent_color,created_at:Pt(),updated_at:Pt()}),o(!1),c({title:"",description:"",qr_prefix:"QRP",bg_color:"#ffffff",accent_color:"#FFD43B"}),d()}catch{}},g=async p=>{if(confirm("Are you sure you want to delete this event? This will also delete all passes."))try{const x=pt(te,"events",p);await Cu(x),d()}catch{}};return r?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-500"})}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Events"}),u.jsx("p",{className:"text-gray-600",children:"Manage your events and generate QR passes"})]}),u.jsxs(ee,{onClick:()=>o(!0),children:[u.jsx(ki,{className:"w-5 h-5 mr-2"}),"Create Event"]})]}),e.length===0?u.jsx(ge,{children:u.jsxs(ye,{className:"py-12 text-center",children:[u.jsx(zr,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No events yet"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"Create your first event to start managing invitations"}),u.jsxs(ee,{onClick:()=>o(!0),children:[u.jsx(ki,{className:"w-5 h-5 mr-2"}),"Create Your First Event"]})]})}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(p=>u.jsx(ge,{hover:!0,children:u.jsxs(ye,{children:[u.jsxs("div",{className:"flex items-start justify-between mb-4",children:[p.logo_url?u.jsx("img",{src:p.logo_url,alt:p.title,className:"w-12 h-12 rounded-lg object-cover"}):u.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center",style:{backgroundColor:p.accent_color},children:u.jsx(zr,{className:"w-6 h-6 text-white"})}),u.jsxs("div",{className:"flex space-x-2",children:[u.jsx("button",{className:"text-gray-400 hover:text-yellow-600 transition-colors",children:u.jsx($R,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>g(p.id),className:"text-gray-400 hover:text-red-600 transition-colors",children:u.jsx(tp,{className:"w-4 h-4"})})]})]}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:p.title}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:p.description}),u.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[u.jsxs("span",{children:["Prefix: ",p.qr_prefix]}),u.jsx("span",{children:p.created_at?new Date(p.created_at).toLocaleDateString():"N/A"})]})]})},p.id))}),i&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:u.jsxs(ge,{className:"w-full max-w-md",children:[u.jsx(Me,{children:u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Create New Event"})}),u.jsxs("form",{onSubmit:f,children:[u.jsxs(ye,{className:"space-y-4",children:[u.jsx(Wt,{label:"Event Title",placeholder:"Summer Concert 2025",value:l.title,onChange:p=>c({...l,title:p.target.value}),required:!0}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Description"}),u.jsx("textarea",{className:"w-full px-4 py-2.5 bg-white border border-gray-200 rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition-all duration-200",placeholder:"Event description",rows:3,value:l.description,onChange:p=>c({...l,description:p.target.value})})]}),u.jsx(Wt,{label:"QR Code Prefix",placeholder:"QRP",value:l.qr_prefix,onChange:p=>c({...l,qr_prefix:p.target.value.toUpperCase()}),maxLength:4,helperText:"4 characters max (e.g., FFBD)",required:!0}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Background Color"}),u.jsx("input",{type:"color",value:l.bg_color,onChange:p=>c({...l,bg_color:p.target.value}),className:"w-full h-10 rounded-lg border border-gray-200"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Accent Color"}),u.jsx("input",{type:"color",value:l.accent_color,onChange:p=>c({...l,accent_color:p.target.value}),className:"w-full h-10 rounded-lg border border-gray-200"})]})]})]}),u.jsxs("div",{className:"px-6 py-4 border-t border-gray-100 flex justify-end space-x-3",children:[u.jsx(ee,{type:"button",variant:"ghost",onClick:()=>o(!1),children:"Cancel"}),u.jsx(ee,{type:"submit",children:"Create Event"})]})]})]})})]})}var Ba={},JR=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},$x={},Zt={};let rp;const XR=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Zt.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};Zt.getSymbolTotalCodewords=function(e){return XR[e]};Zt.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};Zt.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');rp=e};Zt.isKanjiModeEnabled=function(){return typeof rp<"u"};Zt.toSJIS=function(e){return rp(e)};var ku={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+n)}}t.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},t.from=function(r,s){if(t.isValid(r))return r;try{return e(r)}catch{return s}}})(ku);function zx(){this.buffer=[],this.length=0}zx.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let n=0;n<e;n++)this.putBit((t>>>e-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var ZR=zx;function $a(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}$a.prototype.set=function(t,e,n,r){const s=t*this.size+e;this.data[s]=n,r&&(this.reservedBit[s]=!0)};$a.prototype.get=function(t,e){return this.data[t*this.size+e]};$a.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n};$a.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var eP=$a,qx={};(function(t){const e=Zt.getSymbolSize;t.getRowColCoords=function(r){if(r===1)return[];const s=Math.floor(r/7)+2,i=e(r),o=i===145?26:Math.ceil((i-13)/(2*s-2))*2,l=[i-7];for(let c=1;c<s-1;c++)l[c]=l[c-1]-o;return l.push(6),l.reverse()},t.getPositions=function(r){const s=[],i=t.getRowColCoords(r),o=i.length;for(let l=0;l<o;l++)for(let c=0;c<o;c++)l===0&&c===0||l===0&&c===o-1||l===o-1&&c===0||s.push([i[l],i[c]]);return s}})(qx);var Hx={};const tP=Zt.getSymbolSize,V0=7;Hx.getPositions=function(e){const n=tP(e);return[[0,0],[n-V0,0],[0,n-V0]]};var Wx={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},t.from=function(s){return t.isValid(s)?parseInt(s,10):void 0},t.getPenaltyN1=function(s){const i=s.size;let o=0,l=0,c=0,d=null,f=null;for(let g=0;g<i;g++){l=c=0,d=f=null;for(let p=0;p<i;p++){let x=s.get(g,p);x===d?l++:(l>=5&&(o+=e.N1+(l-5)),d=x,l=1),x=s.get(p,g),x===f?c++:(c>=5&&(o+=e.N1+(c-5)),f=x,c=1)}l>=5&&(o+=e.N1+(l-5)),c>=5&&(o+=e.N1+(c-5))}return o},t.getPenaltyN2=function(s){const i=s.size;let o=0;for(let l=0;l<i-1;l++)for(let c=0;c<i-1;c++){const d=s.get(l,c)+s.get(l,c+1)+s.get(l+1,c)+s.get(l+1,c+1);(d===4||d===0)&&o++}return o*e.N2},t.getPenaltyN3=function(s){const i=s.size;let o=0,l=0,c=0;for(let d=0;d<i;d++){l=c=0;for(let f=0;f<i;f++)l=l<<1&2047|s.get(d,f),f>=10&&(l===1488||l===93)&&o++,c=c<<1&2047|s.get(f,d),f>=10&&(c===1488||c===93)&&o++}return o*e.N3},t.getPenaltyN4=function(s){let i=0;const o=s.data.length;for(let c=0;c<o;c++)i+=s.data[c];return Math.abs(Math.ceil(i*100/o/5)-10)*e.N4};function n(r,s,i){switch(r){case t.Patterns.PATTERN000:return(s+i)%2===0;case t.Patterns.PATTERN001:return s%2===0;case t.Patterns.PATTERN010:return i%3===0;case t.Patterns.PATTERN011:return(s+i)%3===0;case t.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(i/3))%2===0;case t.Patterns.PATTERN101:return s*i%2+s*i%3===0;case t.Patterns.PATTERN110:return(s*i%2+s*i%3)%2===0;case t.Patterns.PATTERN111:return(s*i%3+(s+i)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}t.applyMask=function(s,i){const o=i.size;for(let l=0;l<o;l++)for(let c=0;c<o;c++)i.isReserved(c,l)||i.xor(c,l,n(s,c,l))},t.getBestMask=function(s,i){const o=Object.keys(t.Patterns).length;let l=0,c=1/0;for(let d=0;d<o;d++){i(d),t.applyMask(d,s);const f=t.getPenaltyN1(s)+t.getPenaltyN2(s)+t.getPenaltyN3(s)+t.getPenaltyN4(s);t.applyMask(d,s),f<c&&(c=f,l=d)}return l}})(Wx);var Ru={};const Pr=ku,Al=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Cl=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Ru.getBlocksCount=function(e,n){switch(n){case Pr.L:return Al[(e-1)*4+0];case Pr.M:return Al[(e-1)*4+1];case Pr.Q:return Al[(e-1)*4+2];case Pr.H:return Al[(e-1)*4+3];default:return}};Ru.getTotalCodewordsCount=function(e,n){switch(n){case Pr.L:return Cl[(e-1)*4+0];case Pr.M:return Cl[(e-1)*4+1];case Pr.Q:return Cl[(e-1)*4+2];case Pr.H:return Cl[(e-1)*4+3];default:return}};var Gx={},Pu={};const Mo=new Uint8Array(512),Lc=new Uint8Array(256);(function(){let e=1;for(let n=0;n<255;n++)Mo[n]=e,Lc[e]=n,e<<=1,e&256&&(e^=285);for(let n=255;n<512;n++)Mo[n]=Mo[n-255]})();Pu.log=function(e){if(e<1)throw new Error("log("+e+")");return Lc[e]};Pu.exp=function(e){return Mo[e]};Pu.mul=function(e,n){return e===0||n===0?0:Mo[Lc[e]+Lc[n]]};(function(t){const e=Pu;t.mul=function(r,s){const i=new Uint8Array(r.length+s.length-1);for(let o=0;o<r.length;o++)for(let l=0;l<s.length;l++)i[o+l]^=e.mul(r[o],s[l]);return i},t.mod=function(r,s){let i=new Uint8Array(r);for(;i.length-s.length>=0;){const o=i[0];for(let c=0;c<s.length;c++)i[c]^=e.mul(s[c],o);let l=0;for(;l<i.length&&i[l]===0;)l++;i=i.slice(l)}return i},t.generateECPolynomial=function(r){let s=new Uint8Array([1]);for(let i=0;i<r;i++)s=t.mul(s,new Uint8Array([1,e.exp(i)]));return s}})(Gx);const Kx=Gx;function sp(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}sp.prototype.initialize=function(e){this.degree=e,this.genPoly=Kx.generateECPolynomial(this.degree)};sp.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(e.length+this.degree);n.set(e);const r=Kx.mod(n,this.genPoly),s=this.degree-r.length;if(s>0){const i=new Uint8Array(this.degree);return i.set(r,s),i}return r};var nP=sp,Qx={},rs={},ip={};ip.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var zn={};const Yx="[0-9]+",rP="[A-Z $%*+\\-./:]+";let pa="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";pa=pa.replace(/u/g,"\\u");const sP="(?:(?![A-Z0-9 $%*+\\-./:]|"+pa+`)(?:.|[\r
]))+`;zn.KANJI=new RegExp(pa,"g");zn.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");zn.BYTE=new RegExp(sP,"g");zn.NUMERIC=new RegExp(Yx,"g");zn.ALPHANUMERIC=new RegExp(rP,"g");const iP=new RegExp("^"+pa+"$"),oP=new RegExp("^"+Yx+"$"),aP=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");zn.testKanji=function(e){return iP.test(e)};zn.testNumeric=function(e){return oP.test(e)};zn.testAlphanumeric=function(e){return aP.test(e)};(function(t){const e=ip,n=zn;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(i,o){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?i.ccBits[0]:o<27?i.ccBits[1]:i.ccBits[2]},t.getBestModeForData=function(i){return n.testNumeric(i)?t.NUMERIC:n.testAlphanumeric(i)?t.ALPHANUMERIC:n.testKanji(i)?t.KANJI:t.BYTE},t.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},t.isValid=function(i){return i&&i.bit&&i.ccBits};function r(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+s)}}t.from=function(i,o){if(t.isValid(i))return i;try{return r(i)}catch{return o}}})(rs);(function(t){const e=Zt,n=Ru,r=ku,s=rs,i=ip,o=7973,l=e.getBCHDigit(o);function c(p,x,S){for(let C=1;C<=40;C++)if(x<=t.getCapacity(C,S,p))return C}function d(p,x){return s.getCharCountIndicator(p,x)+4}function f(p,x){let S=0;return p.forEach(function(C){const D=d(C.mode,x);S+=D+C.getBitsLength()}),S}function g(p,x){for(let S=1;S<=40;S++)if(f(p,S)<=t.getCapacity(S,x,s.MIXED))return S}t.from=function(x,S){return i.isValid(x)?parseInt(x,10):S},t.getCapacity=function(x,S,C){if(!i.isValid(x))throw new Error("Invalid QR Code version");typeof C>"u"&&(C=s.BYTE);const D=e.getSymbolTotalCodewords(x),T=n.getTotalCodewordsCount(x,S),E=(D-T)*8;if(C===s.MIXED)return E;const w=E-d(C,x);switch(C){case s.NUMERIC:return Math.floor(w/10*3);case s.ALPHANUMERIC:return Math.floor(w/11*2);case s.KANJI:return Math.floor(w/13);case s.BYTE:default:return Math.floor(w/8)}},t.getBestVersionForData=function(x,S){let C;const D=r.from(S,r.M);if(Array.isArray(x)){if(x.length>1)return g(x,D);if(x.length===0)return 1;C=x[0]}else C=x;return c(C.mode,C.getLength(),D)},t.getEncodedBits=function(x){if(!i.isValid(x)||x<7)throw new Error("Invalid QR Code version");let S=x<<12;for(;e.getBCHDigit(S)-l>=0;)S^=o<<e.getBCHDigit(S)-l;return x<<12|S}})(Qx);var Jx={};const cf=Zt,Xx=1335,lP=21522,O0=cf.getBCHDigit(Xx);Jx.getEncodedBits=function(e,n){const r=e.bit<<3|n;let s=r<<10;for(;cf.getBCHDigit(s)-O0>=0;)s^=Xx<<cf.getBCHDigit(s)-O0;return(r<<10|s)^lP};var Zx={};const cP=rs;function Ri(t){this.mode=cP.NUMERIC,this.data=t.toString()}Ri.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};Ri.prototype.getLength=function(){return this.data.length};Ri.prototype.getBitsLength=function(){return Ri.getBitsLength(this.data.length)};Ri.prototype.write=function(e){let n,r,s;for(n=0;n+3<=this.data.length;n+=3)r=this.data.substr(n,3),s=parseInt(r,10),e.put(s,10);const i=this.data.length-n;i>0&&(r=this.data.substr(n),s=parseInt(r,10),e.put(s,i*3+1))};var uP=Ri;const dP=rs,Ld=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Pi(t){this.mode=dP.ALPHANUMERIC,this.data=t}Pi.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};Pi.prototype.getLength=function(){return this.data.length};Pi.prototype.getBitsLength=function(){return Pi.getBitsLength(this.data.length)};Pi.prototype.write=function(e){let n;for(n=0;n+2<=this.data.length;n+=2){let r=Ld.indexOf(this.data[n])*45;r+=Ld.indexOf(this.data[n+1]),e.put(r,11)}this.data.length%2&&e.put(Ld.indexOf(this.data[n]),6)};var hP=Pi;const fP=rs;function bi(t){this.mode=fP.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}bi.getBitsLength=function(e){return e*8};bi.prototype.getLength=function(){return this.data.length};bi.prototype.getBitsLength=function(){return bi.getBitsLength(this.data.length)};bi.prototype.write=function(t){for(let e=0,n=this.data.length;e<n;e++)t.put(this.data[e],8)};var mP=bi;const pP=rs,gP=Zt;function ji(t){this.mode=pP.KANJI,this.data=t}ji.getBitsLength=function(e){return e*13};ji.prototype.getLength=function(){return this.data.length};ji.prototype.getBitsLength=function(){return ji.getBitsLength(this.data.length)};ji.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let n=gP.toSJIS(this.data[e]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),t.put(n,13)}};var yP=ji,eE={exports:{}};(function(t){var e={single_source_shortest_paths:function(n,r,s){var i={},o={};o[r]=0;var l=e.PriorityQueue.make();l.push(r,0);for(var c,d,f,g,p,x,S,C,D;!l.empty();){c=l.pop(),d=c.value,g=c.cost,p=n[d]||{};for(f in p)p.hasOwnProperty(f)&&(x=p[f],S=g+x,C=o[f],D=typeof o[f]>"u",(D||C>S)&&(o[f]=S,l.push(f,S),i[f]=d))}if(typeof s<"u"&&typeof o[s]>"u"){var T=["Could not find a path from ",r," to ",s,"."].join("");throw new Error(T)}return i},extract_shortest_path_from_predecessor_list:function(n,r){for(var s=[],i=r;i;)s.push(i),n[i],i=n[i];return s.reverse(),s},find_path:function(n,r,s){var i=e.single_source_shortest_paths(n,r,s);return e.extract_shortest_path_from_predecessor_list(i,s)},PriorityQueue:{make:function(n){var r=e.PriorityQueue,s={},i;n=n||{};for(i in r)r.hasOwnProperty(i)&&(s[i]=r[i]);return s.queue=[],s.sorter=n.sorter||r.default_sorter,s},default_sorter:function(n,r){return n.cost-r.cost},push:function(n,r){var s={value:n,cost:r};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(eE);var vP=eE.exports;(function(t){const e=rs,n=uP,r=hP,s=mP,i=yP,o=zn,l=Zt,c=vP;function d(T){return unescape(encodeURIComponent(T)).length}function f(T,E,w){const k=[];let j;for(;(j=T.exec(w))!==null;)k.push({data:j[0],index:j.index,mode:E,length:j[0].length});return k}function g(T){const E=f(o.NUMERIC,e.NUMERIC,T),w=f(o.ALPHANUMERIC,e.ALPHANUMERIC,T);let k,j;return l.isKanjiModeEnabled()?(k=f(o.BYTE,e.BYTE,T),j=f(o.KANJI,e.KANJI,T)):(k=f(o.BYTE_KANJI,e.BYTE,T),j=[]),E.concat(w,k,j).sort(function(_,y){return _.index-y.index}).map(function(_){return{data:_.data,mode:_.mode,length:_.length}})}function p(T,E){switch(E){case e.NUMERIC:return n.getBitsLength(T);case e.ALPHANUMERIC:return r.getBitsLength(T);case e.KANJI:return i.getBitsLength(T);case e.BYTE:return s.getBitsLength(T)}}function x(T){return T.reduce(function(E,w){const k=E.length-1>=0?E[E.length-1]:null;return k&&k.mode===w.mode?(E[E.length-1].data+=w.data,E):(E.push(w),E)},[])}function S(T){const E=[];for(let w=0;w<T.length;w++){const k=T[w];switch(k.mode){case e.NUMERIC:E.push([k,{data:k.data,mode:e.ALPHANUMERIC,length:k.length},{data:k.data,mode:e.BYTE,length:k.length}]);break;case e.ALPHANUMERIC:E.push([k,{data:k.data,mode:e.BYTE,length:k.length}]);break;case e.KANJI:E.push([k,{data:k.data,mode:e.BYTE,length:d(k.data)}]);break;case e.BYTE:E.push([{data:k.data,mode:e.BYTE,length:d(k.data)}])}}return E}function C(T,E){const w={},k={start:{}};let j=["start"];for(let P=0;P<T.length;P++){const _=T[P],y=[];for(let I=0;I<_.length;I++){const A=_[I],R=""+P+I;y.push(R),w[R]={node:A,lastCount:0},k[R]={};for(let b=0;b<j.length;b++){const N=j[b];w[N]&&w[N].node.mode===A.mode?(k[N][R]=p(w[N].lastCount+A.length,A.mode)-p(w[N].lastCount,A.mode),w[N].lastCount+=A.length):(w[N]&&(w[N].lastCount=A.length),k[N][R]=p(A.length,A.mode)+4+e.getCharCountIndicator(A.mode,E))}}j=y}for(let P=0;P<j.length;P++)k[j[P]].end=0;return{map:k,table:w}}function D(T,E){let w;const k=e.getBestModeForData(T);if(w=e.from(E,k),w!==e.BYTE&&w.bit<k.bit)throw new Error('"'+T+'" cannot be encoded with mode '+e.toString(w)+`.
 Suggested mode is: `+e.toString(k));switch(w===e.KANJI&&!l.isKanjiModeEnabled()&&(w=e.BYTE),w){case e.NUMERIC:return new n(T);case e.ALPHANUMERIC:return new r(T);case e.KANJI:return new i(T);case e.BYTE:return new s(T)}}t.fromArray=function(E){return E.reduce(function(w,k){return typeof k=="string"?w.push(D(k,null)):k.data&&w.push(D(k.data,k.mode)),w},[])},t.fromString=function(E,w){const k=g(E,l.isKanjiModeEnabled()),j=S(k),P=C(j,w),_=c.find_path(P.map,"start","end"),y=[];for(let I=1;I<_.length-1;I++)y.push(P.table[_[I]].node);return t.fromArray(x(y))},t.rawSplit=function(E){return t.fromArray(g(E,l.isKanjiModeEnabled()))}})(Zx);const bu=Zt,Vd=ku,_P=ZR,wP=eP,xP=qx,EP=Hx,uf=Wx,df=Ru,TP=nP,Vc=Qx,IP=Jx,SP=rs,Od=Zx;function AP(t,e){const n=t.size,r=EP.getPositions(e);for(let s=0;s<r.length;s++){const i=r[s][0],o=r[s][1];for(let l=-1;l<=7;l++)if(!(i+l<=-1||n<=i+l))for(let c=-1;c<=7;c++)o+c<=-1||n<=o+c||(l>=0&&l<=6&&(c===0||c===6)||c>=0&&c<=6&&(l===0||l===6)||l>=2&&l<=4&&c>=2&&c<=4?t.set(i+l,o+c,!0,!0):t.set(i+l,o+c,!1,!0))}}function CP(t){const e=t.size;for(let n=8;n<e-8;n++){const r=n%2===0;t.set(n,6,r,!0),t.set(6,n,r,!0)}}function NP(t,e){const n=xP.getPositions(e);for(let r=0;r<n.length;r++){const s=n[r][0],i=n[r][1];for(let o=-2;o<=2;o++)for(let l=-2;l<=2;l++)o===-2||o===2||l===-2||l===2||o===0&&l===0?t.set(s+o,i+l,!0,!0):t.set(s+o,i+l,!1,!0)}}function kP(t,e){const n=t.size,r=Vc.getEncodedBits(e);let s,i,o;for(let l=0;l<18;l++)s=Math.floor(l/3),i=l%3+n-8-3,o=(r>>l&1)===1,t.set(s,i,o,!0),t.set(i,s,o,!0)}function Md(t,e,n){const r=t.size,s=IP.getEncodedBits(e,n);let i,o;for(i=0;i<15;i++)o=(s>>i&1)===1,i<6?t.set(i,8,o,!0):i<8?t.set(i+1,8,o,!0):t.set(r-15+i,8,o,!0),i<8?t.set(8,r-i-1,o,!0):i<9?t.set(8,15-i-1+1,o,!0):t.set(8,15-i-1,o,!0);t.set(r-8,8,1,!0)}function RP(t,e){const n=t.size;let r=-1,s=n-1,i=7,o=0;for(let l=n-1;l>0;l-=2)for(l===6&&l--;;){for(let c=0;c<2;c++)if(!t.isReserved(s,l-c)){let d=!1;o<e.length&&(d=(e[o]>>>i&1)===1),t.set(s,l-c,d),i--,i===-1&&(o++,i=7)}if(s+=r,s<0||n<=s){s-=r,r=-r;break}}}function PP(t,e,n){const r=new _P;n.forEach(function(c){r.put(c.mode.bit,4),r.put(c.getLength(),SP.getCharCountIndicator(c.mode,t)),c.write(r)});const s=bu.getSymbolTotalCodewords(t),i=df.getTotalCodewordsCount(t,e),o=(s-i)*8;for(r.getLengthInBits()+4<=o&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);const l=(o-r.getLengthInBits())/8;for(let c=0;c<l;c++)r.put(c%2?17:236,8);return bP(r,t,e)}function bP(t,e,n){const r=bu.getSymbolTotalCodewords(e),s=df.getTotalCodewordsCount(e,n),i=r-s,o=df.getBlocksCount(e,n),l=r%o,c=o-l,d=Math.floor(r/o),f=Math.floor(i/o),g=f+1,p=d-f,x=new TP(p);let S=0;const C=new Array(o),D=new Array(o);let T=0;const E=new Uint8Array(t.buffer);for(let _=0;_<o;_++){const y=_<c?f:g;C[_]=E.slice(S,S+y),D[_]=x.encode(C[_]),S+=y,T=Math.max(T,y)}const w=new Uint8Array(r);let k=0,j,P;for(j=0;j<T;j++)for(P=0;P<o;P++)j<C[P].length&&(w[k++]=C[P][j]);for(j=0;j<p;j++)for(P=0;P<o;P++)w[k++]=D[P][j];return w}function jP(t,e,n,r){let s;if(Array.isArray(t))s=Od.fromArray(t);else if(typeof t=="string"){let d=e;if(!d){const f=Od.rawSplit(t);d=Vc.getBestVersionForData(f,n)}s=Od.fromString(t,d||40)}else throw new Error("Invalid data");const i=Vc.getBestVersionForData(s,n);if(!i)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=i;else if(e<i)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+i+`.
`);const o=PP(e,n,s),l=bu.getSymbolSize(e),c=new wP(l);return AP(c,e),CP(c),NP(c,e),Md(c,n,0),e>=7&&kP(c,e),RP(c,o),isNaN(r)&&(r=uf.getBestMask(c,Md.bind(null,c,n))),uf.applyMask(r,c),Md(c,n,r),{modules:c,version:e,errorCorrectionLevel:n,maskPattern:r,segments:s}}$x.create=function(e,n){if(typeof e>"u"||e==="")throw new Error("No input text");let r=Vd.M,s,i;return typeof n<"u"&&(r=Vd.from(n.errorCorrectionLevel,Vd.M),s=Vc.from(n.version),i=uf.from(n.maskPattern),n.toSJISFunc&&bu.setToSJISFunction(n.toSJISFunc)),jP(e,s,r,i)};var tE={},op={};(function(t){function e(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let r=n.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+n);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(i){return[i,i]}))),r.length===6&&r.push("F","F");const s=parseInt(r.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+r.slice(0,6).join("")}}t.getOptions=function(r){r||(r={}),r.color||(r.color={});const s=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,i=r.width&&r.width>=21?r.width:void 0,o=r.scale||4;return{width:i,scale:i?4:o,margin:s,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},t.getScale=function(r,s){return s.width&&s.width>=r+s.margin*2?s.width/(r+s.margin*2):s.scale},t.getImageWidth=function(r,s){const i=t.getScale(r,s);return Math.floor((r+s.margin*2)*i)},t.qrToImageData=function(r,s,i){const o=s.modules.size,l=s.modules.data,c=t.getScale(o,i),d=Math.floor((o+i.margin*2)*c),f=i.margin*c,g=[i.color.light,i.color.dark];for(let p=0;p<d;p++)for(let x=0;x<d;x++){let S=(p*d+x)*4,C=i.color.light;if(p>=f&&x>=f&&p<d-f&&x<d-f){const D=Math.floor((p-f)/c),T=Math.floor((x-f)/c);C=g[l[D*o+T]?1:0]}r[S++]=C.r,r[S++]=C.g,r[S++]=C.b,r[S]=C.a}}})(op);(function(t){const e=op;function n(s,i,o){s.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=o,i.width=o,i.style.height=o+"px",i.style.width=o+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(i,o,l){let c=l,d=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(d=r()),c=e.getOptions(c);const f=e.getImageWidth(i.modules.size,c),g=d.getContext("2d"),p=g.createImageData(f,f);return e.qrToImageData(p.data,i,c),n(g,d,f),g.putImageData(p,0,0),d},t.renderToDataURL=function(i,o,l){let c=l;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const d=t.render(i,o,c),f=c.type||"image/png",g=c.rendererOpts||{};return d.toDataURL(f,g.quality)}})(tE);var nE={};const DP=op;function M0(t,e){const n=t.a/255,r=e+'="'+t.hex+'"';return n<1?r+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function Fd(t,e,n){let r=t+e;return typeof n<"u"&&(r+=" "+n),r}function LP(t,e,n){let r="",s=0,i=!1,o=0;for(let l=0;l<t.length;l++){const c=Math.floor(l%e),d=Math.floor(l/e);!c&&!i&&(i=!0),t[l]?(o++,l>0&&c>0&&t[l-1]||(r+=i?Fd("M",c+n,.5+d+n):Fd("m",s,0),s=0,i=!1),c+1<e&&t[l+1]||(r+=Fd("h",o),o=0)):s++}return r}nE.render=function(e,n,r){const s=DP.getOptions(n),i=e.modules.size,o=e.modules.data,l=i+s.margin*2,c=s.color.light.a?"<path "+M0(s.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",d="<path "+M0(s.color.dark,"stroke")+' d="'+LP(o,i,s.margin)+'"/>',f='viewBox="0 0 '+l+" "+l+'"',p='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+f+' shape-rendering="crispEdges">'+c+d+`</svg>
`;return typeof r=="function"&&r(null,p),p};const VP=JR,hf=$x,rE=tE,OP=nE;function ap(t,e,n,r,s){const i=[].slice.call(arguments,1),o=i.length,l=typeof i[o-1]=="function";if(!l&&!VP())throw new Error("Callback required as last argument");if(l){if(o<2)throw new Error("Too few arguments provided");o===2?(s=n,n=e,e=r=void 0):o===3&&(e.getContext&&typeof s>"u"?(s=r,r=void 0):(s=r,r=n,n=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(n=e,e=r=void 0):o===2&&!e.getContext&&(r=n,n=e,e=void 0),new Promise(function(c,d){try{const f=hf.create(n,r);c(t(f,e,r))}catch(f){d(f)}})}try{const c=hf.create(n,r);s(null,t(c,e,r))}catch(c){s(c)}}Ba.create=hf.create;Ba.toCanvas=ap.bind(null,rE.render);Ba.toDataURL=ap.bind(null,rE.renderToDataURL);Ba.toString=ap.bind(null,function(t,e,n){return OP.render(t,n)});function ff(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789@#$%&*";let n="";for(let r=0;r<6;r++)n+=e.charAt(Math.floor(Math.random()*e.length));return`${t}-${n}`}async function mf(t,e){try{return await Ba.toDataURL(t,{width:400,margin:2,color:{dark:"#000000",light:"#ffffff"},...e})}catch(n){throw n}}const MP=Object.freeze(Object.defineProperty({__proto__:null,generateQRCodeDataURL:mf,generateUniqueCode:ff},Symbol.toStringTag,{value:"Module"}));function FP(){const[t,e]=F.useState([]),[n,r]=F.useState(""),[s,i]=F.useState([]),[o,l]=F.useState(!1),[c,d]=F.useState(!1),[f,g]=F.useState(!1),[p,x]=F.useState(""),[S,C]=F.useState({name:"",email:""});F.useEffect(()=>{D()},[]),F.useEffect(()=>{n&&T()},[n]);const D=async()=>{try{const P=Se(te,"events"),_=Bt(P,Bn("created_at","desc")),I=(await Je(_)).docs.map(A=>({id:A.id,...A.data()}));e(I),I&&I.length>0&&!n&&r(I[0].id)}catch{}},T=async()=>{if(n){l(!0);try{const P=Se(te,"passes"),_=Bt(P,Ma("event_id","==",n)),I=(await Je(_)).docs.map(A=>({id:A.id,...A.data()}));I.sort((A,R)=>{const b=A.created_at?new Date(A.created_at).getTime():0;return(R.created_at?new Date(R.created_at).getTime():0)-b}),i(I)}catch{}finally{l(!1)}}},E=async P=>{if(P.preventDefault(),!n)return;const _=t.find(y=>y.id===n);if(_)try{const y=ff(_.qr_prefix||"QRP"),I=Se(te,"passes");await nr(I,{event_id:n,code:y,guest_name:S.name,guest_email:S.email,used:!1,created_at:Pt()}),d(!1),C({name:"",email:""}),T()}catch{alert("Error adding guest. Please try again.")}},w=async()=>{if(!n||!p.trim())return;const P=t.find(_=>_.id===n);if(P)try{const y=p.trim().split(`
`).map(A=>{const[R,b]=A.split(",").map(N=>N.trim());return R&&b?{event_id:n,code:ff(P.qr_prefix||"QRP"),guest_name:R,guest_email:b,used:!1,created_at:Pt()}:null}).filter(Boolean);if(y.length===0){alert("No valid guests found. Format: Name, Email (one per line)");return}const I=Se(te,"passes");await Promise.all(y.map(A=>nr(I,A))),g(!1),x(""),T(),alert(`Successfully imported ${y.length} guests!`)}catch{alert("Error importing guests. Please try again.")}},k=async P=>{if(confirm("Are you sure you want to delete this pass?"))try{const _=pt(te,"passes",P);await Cu(_),T()}catch{}},j=()=>{const P=["Name","Email","Code","Sent","Used","Scanned At"],_=s.map(b=>[b.guest_name,b.guest_email,b.code,b.sent_at?"Yes":"No",b.used?"Yes":"No",b.scanned_at?new Date(b.scanned_at).toLocaleString():"N/A"]),y=[P,..._].map(b=>b.join(",")).join(`
`),I=new Blob([y],{type:"text/csv"}),A=window.URL.createObjectURL(I),R=document.createElement("a");R.href=A,R.download=`guests-${n}-${new Date().toISOString().split("T")[0]}.csv`,R.click()};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Guest Management"}),u.jsx("p",{className:"text-gray-600",children:"Generate and manage QR passes for guests"})]}),u.jsxs("div",{className:"flex space-x-2",children:[u.jsxs(ee,{variant:"secondary",onClick:()=>g(!0),children:[u.jsx(lf,{className:"w-4 h-4 mr-2"}),"Bulk Import"]}),u.jsxs(ee,{onClick:()=>d(!0),children:[u.jsx(ki,{className:"w-5 h-5 mr-2"}),"Add Guest"]})]})]}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Select Event:"}),u.jsx("select",{value:n,onChange:P=>r(P.target.value),className:"px-4 py-2 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-yellow-400",children:t.map(P=>u.jsx("option",{value:P.id,children:P.title},P.id))}),s.length>0&&u.jsxs(ee,{variant:"secondary",size:"sm",onClick:j,children:[u.jsx(Nu,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]}),o?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-500"})}):s.length===0?u.jsx(ge,{children:u.jsxs(ye,{className:"py-12 text-center",children:[u.jsx(np,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No guests yet"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"Add guests to generate QR passes"}),u.jsxs(ee,{onClick:()=>d(!0),children:[u.jsx(ki,{className:"w-5 h-5 mr-2"}),"Add Your First Guest"]})]})}):u.jsxs(ge,{children:[u.jsx(Me,{children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Guests (",s.length,")"]}),u.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[u.jsxs("span",{className:"text-gray-600",children:["Sent: ",s.filter(P=>P.sent_at).length]}),u.jsxs("span",{className:"text-gray-600",children:["Scanned: ",s.filter(P=>P.used).length]})]})]})}),u.jsx(ye,{children:u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase",children:"Name"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase",children:"Email"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase",children:"Code"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase",children:"Status"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase",children:"Actions"})]})}),u.jsx("tbody",{className:"divide-y divide-gray-100",children:s.map(P=>u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:P.guest_name}),u.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:P.guest_email}),u.jsx("td",{className:"px-4 py-3 text-sm font-mono text-gray-700",children:P.code}),u.jsx("td",{className:"px-4 py-3",children:u.jsxs("div",{className:"flex space-x-1",children:[P.sent_at&&u.jsx("span",{className:"text-xs px-2 py-1 bg-green-100 text-green-800 rounded-full",children:"Sent"}),P.used&&u.jsx("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded-full",children:"Scanned"}),!P.sent_at&&!P.used&&u.jsx("span",{className:"text-xs px-2 py-1 bg-gray-100 text-gray-800 rounded-full",children:"Pending"})]})}),u.jsx("td",{className:"px-4 py-3",children:u.jsx(ee,{variant:"danger",size:"sm",onClick:()=>k(P.id),children:u.jsx(tp,{className:"w-4 h-4"})})})]},P.id))})]})})})]}),c&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:u.jsxs(ge,{className:"w-full max-w-md",children:[u.jsx(Me,{children:u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Add New Guest"})}),u.jsxs("form",{onSubmit:E,children:[u.jsxs(ye,{className:"space-y-4",children:[u.jsx(Wt,{label:"Guest Name",placeholder:"John Doe",value:S.name,onChange:P=>C({...S,name:P.target.value}),required:!0}),u.jsx(Wt,{label:"Email Address",type:"email",placeholder:"john@example.com",value:S.email,onChange:P=>C({...S,email:P.target.value}),required:!0})]}),u.jsxs("div",{className:"px-6 py-4 border-t border-gray-100 flex justify-end space-x-3",children:[u.jsx(ee,{type:"button",variant:"ghost",onClick:()=>d(!1),children:"Cancel"}),u.jsx(ee,{type:"submit",children:"Add Guest"})]})]})]})}),f&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:u.jsxs(ge,{className:"w-full max-w-2xl",children:[u.jsx(Me,{children:u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Bulk Import Guests"})}),u.jsxs(ye,{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Guest List (Name, Email - one per line)"}),u.jsx("textarea",{className:"w-full px-4 py-2.5 bg-white border border-gray-200 rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition-all duration-200",placeholder:`John Doe, john@example.com
Jane Smith, jane@example.com`,rows:10,value:p,onChange:P=>x(P.target.value)})]}),u.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[u.jsxs("p",{className:"text-sm text-blue-800",children:[u.jsx("strong",{children:"Format:"})," Each line should contain: Name, Email"]}),u.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Example: John Doe, john@example.com"})]})]}),u.jsxs("div",{className:"px-6 py-4 border-t border-gray-100 flex justify-end space-x-3",children:[u.jsx(ee,{type:"button",variant:"ghost",onClick:()=>g(!1),children:"Cancel"}),u.jsx(ee,{onClick:w,children:"Import Guests"})]})]})})]})}async function ju(){if(!En.currentUser)return null;try{const e=localStorage.getItem("google_access_token");return e||null}catch{return null}}async function Nl(t,e="Sheet1!A:B"){var n;try{const r=await ju();if(!r)throw new Error("No access token available. Please sign out and sign in again to grant Google Sheets access.");const s=encodeURIComponent(e),i=`https://sheets.googleapis.com/v4/spreadsheets/${t}/values/${s}`;let o;try{o=await fetch(i,{method:"GET",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},mode:"cors"})}catch(c){throw new Error(`Network error: Unable to connect to Google Sheets API. Please check your internet connection. Details: ${c}`)}if(!o.ok){let c=o.statusText;try{if(c=((n=(await o.json()).error)==null?void 0:n.message)||c,o.status===401)throw new Error("Access token expired or invalid. Please sign out and sign in again.");if(o.status===403)throw new Error("Permission denied. Make sure the spreadsheet is shared with your account or is publicly accessible.")}catch{}throw new Error(`Failed to read sheet (${o.status}): ${c}`)}return(await o.json()).values||[]}catch(r){throw r instanceof Error?r:new Error("Failed to import from Google Sheets. Check console for details.")}}async function xo(t,e,n){var r;try{const s=await ju();if(!s)throw new Error("No access token available");const i=encodeURIComponent(e),o=`https://sheets.googleapis.com/v4/spreadsheets/${t}/values/${i}?valueInputOption=USER_ENTERED`,l=await fetch(o,{method:"PUT",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({values:n})});if(!l.ok){const c=await l.json();throw new Error(`Failed to update sheet: ${((r=c.error)==null?void 0:r.message)||l.statusText}`)}return!0}catch(s){throw s}}async function UP(t){var e;try{const n=await ju();if(!n)throw new Error("No access token available");const r=await fetch("https://sheets.googleapis.com/v4/spreadsheets",{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({properties:{title:t},sheets:[{properties:{title:"Email List",gridProperties:{rowCount:1e3,columnCount:4}}}]})});if(!r.ok){const i=await r.json();throw new Error(`Failed to create sheet: ${((e=i.error)==null?void 0:e.message)||r.statusText}`)}const s=await r.json();return await xo(s.spreadsheetId,"Email List!A1:D1",[["Name","Email","Status","Timestamp"]]),s.spreadsheetId}catch(n){throw n}}async function F0(t){var e;try{const n=await ju();if(!n)throw new Error("No access token available");const s=[`To: ${t.to}`,`Subject: ${t.subject}`,"MIME-Version: 1.0","Content-Type: text/html; charset=utf-8","",t.html||t.body].join(`\r
`),i=btoa(unescape(encodeURIComponent(s))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),o=await fetch("https://gmail.googleapis.com/gmail/v1/users/me/messages/send",{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({raw:i})});if(!o.ok){let c=((e=(await o.json()).error)==null?void 0:e.message)||o.statusText;throw c.includes("Invalid to header")||c.includes("Recipient address rejected")||c.includes("Invalid recipients")?new Error("Invalid email address - Recipient address rejected"):c.includes("Address not found")?new Error("Address not found - Invalid email address"):c.includes("Daily sending quota exceeded")?new Error("Daily sending quota exceeded - Try again tomorrow"):new Error(`Failed to send email: ${c}`)}return!0}catch(n){throw n}}function U0(t){const{guestName:e,eventTitle:n,eventDescription:r,message:s,qrCodeDataUrl:i,bgColor:o="#ffffff",accentColor:l="#FFD43B"}=t;return`
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>${n} - Invitation</title>
</head>
<body style="margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; background-color: #f5f5f7;">
  <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f5f5f7; padding: 40px 20px;">
    <tr>
      <td align="center">
        <table width="600" cellpadding="0" cellspacing="0" style="background-color: ${o}; border-radius: 24px; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
          <!-- Header -->
          <tr>
            <td style="background: linear-gradient(135deg, ${l} 0%, ${l}dd 100%); padding: 40px 30px; text-align: center;">
              <h1 style="margin: 0; color: #1a1a1a; font-size: 32px; font-weight: bold;">${n}</h1>
              ${r?`<p style="margin: 10px 0 0; color: #333; font-size: 16px;">${r}</p>`:""}
            </td>
          </tr>
          
          <!-- Content -->
          <tr>
            <td style="padding: 40px 30px;">
              <p style="margin: 0 0 20px; color: #333; font-size: 16px; line-height: 1.6; white-space: pre-wrap;">${s.replace("{NAME}",e)}</p>
              
              <!-- QR Code -->
              <table width="100%" cellpadding="0" cellspacing="0" style="margin: 30px 0;">
                <tr>
                  <td align="center" style="background-color: #f9f9f9; padding: 30px; border-radius: 16px;">
                    <p style="margin: 0 0 20px; color: #666; font-size: 14px; font-weight: 600; text-transform: uppercase; letter-spacing: 1px;">Your QR Pass</p>
                    <img src="${i}" alt="QR Code" style="width: 250px; height: 250px; display: block; margin: 0 auto;" />
                    <p style="margin: 20px 0 0; color: #999; font-size: 12px;">Show this QR code at the entrance</p>
                  </td>
                </tr>
              </table>
              
              <p style="margin: 30px 0 0; color: #666; font-size: 14px; line-height: 1.6;">
                Please save this email or take a screenshot of the QR code. You'll need it to enter the event.
              </p>
            </td>
          </tr>
          
          <!-- Footer -->
          <tr>
            <td style="background-color: #f9f9f9; padding: 20px 30px; text-align: center; border-top: 1px solid #e5e5e5;">
              <p style="margin: 0; color: #999; font-size: 12px;">Powered by Mangrove Esports</p>
            </td>
          </tr>
        </table>
      </td>
    </tr>
  </table>
</body>
</html>
  `.trim()}function BP(){const[t,e]=F.useState([]),[n,r]=F.useState(""),[s,i]=F.useState([]),[o,l]=F.useState("Your Event Invitation"),[c,d]=F.useState(`Dear {NAME},

You are invited to our event! Please find your personalized QR pass attached.

Best regards,
Event Team`),[f,g]=F.useState({total:0,sent:0,failed:0,current:"",inProgress:!1}),[p,x]=F.useState([]),[S,C]=F.useState(!1),[D,T]=F.useState(""),[E,w]=F.useState("Email List!A:B"),[k,j]=F.useState(!1),[P,_]=F.useState(""),[y,I]=F.useState([]),[A,R]=F.useState(!1),[b,N]=F.useState(""),[je,mn]=F.useState(!1);F.useEffect(()=>{pn(),yr()},[]),F.useEffect(()=>{n&&z()},[n]);const yr=async()=>{try{const $=Se(te,"email_presets"),xe=Bt($,Bn("created_at","desc")),Ze=(await Je(xe)).docs.map(De=>({id:De.id,...De.data()}));I(Ze)}catch{}},pn=async()=>{try{const $=Se(te,"events"),xe=Bt($,Bn("created_at","desc")),Ze=(await Je(xe)).docs.map(De=>({id:De.id,...De.data()}));e(Ze),Ze&&Ze.length>0&&!n&&r(Ze[0].id)}catch{}},z=async()=>{if(n)try{const $=Se(te,"passes"),xe=Bt($,Ma("event_id","==",n)),Ze=(await Je(xe)).docs.map(De=>({id:De.id,...De.data()})).filter(De=>!De.sent_at);i(Ze)}catch{}},q=$=>{x(xe=>[...xe,`[${new Date().toLocaleTimeString()}] ${$}`])},Z=async()=>{if(!b.trim()){alert("Please enter a preset name");return}try{const $=Se(te,"email_presets");await nr($,{name:b,subject:o,message:c,created_at:Pt()}),alert(`Preset "${b}" saved successfully!`),R(!1),N(""),yr()}catch($){alert(`Failed to save preset: ${$.message}`)}},Ce=$=>{l($.subject),d($.message),mn(!1),q(` Loaded preset: ${$.name}`)},we=async()=>{if(!P.trim()){alert("Please enter a sheet name");return}try{q(`Creating new Google Sheet: ${P}...`);const $=await UP(P);q(" Sheet created successfully!"),q(`Sheet ID: ${$}`),q("You can now paste this ID above to use it."),T($),j(!1),_("")}catch($){$.message.includes("insufficient authentication scopes")?(alert("Insufficient permissions! Please sign out and sign in again to grant full Google Sheets access (create/edit permissions)."),q(" Need to sign out and sign in again for full Sheets access")):(alert(`Failed to create sheet: ${$.message}`),q(` Failed to create sheet: ${$.message}`))}},Ve=async()=>{var $t,Ze,De,zt,en,tn,nn;if(!n){alert("Please select an event");return}if(!D.trim()){alert("Please enter a Google Sheet ID to track email status");return}const $=s.filter(ne=>!ne.sent_at);if($.length===0){alert("All invitations have already been sent!");return}const xe=t.find(ne=>ne.id===n);if(xe)try{const ne=await Nl(D,E),rt=new Map;let se=!1;if(ne&&ne.length>0){const ie=($t=ne[0][0])!=null&&$t.toLowerCase().includes("name")||(Ze=ne[0][1])!=null&&Ze.toLowerCase().includes("email")?1:0;ne[ie]&&ne[ie].length>=2&&((De=ne[ie][1])!=null&&De.includes("@"))&&(se=!0);for(let le=ie;le<ne.length;le++){let $e="";se&&ne[le][1]?$e=ne[le][1].trim().toLowerCase():ne[le][0]&&($e=ne[le][0].trim().toLowerCase()),$e&&rt.set($e,le+1)}}g({total:$.length,sent:0,failed:0,current:"",inProgress:!0}),q("Starting email send process with sheet updates...");for(const ie of $){g(le=>({...le,current:ie.guest_name})),q(`Sending to ${ie.guest_name} (${ie.guest_email})...`);try{const le=await mf(ie.code),$e=U0({guestName:ie.guest_name,eventTitle:xe.title,eventDescription:xe.description,message:c,qrCodeDataUrl:le,bgColor:xe.bg_color,accentColor:xe.accent_color});await F0({to:ie.guest_email,subject:o,body:c.replace("{NAME}",ie.guest_name),html:$e});const ve=pt(te,"passes",ie.id);await ha(ve,{sent_at:Pt()});const fe=rt.get(ie.guest_email.toLowerCase());if(fe){const et=E.split("!")[0];await xo(D,`${et}!${se?"C":"B"}${fe}:${se?"D":"C"}${fe}`,[["Sent",new Date().toLocaleString()]])}g(et=>({...et,sent:et.sent+1})),q(` Sent to ${ie.guest_name} and updated sheet`)}catch(le){let $e="Failed";((zt=le.message)!=null&&zt.toLowerCase().includes("address not found")||(en=le.message)!=null&&en.toLowerCase().includes("invalid")||(tn=le.message)!=null&&tn.toLowerCase().includes("recipient address rejected"))&&($e="Invalid");const ve=rt.get(ie.guest_email.toLowerCase());if(ve)try{const fe=E.split("!")[0];await xo(D,`${fe}!${se?"C":"B"}${ve}:${se?"D":"C"}${ve}`,[[$e,new Date().toLocaleString()]])}catch(fe){(nn=fe.message)!=null&&nn.includes("insufficient authentication scopes")&&q(" Cannot update sheet - please sign out and sign in again for write access")}g(fe=>({...fe,failed:fe.failed+1})),q(` Failed to send to ${ie.guest_name}: ${le.message} (Status: ${$e})`)}await new Promise(le=>setTimeout(le,1e3))}q("Email send process completed!"),g(ie=>({...ie,inProgress:!1,current:""})),z()}catch(ne){alert(`Error: ${ne.message}`),g(rt=>({...rt,inProgress:!1,current:""}))}},gn=async()=>{var xe,$t,Ze,De,zt,en,tn,nn,ne;if(s.length===0){alert("No pending invitations to send");return}if(!confirm(`Send invitations to ${s.length} guests?`))return;const $=t.find(rt=>rt.id===n);if(!$){alert("Event not found");return}g({total:s.length,sent:0,failed:0,current:"",inProgress:!0}),x([]),q(`Starting email send process for ${s.length} guests...`);for(let rt=0;rt<s.length;rt++){const se=s[rt];g(ie=>({...ie,current:se.guest_email})),q(`Sending to ${se.guest_name} (${se.guest_email})...`);try{const ie=await mf(se.code),le=U0({guestName:se.guest_name,eventTitle:$.title,eventDescription:$.description,message:c,qrCodeDataUrl:ie,bgColor:$.bg_color,accentColor:$.accent_color});await F0({to:se.guest_email,subject:o,body:c.replace("{NAME}",se.guest_name),html:le});const $e=pt(te,"passes",se.id);if(await ha($e,{sent_at:Pt()}),se.sheet_id&&D)try{const fe=await Nl(se.sheet_id,E);if(fe&&fe.length>0){const et=(xe=fe[0][0])!=null&&xe.toLowerCase().includes("name")||($t=fe[0][1])!=null&&$t.toLowerCase().includes("email")?1:0,He=fe[et]&&fe[et].length>=2&&((Ze=fe[et][1])==null?void 0:Ze.includes("@"));let yt=-1;if(He?yt=fe.findIndex(_e=>{var Ne;return((Ne=_e[1])==null?void 0:Ne.toLowerCase())===se.guest_email.toLowerCase()}):yt=fe.findIndex(_e=>{var Ne;return((Ne=_e[0])==null?void 0:Ne.toLowerCase())===se.guest_email.toLowerCase()}),yt>=0){const _e=E.split("!")[0],Ne=He?"C":"B",Ls=He?"D":"C";await xo(se.sheet_id,`${_e}!${Ne}${yt+1}:${Ls}${yt+1}`,[["Sent",new Date().toLocaleString()]])}}}catch{}const ve=Se(te,"email_logs");await nr(ve,{pass_id:se.id,event_id:n,recipient_email:se.guest_email,subject:o,status:"sent",sent_at:Pt()}),g(fe=>({...fe,sent:fe.sent+1})),q(` Successfully sent to ${se.guest_name}`)}catch(ie){let le="failed";if(((De=ie.message)!=null&&De.toLowerCase().includes("address not found")||(zt=ie.message)!=null&&zt.toLowerCase().includes("invalid")||(en=ie.message)!=null&&en.toLowerCase().includes("recipient address rejected"))&&(le="invalid"),se.sheet_id&&D)try{const ve=await Nl(se.sheet_id,E);if(ve&&ve.length>0){const fe=(tn=ve[0][0])!=null&&tn.toLowerCase().includes("name")||(nn=ve[0][1])!=null&&nn.toLowerCase().includes("email")?1:0,et=ve[fe]&&ve[fe].length>=2&&((ne=ve[fe][1])==null?void 0:ne.includes("@"));let He=-1;if(et?He=ve.findIndex(yt=>{var _e;return((_e=yt[1])==null?void 0:_e.toLowerCase())===se.guest_email.toLowerCase()}):He=ve.findIndex(yt=>{var _e;return((_e=yt[0])==null?void 0:_e.toLowerCase())===se.guest_email.toLowerCase()}),He>=0){const yt=E.split("!")[0],_e=et?"C":"B",Ne=et?"D":"C";await xo(se.sheet_id,`${yt}!${_e}${He+1}:${Ne}${He+1}`,[[le==="invalid"?"Invalid":"Failed",new Date().toLocaleString()]])}}}catch{}const $e=Se(te,"email_logs");await nr($e,{pass_id:se.id,event_id:n,recipient_email:se.guest_email,subject:o,status:le,error_message:ie.message||"Unknown error",sent_at:Pt()}),g(ve=>({...ve,failed:ve.failed+1})),q(` Failed to send to ${se.guest_name}: ${ie.message} (Status: ${le==="invalid"?"Invalid":"Failed"})`)}await new Promise(ie=>setTimeout(ie,1e3))}q("Email send process completed!"),g(rt=>({...rt,inProgress:!1,current:""})),z()},yn=async()=>{var $t,Ze,De,zt,en,tn,nn;if(!D.trim()){alert("Please enter a Google Sheet ID");return}const $=t.find(ne=>ne.id===n);if(!$){alert("Please select an event");return}if(!localStorage.getItem("google_access_token")){alert("No Google access token found. Please sign out and sign in again to grant access to Google Sheets."),q(" Failed to import: No access token. Please sign in again.");return}try{q(`Reading Google Sheet: ${D}...`);const ne=await Nl(D,E);if(!ne||ne.length===0){alert("No data found in the sheet");return}q(`Found ${ne.length} row(s). Importing...`);const rt=($t=ne[0][0])!=null&&$t.toLowerCase().includes("name")||(Ze=ne[0][1])!=null&&Ze.toLowerCase().includes("email")?1:0;let se=0;for(let ie=rt;ie<ne.length;ie++){const le=ne[ie];let $e="",ve="";if(le.length>=2&&((De=le[1])!=null&&De.includes("@")))$e=((zt=le[0])==null?void 0:zt.trim())||"",ve=((en=le[1])==null?void 0:en.trim())||"";else if((tn=le[0])!=null&&tn.includes("@"))ve=((nn=le[0])==null?void 0:nn.trim())||"",$e=ve.split("@")[0];else continue;if(!ve)continue;const{generateUniqueCode:fe}=await Po(async()=>{const{generateUniqueCode:He}=await Promise.resolve().then(()=>MP);return{generateUniqueCode:He}},void 0),et=fe($.qr_prefix||"QRP");try{const He=Se(te,"passes"),yt=await nr(He,{event_id:n,code:et,guest_name:$e,guest_email:ve,sheet_id:D,used:!1,created_at:Pt()});se++}catch(He){q(` Failed to import ${ve}: ${He}`)}}q(` Successfully imported ${se} guests from Google Sheets`),alert(`Successfully imported ${se} guests! Check the Guests page or select the event to see them.`),C(!1),await z()}catch(ne){alert(`Failed to import from Google Sheets: ${ne.message}`),q(` Failed to import: ${ne.message}`)}};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Send Invitations"}),u.jsx("p",{className:"text-gray-600",children:"Create and send personalized email invitations with QR passes"})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsx("div",{className:"space-y-6",children:u.jsxs(ge,{children:[u.jsx(Me,{children:u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Email Configuration"})}),u.jsxs(ye,{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Select Event"}),u.jsx("select",{value:n,onChange:$=>r($.target.value),className:"w-full px-4 py-2.5 bg-white border border-gray-200 rounded-xl text-gray-900 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent",disabled:f.inProgress,children:t.map($=>u.jsx("option",{value:$.id,children:$.title},$.id))})]}),u.jsx(Wt,{label:"Email Subject",placeholder:"Your Event Invitation",value:o,onChange:$=>l($.target.value),disabled:f.inProgress}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Message Body"}),u.jsx("textarea",{className:"w-full px-4 py-2.5 bg-white border border-gray-200 rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition-all duration-200",placeholder:"Email message",rows:8,value:c,onChange:$=>d($.target.value),disabled:f.inProgress}),u.jsxs("p",{className:"text-xs text-gray-500 mt-1.5",children:["Use ","{NAME}"," as a placeholder for guest name"]})]}),u.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[u.jsxs("p",{className:"text-sm text-blue-800 mb-1",children:[u.jsx("strong",{children:"Pending Invitations:"})," ",s.length]}),u.jsx("p",{className:"text-xs text-blue-700",children:"QR passes will be automatically generated and attached to each email"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsxs(ee,{onClick:()=>R(!0),variant:"secondary",disabled:f.inProgress,className:"w-full",children:[u.jsx(b0,{className:"w-4 h-4 mr-2"}),"Save Preset"]}),u.jsxs(ee,{onClick:()=>mn(!0),variant:"secondary",disabled:f.inProgress||y.length===0,className:"w-full",children:[u.jsx(jd,{className:"w-4 h-4 mr-2"}),"Load Preset"]})]}),u.jsxs(ee,{onClick:gn,disabled:f.inProgress||s.length===0,isLoading:f.inProgress,className:"w-full",children:[u.jsx(zR,{className:"w-5 h-5 mr-2"}),f.inProgress?"Sending...":`Send ${s.length} Invitations`]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs(ee,{onClick:()=>C(!0),variant:"secondary",disabled:f.inProgress,className:"w-full",children:[u.jsx(R0,{className:"w-5 h-5 mr-2"}),"Import from Google Sheets"]}),u.jsxs(ee,{onClick:()=>j(!0),variant:"secondary",disabled:f.inProgress,className:"w-full",children:[u.jsx(ki,{className:"w-5 h-5 mr-2"}),"Create New Sheet"]}),D&&u.jsxs(ee,{onClick:Ve,disabled:f.inProgress||s.length===0,isLoading:f.inProgress,variant:"secondary",className:"w-full",children:[u.jsx(ma,{className:"w-5 h-5 mr-2"}),"Send & Track in Sheet"]})]})]})]})}),u.jsxs("div",{className:"space-y-6",children:[f.inProgress&&u.jsxs(ge,{children:[u.jsx(Me,{children:u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Sending Progress"})}),u.jsx(ye,{children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Progress"}),u.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[f.sent+f.failed," / ",f.total]})]}),u.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:u.jsx("div",{className:"bg-gradient-to-r from-yellow-400 to-yellow-500 h-3 rounded-full transition-all duration-300",style:{width:`${(f.sent+f.failed)/f.total*100}%`}})})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"bg-green-50 p-3 rounded-xl",children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[u.jsx(fa,{className:"w-4 h-4 text-green-600"}),u.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Sent"})]}),u.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f.sent})]}),u.jsxs("div",{className:"bg-red-50 p-3 rounded-xl",children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[u.jsx(Fx,{className:"w-4 h-4 text-red-600"}),u.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Failed"})]}),u.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f.failed})]})]}),f.current&&u.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Currently sending to:"}),u.jsx("p",{className:"text-sm font-medium text-gray-900",children:f.current})]})]})})]}),u.jsxs(ge,{children:[u.jsx(Me,{children:u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Activity Log"})}),u.jsx(ye,{children:p.length===0?u.jsxs("div",{className:"text-center py-8 text-gray-500",children:[u.jsx(ma,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),u.jsx("p",{children:"No activity yet"})]}):u.jsx("div",{className:"space-y-1 max-h-[500px] overflow-y-auto",children:p.map(($,xe)=>u.jsx("div",{className:`text-xs p-2 rounded ${$.includes("")?"bg-green-50 text-green-800":$.includes("")?"bg-red-50 text-red-800":"bg-gray-50 text-gray-700"}`,children:$},xe))})})]})]})]}),S&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:u.jsxs(ge,{className:"w-full max-w-md",children:[u.jsx(Me,{children:u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(R0,{className:"w-6 h-6 text-yellow-500"}),u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Import from Google Sheets"})]})}),u.jsxs(ye,{className:"space-y-4",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Import guest names and emails from Google Sheets. Supports two formats:"}),u.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-3",children:[u.jsx("p",{className:"text-xs text-gray-700 mb-2",children:u.jsx("strong",{children:"Format 1 (Recommended):"})}),u.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Column A: Name | Column B: Email"}),u.jsx("p",{className:"text-xs text-gray-700 mt-2",children:u.jsx("strong",{children:"Format 2:"})}),u.jsx("p",{className:"text-xs text-gray-600",children:"Column A: Email only (name auto-generated)"})]}),u.jsx(Wt,{label:"Google Sheet ID",placeholder:"1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms",value:D,onChange:$=>T($.target.value),helperText:"Find the ID in your sheet's URL"}),u.jsx(Wt,{label:"Sheet Range",placeholder:"Sheet1!A:B",value:E,onChange:$=>w($.target.value),helperText:"Use A:B for Name+Email or A:A for Email only"}),u.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-3",children:u.jsxs("p",{className:"text-xs text-blue-800",children:[u.jsx("strong",{children:"Note:"})," Names from the sheet will be used in ","{NAME}"," placeholder for personalized emails."]})}),u.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-3",children:u.jsxs("p",{className:"text-xs text-blue-800",children:[u.jsx("strong",{children:"Note:"})," Your Google Sheet must be shared (anyone with the link can view) or you need proper permissions."]})})]}),u.jsxs("div",{className:"px-6 py-4 border-t border-gray-100 flex justify-end space-x-3",children:[u.jsx(ee,{type:"button",variant:"ghost",onClick:()=>{C(!1),T("")},children:"Cancel"}),u.jsx(ee,{onClick:yn,children:"Import Guests"})]})]})}),k&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:u.jsxs(ge,{className:"w-full max-w-md",children:[u.jsx(Me,{children:u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(ki,{className:"w-6 h-6 text-yellow-500"}),u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Create New Google Sheet"})]})}),u.jsxs(ye,{className:"space-y-4",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Create a new Google Sheet with columns for Name, Email, Status, and Timestamp tracking."}),u.jsxs("div",{className:"bg-yellow-50 border border-yellow-300 rounded-xl p-3",children:[u.jsx("p",{className:"text-xs text-yellow-900 font-semibold mb-1",children:" Important:"}),u.jsxs("p",{className:"text-xs text-yellow-800",children:["If this is your first time, you need to ",u.jsx("strong",{children:"sign out and sign in again"})," to grant full Google Sheets permissions (create/edit)."]})]}),u.jsx(Wt,{label:"Sheet Name",placeholder:"Event Email List",value:P,onChange:$=>_($.target.value),helperText:"Choose a descriptive name for your sheet"}),u.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-3",children:u.jsxs("p",{className:"text-xs text-green-800",children:[u.jsx("strong",{children:"What happens:"})," A new sheet will be created in your Google Drive with headers: Name | Email | Status | Timestamp"]})})]}),u.jsxs("div",{className:"px-6 py-4 border-t border-gray-100 flex justify-end space-x-3",children:[u.jsx(ee,{type:"button",variant:"ghost",onClick:()=>{j(!1),_("")},children:"Cancel"}),u.jsx(ee,{onClick:we,children:"Create Sheet"})]})]})}),A&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:u.jsxs(ge,{className:"w-full max-w-md",children:[u.jsx(Me,{children:u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(b0,{className:"w-6 h-6 text-yellow-500"}),u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Save Email Preset"})]})}),u.jsxs(ye,{className:"space-y-4",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Save your current subject and message as a preset for quick reuse."}),u.jsx(Wt,{label:"Preset Name",placeholder:"e.g., Event Invitation Template",value:b,onChange:$=>N($.target.value),helperText:"Give your preset a descriptive name"}),u.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-3",children:[u.jsx("p",{className:"text-xs text-gray-700 mb-1",children:u.jsx("strong",{children:"Current Subject:"})}),u.jsx("p",{className:"text-xs text-gray-600 mb-2",children:o}),u.jsx("p",{className:"text-xs text-gray-700 mb-1",children:u.jsx("strong",{children:"Current Message:"})}),u.jsxs("p",{className:"text-xs text-gray-600 whitespace-pre-wrap",children:[c.substring(0,100),"..."]})]})]}),u.jsxs("div",{className:"px-6 py-4 border-t border-gray-100 flex justify-end space-x-3",children:[u.jsx(ee,{type:"button",variant:"ghost",onClick:()=>{R(!1),N("")},children:"Cancel"}),u.jsx(ee,{onClick:Z,children:"Save Preset"})]})]})}),je&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:u.jsxs(ge,{className:"w-full max-w-md",children:[u.jsx(Me,{children:u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(jd,{className:"w-6 h-6 text-yellow-500"}),u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Load Email Preset"})]})}),u.jsxs(ye,{className:"space-y-4",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Select a saved preset to load the subject and message."}),y.length===0?u.jsxs("div",{className:"text-center py-8 text-gray-500",children:[u.jsx(jd,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),u.jsx("p",{className:"text-sm",children:"No presets saved yet"})]}):u.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:y.map($=>u.jsxs("div",{className:"border border-gray-200 rounded-xl p-3 hover:border-yellow-400 cursor-pointer transition-colors",onClick:()=>Ce($),children:[u.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:$.name}),u.jsxs("p",{className:"text-xs text-gray-600 mb-1",children:[u.jsx("strong",{children:"Subject:"})," ",$.subject]}),u.jsxs("p",{className:"text-xs text-gray-500",children:[$.message.substring(0,60),"..."]})]},$.id))})]}),u.jsx("div",{className:"px-6 py-4 border-t border-gray-100 flex justify-end space-x-3",children:u.jsx(ee,{type:"button",variant:"ghost",onClick:()=>mn(!1),children:"Close"})})]})})]})}class re{constructor(e,n,r,s,i){this._legacyCanvasSize=re.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=e,this.$canvas=document.createElement("canvas"),r&&typeof r=="object"?this._onDecode=n:(console.warn(r||s||i?"You're using a deprecated version of the QrScanner constructor which will be removed in the future":"Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=n),n=typeof r=="object"?r:{},this._onDecodeError=n.onDecodeError||(typeof r=="function"?r:this._onDecodeError),this._calculateScanRegion=n.calculateScanRegion||(typeof s=="function"?s:this._calculateScanRegion),this._preferredCamera=n.preferredCamera||i||this._preferredCamera,this._legacyCanvasSize=typeof r=="number"?r:typeof s=="number"?s:this._legacyCanvasSize,this._maxScansPerSecond=n.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),e.disablePictureInPicture=!0,e.playsInline=!0,e.muted=!0;let o=!1;if(e.hidden&&(e.hidden=!1,o=!0),document.body.contains(e)||(document.body.appendChild(e),o=!0),r=e.parentElement,n.highlightScanRegion||n.highlightCodeOutline){if(s=!!n.overlay,this.$overlay=n.overlay||document.createElement("div"),i=this.$overlay.style,i.position="absolute",i.display="none",i.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!s&&n.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch{}r.insertBefore(this.$overlay,this.$video.nextSibling)}n.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(e),requestAnimationFrame(()=>{let l=window.getComputedStyle(e);l.display==="none"&&(e.style.setProperty("display","block","important"),o=!0),l.visibility!=="visible"&&(e.style.setProperty("visibility","visible","important"),o=!0),o&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),e.style.opacity="0",e.style.width="0",e.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),e.addEventListener("play",this._onPlay),e.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=re.createQrEngine()}static set WORKER_PATH(e){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static async hasCamera(){try{return!!(await re.listCameras(!1)).length}catch{return!1}}static async listCameras(e=!1){if(!navigator.mediaDevices)return[];let n=async()=>(await navigator.mediaDevices.enumerateDevices()).filter(s=>s.kind==="videoinput"),r;try{e&&(await n()).every(s=>!s.label)&&(r=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch{}try{return(await n()).map((s,i)=>({id:s.deviceId,label:s.label||(i===0?"Default Camera":`Camera ${i+1}`)}))}finally{r&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),re._stopVideoStream(r))}}async hasFlash(){let e;try{if(this.$video.srcObject){if(!(this.$video.srcObject instanceof MediaStream))return!1;e=this.$video.srcObject}else e=(await this._getCameraStream()).stream;return"torch"in e.getVideoTracks()[0].getSettings()}catch{return!1}finally{e&&e!==this.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),re._stopVideoStream(e))}}isFlashOn(){return this._flashOn}async toggleFlash(){this._flashOn?await this.turnFlashOff():await this.turnFlashOn()}async turnFlashOn(){if(!this._flashOn&&!this._destroyed&&(this._flashOn=!0,this._active&&!this._paused))try{if(!await this.hasFlash())throw"No flash available";await this.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(e){throw this._flashOn=!1,e}}async turnFlashOff(){this._flashOn&&(this._flashOn=!1,await this._restartVideoStream())}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),re._postWorkerMessage(this._qrEnginePromise,"close")}async start(){if(this._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!this._active||this._paused)&&(window.location.protocol!=="https:"&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,!document.hidden))if(this._paused=!1,this.$video.srcObject)await this.$video.play();else try{let{stream:e,facingMode:n}=await this._getCameraStream();!this._active||this._paused?re._stopVideoStream(e):(this._setVideoMirror(n),this.$video.srcObject=e,await this.$video.play(),this._flashOn&&(this._flashOn=!1,this.turnFlashOn().catch(()=>{})))}catch(e){if(!this._paused)throw this._active=!1,e}}stop(){this.pause(),this._active=!1}async pause(e=!1){if(this._paused=!0,!this._active)return!0;this.$video.pause(),this.$overlay&&(this.$overlay.style.display="none");let n=()=>{this.$video.srcObject instanceof MediaStream&&(re._stopVideoStream(this.$video.srcObject),this.$video.srcObject=null)};return e?(n(),!0):(await new Promise(r=>setTimeout(r,300)),this._paused?(n(),!0):!1)}async setCamera(e){e!==this._preferredCamera&&(this._preferredCamera=e,await this._restartVideoStream())}static async scanImage(e,n,r,s,i=!1,o=!1){let l,c=!1;n&&("scanRegion"in n||"qrEngine"in n||"canvas"in n||"disallowCanvasResizing"in n||"alsoTryWithoutScanRegion"in n||"returnDetailedScanResult"in n)?(l=n.scanRegion,r=n.qrEngine,s=n.canvas,i=n.disallowCanvasResizing||!1,o=n.alsoTryWithoutScanRegion||!1,c=!0):console.warn(n||r||s||i||o?"You're using a deprecated api for scanImage which will be removed in the future.":"Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),n=!!r;try{let d,f;[r,d]=await Promise.all([r||re.createQrEngine(),re._loadImage(e)]),[s,f]=re._drawToCanvas(d,l,s,i);let g;if(r instanceof Worker){let p=r;n||re._postWorkerMessageSync(p,"inversionMode","both"),g=await new Promise((x,S)=>{let C,D,T,E=-1;D=k=>{k.data.id===E&&(p.removeEventListener("message",D),p.removeEventListener("error",T),clearTimeout(C),k.data.data!==null?x({data:k.data.data,cornerPoints:re._convertPoints(k.data.cornerPoints,l)}):S(re.NO_QR_CODE_FOUND))},T=k=>{p.removeEventListener("message",D),p.removeEventListener("error",T),clearTimeout(C),S("Scanner error: "+(k?k.message||k:"Unknown Error"))},p.addEventListener("message",D),p.addEventListener("error",T),C=setTimeout(()=>T("timeout"),1e4);let w=f.getImageData(0,0,s.width,s.height);E=re._postWorkerMessageSync(p,"decode",w,[w.data.buffer])})}else g=await Promise.race([new Promise((p,x)=>window.setTimeout(()=>x("Scanner error: timeout"),1e4)),(async()=>{try{var[p]=await r.detect(s);if(!p)throw re.NO_QR_CODE_FOUND;return{data:p.rawValue,cornerPoints:re._convertPoints(p.cornerPoints,l)}}catch(x){if(p=x.message||x,/not implemented|service unavailable/.test(p))return re._disableBarcodeDetector=!0,re.scanImage(e,{scanRegion:l,canvas:s,disallowCanvasResizing:i,alsoTryWithoutScanRegion:o});throw`Scanner error: ${p}`}})()]);return c?g:g.data}catch(d){if(!l||!o)throw d;let f=await re.scanImage(e,{qrEngine:r,canvas:s,disallowCanvasResizing:i});return c?f:f.data}finally{n||re._postWorkerMessage(r,"close")}}setGrayscaleWeights(e,n,r,s=!0){re._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:e,green:n,blue:r,useIntegerApproximation:s})}setInversionMode(e){re._postWorkerMessage(this._qrEnginePromise,"inversionMode",e)}static async createQrEngine(e){if(e&&console.warn("Specifying a worker path is not required and not supported anymore."),e=()=>Po(()=>import("./qr-scanner-worker.min-D85Z9gVD.js"),[]).then(r=>r.createWorker()),!(!re._disableBarcodeDetector&&"BarcodeDetector"in window&&BarcodeDetector.getSupportedFormats&&(await BarcodeDetector.getSupportedFormats()).includes("qr_code")))return e();let n=navigator.userAgentData;return n&&n.brands.some(({brand:r})=>/Chromium/i.test(r))&&/mac ?OS/i.test(n.platform)&&await n.getHighEntropyValues(["architecture","platformVersion"]).then(({architecture:r,platformVersion:s})=>/arm/i.test(r||"arm")&&13<=parseInt(s||"13")).catch(()=>!0)?e():new BarcodeDetector({formats:["qr_code"]})}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(e){let n=Math.round(.6666666666666666*Math.min(e.videoWidth,e.videoHeight));return{x:Math.round((e.videoWidth-n)/2),y:Math.round((e.videoHeight-n)/2),width:n,height:n,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var e=this.$video,n=e.videoWidth,r=e.videoHeight,s=e.offsetWidth,i=e.offsetHeight,o=e.offsetLeft,l=e.offsetTop,c=window.getComputedStyle(e),d=c.objectFit,f=n/r,g=s/i;switch(d){case"none":var p=n,x=r;break;case"fill":p=s,x=i;break;default:(d==="cover"?f>g:f<g)?(x=i,p=x*f):(p=s,x=p/f),d==="scale-down"&&(p=Math.min(p,n),x=Math.min(x,r))}var[S,C]=c.objectPosition.split(" ").map((T,E)=>{const w=parseFloat(T);return T.endsWith("%")?(E?i-x:s-p)*w/100:w});c=this._scanRegion.width||n,g=this._scanRegion.height||r,d=this._scanRegion.x||0;var D=this._scanRegion.y||0;f=this.$overlay.style,f.width=`${c/n*p}px`,f.height=`${g/r*x}px`,f.top=`${l+C+D/r*x}px`,r=/scaleX\(-1\)/.test(e.style.transform),f.left=`${o+(r?s-S-p:S)+(r?n-d-c:d)/n*p}px`,f.transform=e.style.transform}})}static _convertPoints(e,n){if(!n)return e;let r=n.x||0,s=n.y||0,i=n.width&&n.downScaledWidth?n.width/n.downScaledWidth:1;n=n.height&&n.downScaledHeight?n.height/n.downScaledHeight:1;for(let o of e)o.x=o.x*i+r,o.y=o.y*n+s;return e}_scanFrame(){!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)(async()=>{if(!(1>=this.$video.readyState)){var e=Date.now()-this._lastScanTimestamp,n=1e3/this._maxScansPerSecond;e<n&&await new Promise(s=>setTimeout(s,n-e)),this._lastScanTimestamp=Date.now();try{var r=await re.scanImage(this.$video,{scanRegion:this._scanRegion,qrEngine:this._qrEnginePromise,canvas:this.$canvas})}catch(s){if(!this._active)return;this._onDecodeError(s)}!re._disableBarcodeDetector||await this._qrEnginePromise instanceof Worker||(this._qrEnginePromise=re.createQrEngine()),r?(this._onDecode?this._onDecode(r):this._legacyOnDecode&&this._legacyOnDecode(r.data),this.$codeOutlineHighlight&&(clearTimeout(this._codeOutlineHighlightRemovalTimeout),this._codeOutlineHighlightRemovalTimeout=void 0,this.$codeOutlineHighlight.setAttribute("viewBox",`${this._scanRegion.x||0} ${this._scanRegion.y||0} ${this._scanRegion.width||this.$video.videoWidth} ${this._scanRegion.height||this.$video.videoHeight}`),this.$codeOutlineHighlight.firstElementChild.setAttribute("points",r.cornerPoints.map(({x:s,y:i})=>`${s},${i}`).join(" ")),this.$codeOutlineHighlight.style.display="")):this.$codeOutlineHighlight&&!this._codeOutlineHighlightRemovalTimeout&&(this._codeOutlineHighlightRemovalTimeout=setTimeout(()=>this.$codeOutlineHighlight.style.display="none",100))}this._scanFrame()})}_onDecodeError(e){e!==re.NO_QR_CODE_FOUND&&console.log(e)}async _getCameraStream(){if(!navigator.mediaDevices)throw"Camera not found.";let e=/^(environment|user)$/.test(this._preferredCamera)?"facingMode":"deviceId",n=[{width:{min:1024}},{width:{min:768}},{}],r=n.map(s=>Object.assign({},s,{[e]:{exact:this._preferredCamera}}));for(let s of[...r,...n])try{let i=await navigator.mediaDevices.getUserMedia({video:s,audio:!1}),o=this._getFacingMode(i)||(s.facingMode?this._preferredCamera:this._preferredCamera==="environment"?"user":"environment");return{stream:i,facingMode:o}}catch{}throw"Camera not found."}async _restartVideoStream(){let e=this._paused;await this.pause(!0)&&!e&&this._active&&await this.start()}static _stopVideoStream(e){for(let n of e.getTracks())n.stop(),e.removeTrack(n)}_setVideoMirror(e){this.$video.style.transform="scaleX("+(e==="user"?-1:1)+")"}_getFacingMode(e){return(e=e.getVideoTracks()[0])?/rear|back|environment/i.test(e.label)?"environment":/front|user|face/i.test(e.label)?"user":null:null}static _drawToCanvas(e,n,r,s=!1){r=r||document.createElement("canvas");let i=n&&n.x?n.x:0,o=n&&n.y?n.y:0,l=n&&n.width?n.width:e.videoWidth||e.width,c=n&&n.height?n.height:e.videoHeight||e.height;return s||(s=n&&n.downScaledWidth?n.downScaledWidth:l,n=n&&n.downScaledHeight?n.downScaledHeight:c,r.width!==s&&(r.width=s),r.height!==n&&(r.height=n)),n=r.getContext("2d",{alpha:!1}),n.imageSmoothingEnabled=!1,n.drawImage(e,i,o,l,c,0,0,r.width,r.height),[r,n]}static async _loadImage(e){if(e instanceof Image)return await re._awaitImageLoad(e),e;if(e instanceof HTMLVideoElement||e instanceof HTMLCanvasElement||e instanceof SVGImageElement||"OffscreenCanvas"in window&&e instanceof OffscreenCanvas||"ImageBitmap"in window&&e instanceof ImageBitmap)return e;if(e instanceof File||e instanceof Blob||e instanceof URL||typeof e=="string"){let n=new Image;n.src=e instanceof File||e instanceof Blob?URL.createObjectURL(e):e.toString();try{return await re._awaitImageLoad(n),n}finally{(e instanceof File||e instanceof Blob)&&URL.revokeObjectURL(n.src)}}else throw"Unsupported image type."}static async _awaitImageLoad(e){e.complete&&e.naturalWidth!==0||await new Promise((n,r)=>{let s=i=>{e.removeEventListener("load",s),e.removeEventListener("error",s),i instanceof ErrorEvent?r("Image load error"):n()};e.addEventListener("load",s),e.addEventListener("error",s)})}static async _postWorkerMessage(e,n,r,s){return re._postWorkerMessageSync(await e,n,r,s)}static _postWorkerMessageSync(e,n,r,s){if(!(e instanceof Worker))return-1;let i=re._workerMessageId++;return e.postMessage({id:i,type:n,data:r},s),i}}re.DEFAULT_CANVAS_SIZE=400;re.NO_QR_CODE_FOUND="No QR code found";re._disableBarcodeDetector=!1;re._workerMessageId=0;function Ud(){const{user:t}=$i(),e=F.useRef(null),[n,r]=F.useState(null),[s,i]=F.useState(!1),[o,l]=F.useState(null),[c,d]=F.useState(""),[f,g]=F.useState(!1),p=F.useRef(""),x=F.useRef(null);F.useEffect(()=>()=>{n&&(n.stop(),n.destroy()),x.current&&clearTimeout(x.current)},[n]);const S=async()=>{if(e.current)try{const w=new re(e.current,async k=>{await D(k.data)},{returnDetailedScanResult:!0,highlightScanRegion:!1,highlightCodeOutline:!1,maxScansPerSecond:1});await w.start(),r(w),i(!0),l(null)}catch{alert("Unable to access camera. Please grant camera permissions.")}},C=()=>{n&&(n.stop(),i(!1))},D=async w=>{var k;if(t&&!(f||p.current===w)){g(!0),p.current=w,n&&s&&n.stop();try{const j=Se(te,"passes"),P=Bt(j,Ma("code","==",w),Fa(1)),_=await Je(P);let y=null,I=null;if(!_.empty&&(I=_.docs[0].id,y={id:I,..._.docs[0].data()},y.event_id))try{const je=await Ni(pt(te,"events",y.event_id));je.exists()&&(y.event_title=je.data().title)}catch{}let A,R,b,N;if(!y)A="invalid",R="Invalid QR Code - Pass Not Found";else if(y.used||y.scanned_at)A="already_used",R=`Already Scanned - ${y.guest_name||"Guest"}`,b=y.guest_name,N=(k=y.scanned_at)!=null&&k.toDate?y.scanned_at.toDate():new Date(y.scanned_at);else if(A="valid",R=` Access Granted - Welcome ${y.guest_name||"Guest"}!`,b=y.guest_name,I)try{const je=pt(te,"passes",I);await ha(je,{used:!0,scanned_at:Pt(),scanned_by:t.uid})}catch{}try{const je=Se(te,"scan_logs");await nr(je,{pass_id:I,scanned_code:w,scanner_id:t.uid,status:A,event_id:(y==null?void 0:y.event_id)||null,guest_name:(y==null?void 0:y.guest_name)||null,scanned_at:Pt()})}catch{}l({status:A,message:R,guestName:b,scannedAt:N==null?void 0:N.toLocaleString(),code:w})}catch(j){l({status:"invalid",message:"Error processing scan: "+j.message})}finally{g(!1)}}},T=w=>{switch(w){case"valid":return"bg-green-50 border-green-200 text-green-800";case"already_used":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"invalid":return"bg-red-50 border-red-200 text-red-800";default:return""}},E=w=>{switch(w){case"valid":return u.jsx(fa,{className:"w-16 h-16"});case"already_used":return u.jsx(of,{className:"w-16 h-16"});case"invalid":return u.jsx(Bx,{className:"w-16 h-16"});default:return null}};return u.jsxs("div",{className:"space-y-4 md:space-y-6 pb-20 md:pb-6",children:[u.jsxs("div",{className:"sticky top-0 bg-white z-10 pb-3 md:pb-0 md:static border-b md:border-0",children:[u.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-1 md:mb-2",children:"QR Scanner"}),u.jsx("p",{className:"text-sm md:text-base text-gray-600",children:"Scan guest passes for event entry validation"})]}),u.jsx("div",{className:"max-w-2xl mx-auto",children:u.jsxs(ge,{children:[u.jsx(Me,{children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-900",children:"Camera"}),s?u.jsxs(ee,{variant:"danger",size:"sm",onClick:C,children:[u.jsx(VR,{className:"w-4 h-4 mr-1 md:mr-2"}),u.jsx("span",{className:"hidden xs:inline",children:"Stop"})]}):u.jsxs(ee,{size:"sm",onClick:S,children:[u.jsx(af,{className:"w-4 h-4 mr-1 md:mr-2"}),u.jsx("span",{className:"hidden xs:inline",children:"Start"})]})]})}),u.jsxs(ye,{children:[u.jsxs("div",{className:"relative w-full h-[60vh] md:h-auto md:aspect-square bg-gray-900 rounded-xl overflow-hidden qr-scanner-container",children:[u.jsx("video",{ref:e,className:"w-full h-full object-cover"}),s&&u.jsx("div",{className:"scan-line"}),!s&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-900",children:u.jsxs("div",{className:"text-center text-white px-4",children:[u.jsx(af,{className:"w-12 h-12 md:w-16 md:h-16 mx-auto mb-3 opacity-50"}),u.jsx("p",{className:"text-xs md:text-sm",children:'Tap "Start" to begin scanning'})]})}),f&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 z-20",children:u.jsxs("div",{className:"text-center text-white",children:[u.jsx("div",{className:"animate-spin rounded-full h-10 w-10 md:h-12 md:w-12 border-b-2 border-white mx-auto mb-2"}),u.jsx("p",{className:"text-xs md:text-sm font-medium",children:"Processing..."})]})})]}),u.jsxs("div",{className:"mt-3 md:mt-4 p-3 md:p-4 bg-gray-50 rounded-xl",children:[u.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-700 mb-2",children:"Manual Code Entry"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",value:c,onChange:w=>d(w.target.value),placeholder:"Enter code",className:"flex-1 px-3 md:px-4 py-2 text-sm md:text-base bg-white border border-gray-200 rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-yellow-400",onKeyPress:w=>{w.key==="Enter"&&c.trim()&&!f&&(D(c.trim()),d(""))}}),u.jsx(ee,{onClick:()=>{c.trim()&&!f&&(D(c.trim()),d(""))},disabled:!c.trim()||f,size:"sm",children:"Scan"})]})]}),o&&u.jsx("div",{className:`fixed md:relative inset-0 md:inset-auto md:mt-4 z-50 md:z-auto flex items-center justify-center md:block ${T(o.status)} md:rounded-xl md:border-2 transition-all duration-300`,children:u.jsx("div",{className:"bg-inherit w-full h-full md:h-auto flex items-center justify-center p-6 md:p-6",children:u.jsxs("div",{className:"flex flex-col items-center text-center max-w-md",children:[E(o.status),u.jsx("h3",{className:"text-xl md:text-2xl font-bold mt-4 mb-2",children:o.message}),o.guestName&&u.jsx("p",{className:"text-lg md:text-lg font-medium mb-1",children:o.guestName}),o.code&&u.jsxs("p",{className:"text-xs md:text-sm opacity-75 mb-2 break-all",children:["Code: ",o.code]}),o.scannedAt&&u.jsxs("p",{className:"text-xs md:text-sm opacity-75",children:["Previously scanned: ",o.scannedAt]}),u.jsx(ee,{onClick:()=>{l(null),g(!1),p.current="",x.current&&clearTimeout(x.current),x.current=setTimeout(()=>{p.current=""},2e3),n&&s&&n.start()},className:"mt-6 w-full md:w-auto text-base md:text-sm px-8 py-3 md:py-2",children:s?"Resume Scanning":"Close"})]})})})]})]})})]})}function $P(){const[t,e]=F.useState({totalGenerated:0,totalSent:0,totalFailed:0,totalScanned:0,invalidScans:0,duplicateScans:0,scanRate:0}),[n,r]=F.useState([]),[s,i]=F.useState(!0);F.useEffect(()=>{o(),l()},[]);const o=async()=>{try{const d=Se(te,"passes"),f=await Je(d),g=f.size,x=f.docs.filter(_=>_.data().used===!0||_.data().scanned_at).length,S=Se(te,"email_logs"),C=await Je(S);let D=0,T=0;C.docs.forEach(_=>{const y=_.data().status;y==="sent"?D++:(y==="failed"||y==="invalid")&&T++});const E=Se(te,"scan_logs"),w=await Je(E);let k=0,j=0;w.docs.forEach(_=>{const y=_.data().status;y==="invalid"?k++:y==="already_used"&&j++});const P=g>0?x/g*100:0;e({totalGenerated:g,totalSent:D,totalFailed:T,totalScanned:x,invalidScans:k,duplicateScans:j,scanRate:P})}catch{}finally{i(!1)}},l=async()=>{try{const d=Se(te,"scan_logs"),f=Bt(d,Bn("scanned_at","desc"),Fa(20)),g=await Je(f),p=await Promise.all(g.docs.map(async x=>{const S={id:x.id,...x.data()};if(S.pass_id)try{const C=await Ni(pt(te,"passes",S.pass_id));C.exists()&&(S.passes=C.data())}catch{}if(S.scanner_id)try{const C=await Ni(pt(te,"admins",S.scanner_id));C.exists()&&(S.admins=C.data())}catch{}return S}));r(p)}catch{}},c=()=>{const d=["Timestamp","Code","Guest Name","Email","Status","Scanner"],f=n.map(C=>{var T,E,w,k;return[(T=C.scanned_at)!=null&&T.toDate?C.scanned_at.toDate().toLocaleString():C.scanned_at?new Date(C.scanned_at).toLocaleString():"N/A",C.scanned_code||"N/A",C.guest_name||((E=C.passes)==null?void 0:E.guest_name)||"N/A",((w=C.passes)==null?void 0:w.guest_email)||"N/A",C.status||"N/A",((k=C.admins)==null?void 0:k.email)||"N/A"]}),g=[d,...f].map(C=>C.join(",")).join(`
`),p=new Blob([g],{type:"text/csv"}),x=window.URL.createObjectURL(p),S=document.createElement("a");S.href=x,S.download=`qrpass-analytics-${new Date().toISOString().split("T")[0]}.csv`,S.click()};return s?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-500"})}):u.jsxs("div",{className:"space-y-4 md:space-y-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-1 md:mb-2",children:"Analytics"}),u.jsx("p",{className:"text-sm md:text-base text-gray-600",children:"Track performance and scan statistics"})]}),u.jsxs(ee,{onClick:c,size:"sm",className:"self-start sm:self-auto",children:[u.jsx(Nu,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]}),u.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4",children:[u.jsx(ge,{hover:!0,children:u.jsx(ye,{children:u.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[u.jsxs("div",{className:"mb-2 md:mb-0",children:[u.jsx("p",{className:"text-xs md:text-sm text-gray-600 mb-1",children:"QR Generated"}),u.jsx("p",{className:"text-xl md:text-3xl font-bold text-gray-900",children:t.totalGenerated})]}),u.jsx("div",{className:"bg-blue-50 p-2 md:p-3 rounded-xl self-end md:self-auto",children:u.jsx(LR,{className:"w-4 h-4 md:w-6 md:h-6 text-blue-600"})})]})})}),u.jsx(ge,{hover:!0,children:u.jsx(ye,{children:u.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[u.jsxs("div",{className:"mb-2 md:mb-0",children:[u.jsx("p",{className:"text-xs md:text-sm text-gray-600 mb-1",children:"Emails Sent"}),u.jsx("p",{className:"text-xl md:text-3xl font-bold text-gray-900",children:t.totalSent}),t.totalFailed>0&&u.jsxs("p",{className:"text-xs text-red-600 mt-1",children:[t.totalFailed," failed"]})]}),u.jsx("div",{className:"bg-green-50 p-2 md:p-3 rounded-xl self-end md:self-auto",children:u.jsx(fa,{className:"w-4 h-4 md:w-6 md:h-6 text-green-600"})})]})})}),u.jsx(ge,{hover:!0,children:u.jsx(ye,{children:u.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[u.jsxs("div",{className:"mb-2 md:mb-0",children:[u.jsx("p",{className:"text-xs md:text-sm text-gray-600 mb-1",children:"Scanned"}),u.jsx("p",{className:"text-xl md:text-3xl font-bold text-gray-900",children:t.totalScanned}),u.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[t.scanRate.toFixed(1),"%"]})]}),u.jsx("div",{className:"bg-yellow-50 p-2 md:p-3 rounded-xl self-end md:self-auto",children:u.jsx(WR,{className:"w-4 h-4 md:w-6 md:h-6 text-yellow-600"})})]})})}),u.jsx(ge,{hover:!0,children:u.jsx(ye,{children:u.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[u.jsxs("div",{className:"mb-2 md:mb-0",children:[u.jsx("p",{className:"text-xs md:text-sm text-gray-600 mb-1",children:"Issues"}),u.jsx("p",{className:"text-xl md:text-3xl font-bold text-gray-900",children:t.invalidScans+t.duplicateScans}),u.jsxs("p",{className:"text-xs text-gray-500 mt-1 hidden md:block",children:[t.invalidScans," invalid, ",t.duplicateScans," dup"]})]}),u.jsx("div",{className:"bg-red-50 p-2 md:p-3 rounded-xl self-end md:self-auto",children:u.jsx(of,{className:"w-4 h-4 md:w-6 md:h-6 text-red-600"})})]})})})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:[u.jsxs(ge,{children:[u.jsx(Me,{children:u.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-900",children:"Performance Overview"})}),u.jsx(ye,{children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("span",{className:"text-xs md:text-sm font-medium text-gray-700",children:"Scan Rate"}),u.jsxs("span",{className:"text-xs md:text-sm font-bold text-gray-900",children:[t.scanRate.toFixed(1),"%"]})]}),u.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:u.jsx("div",{className:"bg-gradient-to-r from-yellow-400 to-yellow-500 h-2 rounded-full transition-all duration-500",style:{width:`${Math.min(t.scanRate,100)}%`}})})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("span",{className:"text-xs md:text-sm font-medium text-gray-700",children:"Email Success Rate"}),u.jsxs("span",{className:"text-xs md:text-sm font-bold text-gray-900",children:[t.totalSent+t.totalFailed>0?(t.totalSent/(t.totalSent+t.totalFailed)*100).toFixed(1):0,"%"]})]}),u.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:u.jsx("div",{className:"bg-gradient-to-r from-green-400 to-green-500 h-2 rounded-full transition-all duration-500",style:{width:`${t.totalSent+t.totalFailed>0?t.totalSent/(t.totalSent+t.totalFailed)*100:0}%`}})})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("span",{className:"text-xs md:text-sm font-medium text-gray-700",children:"Valid Scans"}),u.jsxs("span",{className:"text-xs md:text-sm font-bold text-gray-900",children:[t.invalidScans+t.duplicateScans+t.totalScanned>0?(t.totalScanned/(t.invalidScans+t.duplicateScans+t.totalScanned)*100).toFixed(1):0,"%"]})]}),u.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:u.jsx("div",{className:"bg-gradient-to-r from-blue-400 to-blue-500 h-2 rounded-full transition-all duration-500",style:{width:`${t.invalidScans+t.duplicateScans+t.totalScanned>0?t.totalScanned/(t.invalidScans+t.duplicateScans+t.totalScanned)*100:0}%`}})})]})]})})]}),u.jsxs(ge,{children:[u.jsx(Me,{children:u.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-900",children:"Quick Stats"})}),u.jsx(ye,{children:u.jsxs("div",{className:"grid grid-cols-2 gap-3 md:gap-4",children:[u.jsxs("div",{className:"bg-green-50 p-3 md:p-4 rounded-xl",children:[u.jsx(fa,{className:"w-6 h-6 md:w-8 md:h-8 text-green-600 mb-2"}),u.jsx("p",{className:"text-lg md:text-2xl font-bold text-gray-900",children:t.totalScanned}),u.jsx("p",{className:"text-xs md:text-sm text-gray-600",children:"Valid Entries"})]}),u.jsxs("div",{className:"bg-yellow-50 p-3 md:p-4 rounded-xl",children:[u.jsx(of,{className:"w-6 h-6 md:w-8 md:h-8 text-yellow-600 mb-2"}),u.jsx("p",{className:"text-lg md:text-2xl font-bold text-gray-900",children:t.duplicateScans}),u.jsx("p",{className:"text-xs md:text-sm text-gray-600",children:"Duplicates"})]}),u.jsxs("div",{className:"bg-red-50 p-3 md:p-4 rounded-xl",children:[u.jsx(Bx,{className:"w-6 h-6 md:w-8 md:h-8 text-red-600 mb-2"}),u.jsx("p",{className:"text-lg md:text-2xl font-bold text-gray-900",children:t.invalidScans}),u.jsx("p",{className:"text-xs md:text-sm text-gray-600",children:"Invalid"})]}),u.jsxs("div",{className:"bg-blue-50 p-3 md:p-4 rounded-xl",children:[u.jsx(HR,{className:"w-6 h-6 md:w-8 md:h-8 text-blue-600 mb-2"}),u.jsx("p",{className:"text-lg md:text-2xl font-bold text-gray-900",children:t.totalGenerated-t.totalScanned}),u.jsx("p",{className:"text-xs md:text-sm text-gray-600",children:"Pending"})]})]})})]})]}),u.jsxs(ge,{children:[u.jsx(Me,{children:u.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-900",children:"Recent Scan Logs"})}),u.jsxs(ye,{children:[u.jsx("div",{className:"hidden md:block overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase",children:"Timestamp"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase",children:"Code"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase",children:"Guest"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase",children:"Status"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase",children:"Scanner"})]})}),u.jsx("tbody",{className:"divide-y divide-gray-100",children:n.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-gray-500",children:"No scan logs yet"})}):n.map(d=>{var f,g,p,x;return u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:(f=d.scanned_at)!=null&&f.toDate?d.scanned_at.toDate().toLocaleString():d.scanned_at?new Date(d.scanned_at).toLocaleString():"N/A"}),u.jsx("td",{className:"px-4 py-3 text-sm font-mono text-gray-700",children:d.scanned_code||"N/A"}),u.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:d.guest_name||((g=d.passes)==null?void 0:g.guest_name)||"N/A"}),u.jsx("td",{className:"px-4 py-3",children:u.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${d.status==="valid"?"bg-green-100 text-green-800":d.status==="already_used"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:((p=d.status)==null?void 0:p.replace("_"," "))||"Unknown"})}),u.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:((x=d.admins)==null?void 0:x.email)||"N/A"})]},d.id)})})]})}),u.jsx("div",{className:"md:hidden space-y-2",children:n.length===0?u.jsx("div",{className:"text-center py-8 text-gray-500",children:u.jsx("p",{className:"text-sm",children:"No scan logs yet"})}):n.map(d=>{var f,g,p;return u.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-100",children:[u.jsxs("div",{className:"flex items-start justify-between mb-2",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"font-medium text-sm text-gray-900 truncate",children:d.guest_name||((f=d.passes)==null?void 0:f.guest_name)||"Unknown"}),u.jsx("p",{className:"text-xs font-mono text-gray-600 truncate",children:d.scanned_code||"N/A"})]}),u.jsx("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full flex-shrink-0 ml-2 ${d.status==="valid"?"bg-green-100 text-green-800":d.status==="already_used"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:d.status==="valid"?"":d.status==="already_used"?"":""})]}),u.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[u.jsx("span",{children:(g=d.scanned_at)!=null&&g.toDate?d.scanned_at.toDate().toLocaleString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}),u.jsx("span",{className:"truncate ml-2",children:((p=d.admins)==null?void 0:p.email)||"N/A"})]})]},d.id)})})]})]})]})}function zP(){const{isSuperAdmin:t}=$i(),[e,n]=F.useState([]),[r,s]=F.useState(!0),[i,o]=F.useState(!1),[l,c]=F.useState(""),[d,f]=F.useState(""),[g,p]=F.useState(""),[x,S]=F.useState("scanner_admin");F.useEffect(()=>{t&&C()},[t]);const C=async()=>{try{const w=Se(te,"admins"),k=Bt(w,Bn("created_at","desc")),P=(await Je(k)).docs.map(_=>({id:_.id,..._.data()}));n(P)}catch{}finally{s(!1)}},D=async w=>{if(w.preventDefault(),!l||!g||!d){alert("Please fill in all fields");return}if(g.length<6){alert("Password must be at least 6 characters");return}try{const k=await _m(En,l,g),j=pt(te,"admins",k.user.uid);await da(j,{email:l,name:d,role:x,google_linked:!1,created_at:Pt()}),o(!1),c(""),f(""),p(""),S("scanner_admin"),C(),alert(`Admin account created successfully!
Email: ${l}
Password: ${g}

Please save this password - it won't be shown again.`)}catch(k){k.code==="auth/email-already-in-use"?alert("Email already in use"):alert("Error adding admin: "+(k.message||"Please try again"))}},T=async(w,k)=>{if(confirm(`Are you sure you want to remove ${k}?

Note: This will remove the Firestore profile but the Firebase Auth account must be deleted manually from Firebase Console.`))try{const j=pt(te,"admins",w);await Cu(j),C(),alert("Admin profile removed. Remember to delete the auth account from Firebase Console if needed.")}catch{alert("Error removing admin. Please try again.")}},E=async(w,k)=>{if(confirm("Are you sure you want to change this admin's role?"))try{const j=pt(te,"admins",w);await ha(j,{role:k}),C()}catch{alert("Error updating role. Please try again.")}};return t?r?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-500"})}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Admin Settings"}),u.jsx("p",{className:"text-gray-600",children:"Manage admin users and their permissions"})]}),u.jsxs(ee,{onClick:()=>o(!0),children:[u.jsx(GR,{className:"w-5 h-5 mr-2"}),"Add Admin"]})]}),u.jsxs(ge,{children:[u.jsx(Me,{children:u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Admin Users"})}),u.jsx(ye,{children:u.jsx("div",{className:"space-y-3",children:e.map(w=>u.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors duration-200",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${w.role==="super_admin"?"bg-yellow-100":"bg-blue-100"}`,children:w.role==="super_admin"?u.jsx(D0,{className:"w-5 h-5 text-yellow-600"}):u.jsx(Dd,{className:"w-5 h-5 text-blue-600"})}),u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-gray-900",children:w.email}),u.jsx("p",{className:"text-sm text-gray-500",children:w.role==="super_admin"?"Super Admin":"Scanner Admin"})]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsxs("select",{value:w.role,onChange:k=>E(w.id,k.target.value),className:"px-3 py-1.5 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-yellow-400",children:[u.jsx("option",{value:"scanner_admin",children:"Scanner Admin"}),u.jsx("option",{value:"super_admin",children:"Super Admin"})]}),u.jsx(ee,{variant:"danger",size:"sm",onClick:()=>T(w.id,w.email),children:u.jsx(tp,{className:"h-4 w-4"})})]})]},w.id))})})]}),u.jsxs(ge,{children:[u.jsx(Me,{children:u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Role Descriptions"})}),u.jsx(ye,{children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"p-4 bg-yellow-50 rounded-xl border border-yellow-200",children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[u.jsx(D0,{className:"w-5 h-5 text-yellow-600"}),u.jsx("h3",{className:"font-semibold text-gray-900",children:"Super Admin"})]}),u.jsxs("ul",{className:"text-sm text-gray-700 space-y-1",children:[u.jsx("li",{children:" Full system access"}),u.jsx("li",{children:" Create and manage events"}),u.jsx("li",{children:" Generate QR codes"}),u.jsx("li",{children:" Send invitations"}),u.jsx("li",{children:" Scan passes"}),u.jsx("li",{children:" View analytics"}),u.jsx("li",{children:" Manage admin users"})]})]}),u.jsxs("div",{className:"p-4 bg-blue-50 rounded-xl border border-blue-200",children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[u.jsx(Dd,{className:"w-5 h-5 text-blue-600"}),u.jsx("h3",{className:"font-semibold text-gray-900",children:"Scanner Admin"})]}),u.jsxs("ul",{className:"text-sm text-gray-700 space-y-1",children:[u.jsx("li",{children:" Scan passes"}),u.jsx("li",{children:" View analytics"}),u.jsx("li",{children:" View dashboard"}),u.jsx("li",{children:" Limited access only"})]})]})]})})]}),i&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:u.jsxs(ge,{className:"w-full max-w-md",children:[u.jsx(Me,{children:u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Add New Admin"})}),u.jsxs("form",{onSubmit:D,children:[u.jsxs(ye,{className:"space-y-4",children:[u.jsx(Wt,{label:"Name",type:"text",placeholder:"Admin Name",value:d,onChange:w=>f(w.target.value),required:!0}),u.jsx(Wt,{label:"Email Address",type:"email",placeholder:"admin@example.com",value:l,onChange:w=>c(w.target.value),required:!0}),u.jsx(Wt,{label:"Password",type:"password",placeholder:"Min. 6 characters",value:g,onChange:w=>p(w.target.value),required:!0}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Role"}),u.jsxs("select",{value:x,onChange:w=>S(w.target.value),className:"w-full px-4 py-2.5 bg-white border border-gray-200 rounded-xl text-gray-900 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent",children:[u.jsx("option",{value:"scanner_admin",children:"Scanner Admin"}),u.jsx("option",{value:"super_admin",children:"Super Admin"})]})]})]}),u.jsxs("div",{className:"px-6 py-4 border-t border-gray-100 flex justify-end space-x-3",children:[u.jsx(ee,{type:"button",variant:"ghost",onClick:()=>{o(!1),c(""),f(""),p(""),S("scanner_admin")},children:"Cancel"}),u.jsx(ee,{type:"submit",children:"Add Admin"})]})]})]})})]}):u.jsx(ge,{children:u.jsxs(ye,{className:"py-12 text-center",children:[u.jsx(Dd,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),u.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Access Denied"}),u.jsx("p",{className:"text-gray-600",children:"Only super admins can access this page."})]})})}function qP(){const[t,e]=F.useState([]),[n,r]=F.useState(""),[s,i]=F.useState(""),[o,l]=F.useState(""),[c,d]=F.useState(200),[f,g]=F.useState(50);F.useState(""),F.useState(!1),F.useState(!1);const p=F.useRef(null),x=F.useRef(null),S=F.useRef(null);F.useEffect(()=>{C()},[]),F.useEffect(()=>{n&&E()},[n,s,o,c,f]);const C=async()=>{try{const j=Se(te,"events"),P=Bt(j,Bn("created_at","desc")),y=(await Je(P)).docs.map(I=>({id:I.id,...I.data()}));e(y),y.length>0&&r(y[0].id)}catch{}},D=j=>{var _;const P=(_=j.target.files)==null?void 0:_[0];if(P){const y=new FileReader;y.onload=I=>{var A;i((A=I.target)==null?void 0:A.result)},y.readAsDataURL(P)}},T=j=>{var _;const P=(_=j.target.files)==null?void 0:_[0];if(P){const y=new FileReader;y.onload=I=>{var A;l((A=I.target)==null?void 0:A.result)},y.readAsDataURL(P)}},E=async()=>{if(!p.current)return;const j=p.current,P=j.getContext("2d");if(!P)return;const _=t.find(I=>I.id===n);if(!_)return;if(j.width=600,j.height=800,o){const I=new Image;I.onload=()=>{P.drawImage(I,0,0,j.width,j.height),y()},I.src=o}else P.fillStyle=_.bg_color||"#ffffff",P.fillRect(0,0,j.width,j.height),y();function y(){if(!P)return;P.fillStyle=(_==null?void 0:_.accent_color)||"#000000",P.font="bold 32px Arial",P.textAlign="center",P.fillText((_==null?void 0:_.title)||"Event Title",j.width/2,80);const I=(j.width-c)/2,A=150;if(P.fillStyle="#ffffff",P.fillRect(I,A,c,c),P.strokeStyle=(_==null?void 0:_.accent_color)||"#000000",P.lineWidth=3,P.strokeRect(I,A,c,c),P.fillStyle="#cccccc",P.font="16px Arial",P.fillText("QR Code",j.width/2,A+c/2),s){const R=new Image;R.onload=()=>{const b=(j.width-f)/2,N=A+(c-f)/2;P.fillStyle="#ffffff",P.fillRect(b-5,N-5,f+10,f+10),P.drawImage(R,b,N,f,f)},R.src=s}P.fillStyle="#333333",P.font="18px Arial",P.fillText((_==null?void 0:_.description)||"Event Description",j.width/2,A+c+50),P.font="14px Arial",P.fillStyle="#666666",P.fillText("Scan this QR code at the event entrance",j.width/2,A+c+80)}},w=()=>{if(!p.current)return;const j=p.current,P=document.createElement("a");P.download=`qr-template-${n}.png`,P.href=j.toDataURL(),P.click()},k=t.find(j=>j.id===n);return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"QR Pass Editor"}),u.jsx("p",{className:"text-gray-600",children:"Customize your QR pass design with logo and background"})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"space-y-6",children:[u.jsxs(ge,{children:[u.jsx(Me,{children:u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Design Settings"})}),u.jsxs(ye,{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Event"}),u.jsx("select",{className:"w-full px-4 py-2.5 bg-white border border-gray-200 rounded-xl text-gray-900 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent",value:n,onChange:j=>r(j.target.value),children:t.map(j=>u.jsx("option",{value:j.id,children:j.title},j.id))})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[u.jsx(OR,{className:"w-4 h-4 inline mr-1"}),"Logo (Center of QR)"]}),u.jsx("input",{ref:x,type:"file",accept:"image/*",onChange:D,className:"hidden"}),u.jsxs(ee,{onClick:()=>{var j;return(j=x.current)==null?void 0:j.click()},variant:"secondary",className:"w-full",children:[u.jsx(lf,{className:"w-4 h-4 mr-2"}),s?"Change Logo":"Upload Logo"]}),s&&u.jsx("div",{className:"mt-2",children:u.jsx("img",{src:s,alt:"Logo preview",className:"w-20 h-20 object-contain mx-auto border rounded"})})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Logo Size: ",f,"px"]}),u.jsx("input",{type:"range",min:"30",max:"100",value:f,onChange:j=>g(Number(j.target.value)),className:"w-full"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[u.jsx(Ux,{className:"w-4 h-4 inline mr-1"}),"Background Image"]}),u.jsx("input",{ref:S,type:"file",accept:"image/*",onChange:T,className:"hidden"}),u.jsxs(ee,{onClick:()=>{var j;return(j=S.current)==null?void 0:j.click()},variant:"secondary",className:"w-full",children:[u.jsx(lf,{className:"w-4 h-4 mr-2"}),o?"Change Background":"Upload Background"]}),o&&u.jsx("div",{className:"mt-2",children:u.jsx("img",{src:o,alt:"Background preview",className:"w-full h-32 object-cover rounded"})})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["QR Code Size: ",c,"px"]}),u.jsx("input",{type:"range",min:"150",max:"300",value:c,onChange:j=>d(Number(j.target.value)),className:"w-full"})]}),u.jsx("div",{className:"pt-4",children:u.jsxs(ee,{onClick:w,className:"w-full",children:[u.jsx(Nu,{className:"w-4 h-4 mr-2"}),"Download Template"]})})]})]}),u.jsxs(ge,{children:[u.jsx(Me,{children:u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Event Colors"})}),u.jsxs(ye,{className:"space-y-3",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Background Color"}),u.jsx("div",{className:"w-full h-12 rounded-lg border-2 border-gray-300",style:{backgroundColor:(k==null?void 0:k.bg_color)||"#ffffff"}}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:(k==null?void 0:k.bg_color)||"#ffffff"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Accent Color"}),u.jsx("div",{className:"w-full h-12 rounded-lg border-2 border-gray-300",style:{backgroundColor:(k==null?void 0:k.accent_color)||"#000000"}}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:(k==null?void 0:k.accent_color)||"#000000"})]})]}),u.jsx("p",{className:"text-xs text-gray-600",children:"Edit colors in the Events page to update the design"})]})]})]}),u.jsx("div",{children:u.jsxs(ge,{children:[u.jsx(Me,{children:u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Preview"})}),u.jsxs(ye,{children:[u.jsx("div",{className:"bg-gray-50 rounded-xl p-4 flex items-center justify-center",children:u.jsx("canvas",{ref:p,className:"border-2 border-gray-300 rounded-lg shadow-lg max-w-full h-auto",style:{maxHeight:"600px"}})}),u.jsx("div",{className:"mt-4 bg-blue-50 border border-blue-200 rounded-xl p-3",children:u.jsxs("p",{className:"text-xs text-blue-800",children:[u.jsx("strong",{children:"Note:"})," This is a template preview. The actual QR code will be generated when sending invitations."]})})]})]})})]})]})}function B0(){const[t,e]=F.useState([]),[n,r]=F.useState(!0);F.useEffect(()=>{s()},[]);const s=async()=>{try{const o=Se(te,"scan_logs"),l=Bt(o,Bn("scanned_at","desc"),Fa(100)),c=await Je(l),d=await Promise.all(c.docs.map(async f=>{const g={id:f.id,...f.data()};if(g.pass_id)try{const p=await Ni(pt(te,"passes",g.pass_id));if(p.exists())return{...g,passes:p.data()}}catch{}return g}));e(d)}catch{}finally{r(!1)}},i=()=>{const o=["Timestamp","Code","Guest Name","Status"],l=t.map(p=>{var x,S;return[(x=p.scanned_at)!=null&&x.toDate?p.scanned_at.toDate().toLocaleString():"N/A",p.scanned_code||"N/A",p.guest_name||((S=p.passes)==null?void 0:S.guest_name)||"N/A",p.status||"N/A"]}),c=[o.join(","),...l.map(p=>p.map(x=>`"${x}"`).join(","))].join(`
`),d=new Blob([c],{type:"text/csv"}),f=window.URL.createObjectURL(d),g=document.createElement("a");g.href=f,g.download=`scan-history-${new Date().toISOString().split("T")[0]}.csv`,g.click(),window.URL.revokeObjectURL(f)};return n?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-500"})}):u.jsxs("div",{className:"space-y-4 md:space-y-6 pb-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-1 md:mb-2",children:"Scan History"}),u.jsx("p",{className:"text-sm md:text-base text-gray-600",children:"View all your scan records"})]}),u.jsxs(ee,{onClick:i,size:"sm",className:"self-start sm:self-auto",children:[u.jsx(Nu,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]}),u.jsxs(ge,{children:[u.jsx(Me,{children:u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("h2",{className:"text-lg md:text-xl font-semibold text-gray-900",children:["Recent Scans (",t.length,")"]})})}),u.jsx(ye,{children:t.length===0?u.jsxs("div",{className:"text-center py-8 text-gray-500",children:[u.jsx(af,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),u.jsx("p",{className:"text-sm md:text-base",children:"No scans yet"})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"hidden md:block overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase",children:"Timestamp"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase",children:"Code"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase",children:"Guest"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase",children:"Status"})]})}),u.jsx("tbody",{className:"divide-y divide-gray-100",children:t.map(o=>{var l,c,d;return u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:(l=o.scanned_at)!=null&&l.toDate?o.scanned_at.toDate().toLocaleString():o.scanned_at?new Date(o.scanned_at).toLocaleString():"N/A"}),u.jsx("td",{className:"px-4 py-3 text-sm font-mono text-gray-700",children:o.scanned_code||"N/A"}),u.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:o.guest_name||((c=o.passes)==null?void 0:c.guest_name)||"N/A"}),u.jsx("td",{className:"px-4 py-3",children:u.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${o.status==="valid"?"bg-green-100 text-green-800":o.status==="already_used"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:((d=o.status)==null?void 0:d.replace("_"," "))||"Unknown"})})]},o.id)})})]})}),u.jsx("div",{className:"md:hidden space-y-2 max-h-[70vh] overflow-y-auto",children:t.map(o=>{var l,c;return u.jsxs("div",{className:`p-3 rounded-lg border ${o.status==="valid"?"bg-green-50 border-green-200":o.status==="already_used"?"bg-yellow-50 border-yellow-200":"bg-red-50 border-red-200"}`,children:[u.jsxs("div",{className:"flex items-start justify-between mb-2",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"font-medium text-sm text-gray-900 truncate",children:o.guest_name||((l=o.passes)==null?void 0:l.guest_name)||"Unknown"}),u.jsx("p",{className:"text-xs font-mono text-gray-600 truncate",children:o.scanned_code||"N/A"})]}),u.jsx("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full flex-shrink-0 ml-2 ${o.status==="valid"?"bg-green-100 text-green-800":o.status==="already_used"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:o.status==="valid"?" Valid":o.status==="already_used"?" Used":" Invalid"})]}),u.jsx("div",{className:"flex items-center justify-between text-xs text-gray-500",children:u.jsx("span",{children:(c=o.scanned_at)!=null&&c.toDate?o.scanned_at.toDate().toLocaleString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"})})]},o.id)})})]})})]})]})}function HP({children:t}){const{admin:e,signOut:n,isSuperAdmin:r,hasGoogleLinked:s,linkGoogleAccount:i}=$i(),[o,l]=F.useState(!1),[c,d]=F.useState(""),[f,g]=F.useState(!1),x=r?[{name:"Dashboard",href:"#dashboard",icon:MR},{name:"Events",href:"#events",icon:zr},{name:"Guests",href:"#guests",icon:np},{name:"Send Invitations",href:"#mail",icon:ma},{name:"QR Editor",href:"#qr-editor",icon:Ux},{name:"Scanner",href:"#scanner",icon:j0},{name:"Analytics",href:"#analytics",icon:k0},{name:"Admin Settings",href:"#settings",icon:qR}]:[{name:"Scanner",href:"#scanner",icon:j0},{name:"History",href:"#history",icon:k0}],S=async()=>{try{l(!0),d(""),await i(),alert("Google account linked successfully! You can now use Sheets and Gmail features.")}catch(C){d(C.message||"Failed to link Google account")}finally{l(!1)}};return u.jsxs("div",{className:"min-h-screen bg-[#F5F5F7]",children:[u.jsx("nav",{className:"bg-white border-b border-gray-200 sticky top-0 z-50 backdrop-blur-xl bg-white/80",children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"flex justify-between h-14 md:h-16 items-center",children:[u.jsxs("div",{className:"flex items-center space-x-2 md:space-x-3",children:[u.jsx(zr,{className:"w-6 h-6 md:w-8 md:h-8 text-yellow-500"}),u.jsx("span",{className:"text-lg md:text-xl font-semibold text-gray-900",children:"QR Pass"})]}),u.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[u.jsxs("div",{className:"text-right hidden sm:block",children:[u.jsx("p",{className:"text-xs md:text-sm font-medium text-gray-900 truncate max-w-[150px] md:max-w-none",children:e==null?void 0:e.email}),u.jsx("span",{className:`text-xs px-2 py-0.5 md:py-1 rounded-full ${r?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:(e==null?void 0:e.role)==="super_admin"?"Super Admin":"Scanner Admin"})]}),u.jsx("button",{onClick:()=>g(!f),className:"lg:hidden p-2 rounded-lg hover:bg-gray-100",children:f?u.jsx(KR,{className:"w-5 h-5"}):u.jsx(BR,{className:"w-5 h-5"})}),u.jsx(ee,{variant:"ghost",size:"sm",onClick:n,className:"hidden sm:flex",children:u.jsx(P0,{className:"w-4 h-4"})})]})]})})}),f&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>g(!1),children:u.jsxs("div",{className:"absolute right-0 top-14 md:top-16 bottom-0 w-64 bg-white shadow-lg",onClick:C=>C.stopPropagation(),children:[u.jsxs("div",{className:"p-4 border-b",children:[u.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:e==null?void 0:e.email}),u.jsx("span",{className:`text-xs px-2 py-1 rounded-full mt-2 inline-block ${r?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:(e==null?void 0:e.role)==="super_admin"?"Super Admin":"Scanner Admin"})]}),u.jsxs("nav",{className:"p-3 space-y-1",children:[x.map(C=>u.jsxs("a",{href:C.href,onClick:()=>g(!1),className:"flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-50 rounded-xl transition-colors duration-200 group",children:[u.jsx(C.icon,{className:"w-5 h-5 text-gray-400 group-hover:text-yellow-500"}),u.jsx("span",{className:"text-sm font-medium",children:C.name})]},C.name)),u.jsxs("button",{onClick:()=>{n(),g(!1)},className:"w-full flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-50 rounded-xl transition-colors duration-200 group",children:[u.jsx(P0,{className:"w-5 h-5 text-gray-400 group-hover:text-red-500"}),u.jsx("span",{className:"text-sm font-medium",children:"Logout"})]})]})]})}),r&&!s&&u.jsx("div",{className:"bg-blue-50 border-b border-blue-200",children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-2 md:py-3",children:u.jsxs("div",{className:"flex items-start md:items-center justify-between gap-3",children:[u.jsxs("div",{className:"flex items-start md:items-center space-x-2 md:space-x-3 flex-1 min-w-0",children:[u.jsx(Fx,{className:"w-4 h-4 md:w-5 md:h-5 text-blue-600 flex-shrink-0 mt-0.5 md:mt-0"}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("p",{className:"text-xs md:text-sm font-medium text-blue-900",children:"Connect Google for Sheets & Gmail"}),c&&u.jsx("p",{className:"text-xs text-red-600 mt-1",children:c})]})]}),u.jsxs(ee,{size:"sm",onClick:S,isLoading:o,className:"flex-shrink-0 text-xs md:text-sm",children:[u.jsx(FR,{className:"w-3 h-3 md:w-4 md:h-4 mr-1 md:mr-2"}),u.jsx("span",{className:"hidden xs:inline",children:"Connect"})]})]})})}),u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 md:py-8",children:u.jsxs("div",{className:"flex gap-6",children:[u.jsx("aside",{className:"w-64 flex-shrink-0 hidden lg:block",children:u.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-3 sticky top-24",children:u.jsx("nav",{className:"space-y-1",children:x.map(C=>u.jsxs("a",{href:C.href,className:"flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-50 rounded-xl transition-colors duration-200 group",children:[u.jsx(C.icon,{className:"w-5 h-5 text-gray-400 group-hover:text-yellow-500"}),u.jsx("span",{className:"text-sm font-medium",children:C.name})]},C.name))})})}),u.jsx("main",{className:"flex-1 min-w-0",children:t})]})})]})}function WP(){const{user:t,admin:e,loading:n}=$i(),[r,s]=F.useState("");if(F.useEffect(()=>{const o=()=>{const l=window.location.hash.slice(1);if(l)s(l);else if(e){const c=e.role==="scanner_admin"?"scanner":"dashboard";window.location.hash=c,s(c)}};return o(),window.addEventListener("hashchange",o),()=>window.removeEventListener("hashchange",o)},[e]),n)return u.jsx("div",{className:"min-h-screen bg-[#F5F5F7] flex items-center justify-center",children:u.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-yellow-500"})});if(!t||!e)return u.jsx(QR,{});const i=()=>{if(e.role==="scanner_admin")switch(r){case"scanner":return u.jsx(Ud,{});case"history":return u.jsx(B0,{});default:return u.jsx(Ud,{})}switch(r){case"dashboard":return u.jsx(L0,{});case"events":return u.jsx(YR,{});case"guests":return u.jsx(FP,{});case"mail":return u.jsx(BP,{});case"qr-editor":return u.jsx(qP,{});case"scanner":return u.jsx(Ud,{});case"history":return u.jsx(B0,{});case"analytics":return u.jsx($P,{});case"settings":return u.jsx(zP,{});default:return u.jsx(L0,{})}};return u.jsx(HP,{children:i()})}function GP(){return u.jsx(bR,{children:u.jsx(WP,{})})}ew(document.getElementById("root")).render(u.jsx(F.StrictMode,{children:u.jsx(GP,{})}));
